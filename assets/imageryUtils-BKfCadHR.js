import{$ as e,j as t}from"./utils-CNFe6p3t.js";import{eI as a,eJ as r,eL as i,eN as s}from"./index-DSIPxOWi.js";const l="Image Service";function c(e){var t;if("imagery"===e.type)return{isValid:!0};const{raster:a}=e,r="Function"===(null==a?void 0:a.datasetFormat)?null==(t=a.primaryRasters)?void 0:t.rasters[0]:a;return{isValid:"RasterTileServer"===(null==r?void 0:r.datasetFormat)&&("Raster"===r.tileType||"Map"===r.tileType),errorMessage:"imagery tile layer should be created from a tiled image service."}}function p(e){const t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}async function u(e,t){const{parsedUrl:l,title:n,fullExtent:y}=e;t.url=l.path,t.title||(t.title=n);try{t.extent=await a(y)}catch{t.extent=void 0}r(t,i.METADATA),"imagery-tile"===e.type&&s(t,i.TILED_IMAGERY)}async function g(t,a){const r="imagery"===t.type?"imagery-layer-save":"imagery-tile-layer-save";return e({layer:t,itemType:l,validateLayer:c,createItemData:p,errorNamePrefix:r},a)}async function v(e,a,r){const i="imagery"===e.type?"imagery-layer-save-as":"imagery-tile-layer-save-as";return t({layer:e,itemType:l,validateLayer:c,createItemData:p,errorNamePrefix:i,newItem:a,setItemProperties:u},r)}export{g as save,v as saveAs};
