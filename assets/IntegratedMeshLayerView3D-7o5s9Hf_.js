import{m as e,q as r,r as t,P as i,v as s,e as o,y as a,w as n,a as p}from"./index-DSIPxOWi.js";import{A as l}from"./I3SMeshView3D-DvgHMyu_.js";import{l as m}from"./LayerView3D-ApO6iJqK.js";import{y as d}from"./LayerView-DMoB2q_T.js";import"./Transform-A6X0mfYo.js";import"./RenderTexture-DbJC7CTU.js";import"./I3SOverrides-CXcxzPSI.js";import"./I3SNode-mlgend4K.js";import"./ReactiveSet-XbWJTkHf.js";import"./meshFeatureSet-BNHS2qnT.js";import"./Mesh-BS04vQSz.js";import"./MeshTransform-Y0ppddED.js";import"./vertexSpaceConversion-C_GU75pR.js";import"./External-Djr0rIk9.js";import"./infoFor3D-BTCPmnmy.js";import"./FeatureLayerView3D-C33G2_Ur.js";import"./FeatureLayerViewBase3D-BxcSlUqN.js";import"./HeatmapDensity.glsl-jGaN0eX9.js";import"./timeSupport-CU-EQyfu.js";import"./projectExtentUtils-KG39_WUt.js";import"./dehydratedFeatureComparison-dI04k89u.js";import"./queryForSymbologySnapping-CEKgwdf_.js";import"./hash-BjBdcEEU.js";import"./Graphics3DObjectStates-B77mD6jz.js";import"./optimizedFeatureQueryEngineAdapter--U1rvwBV.js";import"./PooledRBush-DOZnXWx2.js";import"./quickselect-D9ta8ndX.js";import"./floorFilterUtils-2NbRkqHK.js";import"./QueryEngine-DAD9skS_.js";import"./normalizeUtils-BrH-PrZy.js";import"./normalizeUtilsCommon-BU8xfl77.js";import"./WhereClause-DYd7Xwn9.js";import"./TimeOnly-C5lZbbIX.js";import"./json-omtrO2vq.js";import"./QueryEngineCapabilities-CTDe3LlQ.js";import"./utils-B-uQJqPz.js";import"./utils-DEUXBrCj.js";import"./utils-1_4Re7um.js";import"./ClassBreaksDefinition-Dt1HCCB7.js";import"./FeatureStore-Dpo5Syxq.js";import"./BoundsStore-BQ0MOdb7.js";import"./query-C2USZ63O.js";import"./pbfQueryUtils-DUjEbwA9.js";import"./pbf-B53Txr8m.js";import"./WorkerHandle-Bq2affGI.js";import"./EventedSet-D3TBRYG7.js";import"./RefreshableLayerView-MYyyoaX8.js";import"./SceneModification-yCQPZUfb.js";import"./persistable-Bz3xp-b5.js";import"./resourceExtension-BScMZjEL.js";import"./SceneLayerWorker-B2gy9gVB.js";import"./makeScheduleFunction-Cc-EjyuG.js";let u=class extends(l(m(d))){constructor(){super(...arguments),this.type="integrated-mesh-3d",this._elevationContext="im",this._isIntegratedMesh=!0,this._supportsLabeling=!1,this._needsNormals=!e("disable-feature:im-shading"),this.drapeTargetType=r.WithoutRasterImage}get i3slayer(){return this.layer}get updatingProgressValue(){var e;return(null==(e=this._controller)?void 0:e.updatingProgress)??0}get lodFactor(){var e,r,t,i;return(null==(i=null==(t=null==(r=null==(e=this.view)?void 0:e.qualitySettings)?void 0:r.sceneService)?void 0:t.integratedMesh)?void 0:i.lodFactor)??1}get progressiveLoadFactor(){return this.lodFactor>=1?.2:1}get visibleAtCurrentScale(){return t(this.i3slayer.effectiveScaleRange,this.view.terrainScale)}get layerPopupEnabledAndHasTemplate(){return!1}initialize(){this._updatingHandles.add((()=>this.layer.modifications),(()=>this._loadModifications()),i),this.view.basemapTerrain.overlayManager.registerDrapeTarget(this)}destroy(){this.view.basemapTerrain.overlayManager.unregisterDrapeTarget(this)}_createLayerGraphic(){return new s({layer:this.layer,sourceLayer:this.layer})}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}_loadModifications(){if(this.removeHandles("modifications"),null==this.layer.modifications)return void(this._modifications=[]);const e=this.layer.modifications;this.addHandles(this._updatingHandles.addOnCollectionChange((()=>e),(()=>this._modifications=e.toArray()),i),"modifications")}};o([a()],u.prototype,"layer",void 0),o([a()],u.prototype,"i3slayer",null),o([a(n)],u.prototype,"updatingProgress",void 0),o([a()],u.prototype,"updatingProgressValue",null),o([a()],u.prototype,"lodFactor",null),o([a({readOnly:!0})],u.prototype,"progressiveLoadFactor",null),o([a({readOnly:!0})],u.prototype,"visibleAtCurrentScale",null),u=o([p("esri.views.3d.layers.IntegratedMeshLayerView3D")],u);const j=u;export{j as default};
