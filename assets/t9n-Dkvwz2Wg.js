import{eF as e}from"./index-DSIPxOWi.js";import{o as t,c as i}from"./dom-CG95YN3b.js";import{n}from"./key-Bjfr4614.js";import{c as s}from"./observers-4D3dvPBC.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const a=new RegExp("\\.(0+)?$"),r=new RegExp("0+$");class BigDecimal{constructor(e){if(e instanceof BigDecimal)return e;const[t,i]=function expandExponentialNumberString(e){const t=e.split(/[eE]/);if(1===t.length)return e;const i=+e;if(Number.isSafeInteger(i))return`${i}`;const n="-"===e.charAt(0),s=+t[1],r=t[0].split("."),o=(n?r[0].substring(1):r[0])||"",l=r[1]||"",shiftDecimalLeft=(e,t)=>{const i=Math.abs(t)-e.length,n=i>0?`${"0".repeat(i)}${e}`:e;return`${n.slice(0,t)}.${n.slice(t)}`},shiftDecimalRight=(e,t)=>{const i=t>e.length?`${e}${"0".repeat(t-e.length)}`:e;return`${i.slice(0,t)}.${i.slice(t)}`},g=s>0?`${o}${shiftDecimalRight(l,s)}`:`${shiftDecimalLeft(o,s)}${l}`;return`${n?"-":""}${"."===g.charAt(0)?"0":""}${g.replace(a,"").replace(c,"")}`}(e).split(".").concat("");this.value=BigInt(t+i.padEnd(BigDecimal.DECIMALS,"0").slice(0,BigDecimal.DECIMALS))+BigInt(BigDecimal.ROUNDED&&i[BigDecimal.DECIMALS]>="5"),this.isNegative="-"===e.charAt(0)}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(BigDecimal.DECIMALS+1,"0");return{integers:e.slice(0,-BigDecimal.DECIMALS),decimals:e.slice(-BigDecimal.DECIMALS).replace(r,"")}}toString(){const{integers:e,decimals:t}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${t.length?"."+t:""}`}formatToParts(e){const{integers:t,decimals:i}=this.getIntegersAndDecimals(),n=e.numberFormatter.formatToParts(BigInt(t));return this.isNegative&&n.unshift({type:"minusSign",value:e.minusSign}),i.length&&(n.push({type:"decimal",value:e.decimal}),i.split("").forEach((e=>n.push({type:"fraction",value:e})))),n}format(e){const{integers:t,decimals:i}=this.getIntegersAndDecimals();return`${`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(t))}`}${i.length?`${e.decimal}${i.split("").map((t=>e.numberFormatter.format(Number(t)))).join("")}`:""}`}add(e){return BigDecimal.fromBigInt(this.value+new BigDecimal(e).value)}subtract(e){return BigDecimal.fromBigInt(this.value-new BigDecimal(e).value)}multiply(e){return BigDecimal._divRound(this.value*new BigDecimal(e).value,BigDecimal.SHIFT)}divide(e){return BigDecimal._divRound(this.value*BigDecimal.SHIFT,new BigDecimal(e).value)}}function isValidNumber(e){return!(!e||isNaN(Number(e)))}function parseNumberString(e){return e&&function stringContainsNumbers(e){return n.some((t=>e.includes(t)))}(e)?sanitizeExponentialNumberString(e,(e=>{let t=!1;const i=e.split("").filter(((e,i)=>e.match(/\./g)&&!t?(t=!0,!0):!(!e.match(/-/g)||0!==i)||n.includes(e))).join("");return isValidNumber(i)?new BigDecimal(i).toString():""})):""}BigDecimal.DECIMALS=100,BigDecimal.ROUNDED=!0,BigDecimal.SHIFT=BigInt("1"+"0".repeat(BigDecimal.DECIMALS)),BigDecimal._divRound=(e,t)=>BigDecimal.fromBigInt(e/t+(BigDecimal.ROUNDED?e*BigInt(2)/t%BigInt(2):BigInt(0))),BigDecimal.fromBigInt=e=>Object.assign(Object.create(BigDecimal.prototype),{value:e,isNegative:e<BigInt(0)});const c=/^([-0])0+(?=\d)/,o=/(?!^\.)\.$/,l=/(?!^-)-/g,g=/^-\b0\b\.?0*$/,u=/0*$/,sanitizeNumberString=e=>sanitizeExponentialNumberString(e,(e=>{const t=e.replace(l,"").replace(o,"").replace(c,"$1");return isValidNumber(t)?g.test(t)?t:function getBigDecimalAsString(e){const t=e.split(".")[1],i=new BigDecimal(e).toString(),[n,s]=i.split(".");return t&&s!==t?`${n}.${t}`:i}(t):e}));function sanitizeExponentialNumberString(e,t){if(!e)return e;const i=e.toLowerCase().indexOf("e")+1;return i?e.replace(/[eE]*$/g,"").substring(0,i).concat(e.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map(((e,i)=>t(1===i?e.replace(/\./g,""):e))).join("e").replace(/^e/,"1e"):t(e)}function addLocalizedTrailingDecimalZeros(e,t,i){const n=t.split(".")[1];if(n){const s=n.match(u)[0];if(s&&i.delocalize(e).length!==t.length&&-1===n.indexOf("e")){const t=i.decimal;return(e=e.includes(t)?e:`${e}${t}`).padEnd(e.length+s.length,i.localize("0"))}}return e}const m="en",p=["ar","bg","bs","ca","cs","da","de","el",m,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],d=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",m,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],h=["arab","arabext","latn"],isNumberingSystemSupported=e=>h.includes(e),f=(new Intl.NumberFormat).resolvedOptions().numberingSystem,b="arab"!==f&&isNumberingSystemSupported(f)?f:"latn";function getSupportedLocale(e,t="cldr"){const i="cldr"===t?d:p;return e?i.includes(e)?e:"nb"===(e=e.toLowerCase())?"no":"t9n"===t&&"pt"===e?"pt-BR":(e.includes("-")&&(e=e.replace(/(\w+)-(\w+)/,((e,t,i)=>`${t}-${i.toUpperCase()}`)),i.includes(e)||(e=e.split("-")[0])),"zh"===e?"zh-CN":i.includes(e)?e:m):m}const D=new Set;function connectLocalized(e){!function updateEffectiveLocale(e){e.effectiveLocale=function getLocale(e){var t;return e.el.lang||(null==(t=i(e.el,"[lang]"))?void 0:t.lang)||document.documentElement.lang||m}(e)}(e),0===D.size&&(null==B||B.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0})),D.add(e)}function disconnectLocalized(e){D.delete(e),0===D.size&&B.disconnect()}const B=s("mutation",(e=>{e.forEach((e=>{const n=e.target;D.forEach((e=>{if(!t(n,e.el))return;const s=i(e.el,"[lang]");if(!s)return void(e.effectiveLocale=m);const a=s.lang;e.effectiveLocale=s.hasAttribute("lang")&&""===a?m:a}))}))}));const S=new class NumberStringFormat{constructor(){this.delocalize=e=>this._numberFormatOptions?sanitizeExponentialNumberString(e,(e=>e.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex))):e,this.localize=e=>this._numberFormatOptions?sanitizeExponentialNumberString(e,(e=>isValidNumber(e.trim())?new BigDecimal(e.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):e)):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){var t;if(e.locale=getSupportedLocale(null==e?void 0:e.locale),e.numberingSystem=(t=null==e?void 0:e.numberingSystem,isNumberingSystemSupported(t)?t:b),!this._numberFormatOptions&&e.locale===m&&e.numberingSystem===b&&2===Object.keys(e).length||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map(((e,t)=>[e,t]))),n=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-12345678.9);this._actualGroup=n.find((e=>"group"===e.type)).value,this._group=0===this._actualGroup.trim().length||" "==this._actualGroup?"Â ":this._actualGroup,this._decimal=n.find((e=>"decimal"===e.type)).value,this._minusSign=n.find((e=>"minusSign"===e.type)).value,this._getDigitIndex=e=>i.get(e)}},v={};
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */function throwMessageFetchError(){throw new Error("could not fetch component message bundle")}function mergeMessages(e){e.messages={...e.defaultMessages,...e.messageOverrides}}function noop(){}async function setUpMessages(e){e.defaultMessages=await fetchMessages(e,e.effectiveLocale),mergeMessages(e)}async function fetchMessages(t,i){const{el:n}=t,s=n.tagName.toLowerCase().replace("calcite-","");return async function getMessageBundle(t,i){const n=`${i}_${t}`;return v[n]||(v[n]=fetch(e(`./assets/${i}/t9n/messages_${t}.json`)).then((e=>(e.ok||throwMessageFetchError(),e.json()))).catch((()=>throwMessageFetchError()))),v[n]}(getSupportedLocale(i,"t9n"),s)}async function updateMessages(e,t){e.defaultMessages=await fetchMessages(e,t),mergeMessages(e)}function connectMessages(e){e.onMessagesChange=defaultOnMessagesChange}function disconnectMessages(e){e.onMessagesChange=noop}function defaultOnMessagesChange(){mergeMessages(this)}export{BigDecimal as B,connectMessages as a,disconnectMessages as b,connectLocalized as c,disconnectLocalized as d,sanitizeNumberString as e,addLocalizedTrailingDecimalZeros as f,isValidNumber as i,S as n,parseNumberString as p,setUpMessages as s,updateMessages as u};
