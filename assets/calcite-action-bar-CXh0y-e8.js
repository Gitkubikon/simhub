import{eA as e,eB as t,eC as o,eD as i,gL as a,eE as n}from"./index-DSIPxOWi.js";import{c as s,d as l}from"./conditionalSlot-CDvqoXHX.js";import{g as c,p as r,s as d,m as h}from"./dom-CG95YN3b.js";import{a as p,s as u,c as g}from"./loadable-TuT7-EDA.js";import{u as m,c as f,a as b,s as x,d as v,b as y}from"./t9n-Dkvwz2Wg.js";import{c as A}from"./observers-4D3dvPBC.js";import{S as E,d as w}from"./action-group-DPxpKt1q.js";import{S as C,d as H,a as z}from"./action-menu-BUIA3NwG.js";import{d as L}from"./action-Dvbm1zId.js";import{d as T}from"./icon-DN35inCc.js";import{d as D}from"./loader-DnD0exo2.js";import{d as S}from"./debounce-Z6QnFls1.js";import"./guid-DBupVat2.js";import"./key-Bjfr4614.js";import"./floating-ui-BBcbf-ex.js";import"./focusTrapComponent-BWL-aVr7.js";import"./openCloseComponent-DPRdqyP2.js";import"./component-BaDXbCam.js";import"./interactive-Dv2N9_bt.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const getAverage=e=>e.reduce(((e,t)=>e+t),0)/e.length,getOverflowCount=({layout:e,actionCount:t,actionWidth:o,width:i,actionHeight:a,height:n,groupCount:s})=>Math.max(t-(({width:e,actionWidth:t,layout:o,height:i,actionHeight:a,groupCount:n})=>{const s="horizontal"===o?e:i,l="horizontal"===o?t:a;return Math.floor((s-2*n)/l)})({width:i,actionWidth:o,layout:e,height:n,actionHeight:a,groupCount:s}),0),queryActions=e=>Array.from(e.querySelectorAll("calcite-action")).filter((e=>!e.closest("calcite-action-menu")||e.slot===C.trigger)),j="chevrons-left",k="chevrons-right";function toggleChildActionText({el:e,expanded:t}){queryActions(e).filter((e=>e.slot!==E.menuActions)).forEach((e=>e.textEnabled=t)),e.querySelectorAll("calcite-action-group, calcite-action-menu").forEach((e=>e.expanded=t))}const ExpandToggle=({expanded:t,expandText:o,collapseText:i,expandLabel:a,collapseLabel:n,toggle:s,el:l,position:r,tooltip:d,ref:h,scale:p})=>{const u="rtl"===c(l),g=t?i:o,m=t?n:a,f=[j,k];u&&f.reverse();const b="end"===function getCalcitePosition(e,t){var o;return e||(null==(o=t.closest("calcite-shell-panel"))?void 0:o.position)||"start"}(r,l),x=b?f[1]:f[0],v=b?f[0]:f[1],y=e("calcite-action",{icon:t?x:v,id:"expand-toggle",label:m,onClick:s,ref:e=>(({tooltip:e,referenceElement:t,expanded:o,ref:i})=>(e&&(e.referenceElement=!o&&t?t:null),i&&i(t),t))({tooltip:d,referenceElement:e,expanded:t,ref:h}),scale:p,text:g,textEnabled:t,title:t||d?null:g});return y},O="action-group--end",B="actions-end",G="bottom-actions",M="expand-tooltip",W=o(class ActionBar2 extends i{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionBarToggle=a(this,"calciteActionBarToggle",6),this.mutationObserver=A("mutation",(()=>{const{el:e,expanded:t}=this;toggleChildActionText({el:e,expanded:t}),this.overflowActions()})),this.resizeObserver=A("resize",(e=>this.resizeHandlerEntries(e))),this.actionMenuOpenHandler=e=>{if(e.target.menuOpen){const t=e.composedPath();Array.from(this.el.querySelectorAll("calcite-action-group")).forEach((e=>{t.includes(e)||(e.menuOpen=!1)}))}},this.resizeHandlerEntries=e=>{e.forEach(this.resizeHandler)},this.resizeHandler=e=>{const{width:t,height:o}=e.contentRect;this.resize({width:t,height:o})},this.resize=S((({width:e,height:o})=>{const{el:i,expanded:a,expandDisabled:n,layout:s,overflowActionsDisabled:l}=this;if(l||"vertical"===s&&!o||"horizontal"===s&&!e)return;const c=queryActions(i),r=n?c.length:c.length+1,d=Array.from(i.querySelectorAll("calcite-action-group"));this.setGroupLayout(d);const h=this.hasActionsEnd||this.hasBottomActions||!n?d.length+1:d.length,{actionHeight:p,actionWidth:u}=(e=>{const t=e.filter((e=>e.slot!==E.menuActions)),o=null==t?void 0:t.length;return{actionWidth:o?getAverage(t.map((e=>e.clientWidth||0))):0,actionHeight:o?getAverage(t.map((e=>e.clientHeight||0))):0}})(c);(({actionGroups:e,expanded:o,overflowCount:i})=>{let a=i;e.reverse().forEach((e=>{let i=0;const n=queryActions(e).reverse();n.forEach((e=>{e.slot===E.menuActions&&(e.removeAttribute("slot"),e.textEnabled=o)})),a>0&&n.some((e=>(n.filter((e=>!e.slot)).length>1&&n.length>2&&!e.closest("calcite-action-menu")&&(e.textEnabled=!0,e.setAttribute("slot",E.menuActions),i++,i>1&&a--),a<1))),t(e)}))})({actionGroups:d,expanded:a,overflowCount:getOverflowCount({layout:s,actionCount:r,actionHeight:p,actionWidth:u,height:o,width:e,groupCount:h})})}),150),this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionBarToggle.emit()},this.setExpandToggleRef=e=>{this.expandToggleEl=e},this.handleDefaultSlotChange=e=>{const t=r(e).filter((e=>e.matches("calcite-action-group")));this.setGroupLayout(t)},this.handleActionsEndSlotChange=e=>{this.hasActionsEnd=d(e)},this.handleBottomActionsSlotChange=e=>{this.hasBottomActions=d(e)},this.handleTooltipSlotChange=e=>{const t=r(e).filter((e=>null==e?void 0:e.matches("calcite-tooltip")));this.expandTooltip=t[0]},this.actionsEndGroupLabel=void 0,this.expandDisabled=!1,this.expanded=!1,this.layout="vertical",this.overflowActionsDisabled=!1,this.overlayPositioning="absolute",this.position=void 0,this.scale=void 0,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale=void 0,this.hasActionsEnd=!1,this.hasBottomActions=!1,this.expandTooltip=void 0,this.defaultMessages=void 0}expandHandler(){this.overflowActions()}expandedHandler(){const{el:e,expanded:t}=this;toggleChildActionText({el:e,expanded:t}),this.overflowActions()}layoutHandler(){this.updateGroups()}overflowDisabledHandler(e){var t,o;e?null==(t=this.resizeObserver)||t.disconnect():(null==(o=this.resizeObserver)||o.observe(this.el),this.overflowActions())}onMessagesChange(){}effectiveLocaleChange(){m(this,this.effectiveLocale)}componentDidLoad(){const{el:e,expanded:t}=this;p(this),toggleChildActionText({el:e,expanded:t}),this.overflowActions()}connectedCallback(){var e,t;const{el:o,expanded:i}=this;f(this),b(this),toggleChildActionText({el:o,expanded:i}),null==(e=this.mutationObserver)||e.observe(o,{childList:!0,subtree:!0}),this.overflowActionsDisabled||null==(t=this.resizeObserver)||t.observe(o),this.overflowActions(),s(this)}async componentWillLoad(){u(this),await x(this)}disconnectedCallback(){var e,t;null==(e=this.mutationObserver)||e.disconnect(),null==(t=this.resizeObserver)||t.disconnect(),l(this),v(this),y(this)}async overflowActions(){this.resize({width:this.el.clientWidth,height:this.el.clientHeight})}async setFocus(){await g(this),h(this.el)}updateGroups(){this.setGroupLayout(Array.from(this.el.querySelectorAll("calcite-action-group")))}setGroupLayout(e){e.forEach((e=>e.layout=this.layout))}renderBottomActionGroup(){const{expanded:t,expandDisabled:o,el:i,position:a,toggleExpand:n,scale:s,layout:l,messages:c,actionsEndGroupLabel:r,overlayPositioning:d}=this,h=o?null:e(ExpandToggle,{collapseLabel:c.collapseLabel,collapseText:c.collapse,el:i,expandLabel:c.expandLabel,expandText:c.expand,expanded:t,position:a,ref:this.setExpandToggleRef,scale:s,toggle:n,tooltip:this.expandTooltip});return e("calcite-action-group",{class:O,hidden:this.expandDisabled&&!(this.hasActionsEnd||this.hasBottomActions),label:r,layout:l,overlayPositioning:d,scale:s},e("slot",{name:B,onSlotchange:this.handleActionsEndSlotChange}),e("slot",{name:G,onSlotchange:this.handleBottomActionsSlotChange}),e("slot",{name:M,onSlotchange:this.handleTooltipSlotChange}),h)}render(){return e(n,{key:"9e51fdce0eb5bab08780d3892afde985b339dc06",onCalciteActionMenuOpen:this.actionMenuOpenHandler},e("slot",{key:"cb68a40bd689cf49d7e15771da8c82eb959a0976",onSlotchange:this.handleDefaultSlotChange}),this.renderBottomActionGroup())}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expandDisabled:["expandHandler"],expanded:["expandedHandler"],layout:["layoutHandler"],overflowActionsDisabled:["overflowDisabledHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{pointer-events:auto;display:inline-flex;align-self:stretch;--calcite-action-bar-expanded-max-width:auto}:host([layout=vertical]){flex-direction:column}:host([layout=vertical]) .action-group--end{margin-block-start:auto}:host([layout=horizontal]){flex-direction:row}:host([layout=horizontal]) .action-group--end{margin-inline-start:auto}:host([layout=vertical][overflow-actions-disabled]){overflow-y:auto}:host([layout=horizontal][overflow-actions-disabled]){overflow-x:auto}:host([layout=vertical][expanded]){max-inline-size:var(--calcite-action-bar-expanded-max-width)}::slotted(calcite-action-group){border-block-end:1px solid var(--calcite-color-border-3)}:host([layout=horizontal]) ::slotted(calcite-action-group){border-block-end:0;border-inline-end:1px solid var(--calcite-color-border-3)}:host([layout=horizontal][expand-disabled]) ::slotted(calcite-action-group:last-of-type){border-inline-end:0}::slotted(calcite-action-group:last-child){border-block-end:0;border-inline-end:0}.action-group--end{justify-content:flex-end}:host([hidden]){display:none}[hidden]{display:none}"}},[1,"calcite-action-bar",{actionsEndGroupLabel:[1,"actions-end-group-label"],expandDisabled:[516,"expand-disabled"],expanded:[1540],layout:[513],overflowActionsDisabled:[516,"overflow-actions-disabled"],overlayPositioning:[513,"overlay-positioning"],position:[513],scale:[513],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],hasActionsEnd:[32],hasBottomActions:[32],expandTooltip:[32],defaultMessages:[32],overflowActions:[64],setFocus:[64]},void 0,{expandDisabled:["expandHandler"],expanded:["expandedHandler"],layout:["layoutHandler"],overflowActionsDisabled:["overflowDisabledHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function defineCustomElement$1(){if("undefined"==typeof customElements)return;["calcite-action-bar","calcite-action","calcite-action-group","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach((e=>{switch(e){case"calcite-action-bar":customElements.get(e)||customElements.define(e,W);break;case"calcite-action":customElements.get(e)||L();break;case"calcite-action-group":customElements.get(e)||w();break;case"calcite-action-menu":customElements.get(e)||z();break;case"calcite-icon":customElements.get(e)||T();break;case"calcite-loader":customElements.get(e)||D();break;case"calcite-popover":customElements.get(e)||H()}}))}defineCustomElement$1();const P=W,q=defineCustomElement$1;export{P as CalciteActionBar,q as defineCustomElement};
