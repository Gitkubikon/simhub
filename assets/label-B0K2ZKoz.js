import{i as e,q as t,c as n}from"./dom-CG95YN3b.js";import{c as l}from"./component-BaDXbCam.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const o="calciteInternalLabelClick",a="calciteInternalLabelConnected",s="calciteInternalLabelDisconnected",c="calcite-label",i=new WeakMap,r=new WeakMap,d=new WeakMap,b=new WeakMap,u=new Set,findLabelForComponent=e=>{const{id:l}=e,o=l&&t(e,{selector:`${c}[for="${l}"]`});if(o)return o;const a=n(e,c);return!a||function hasAncestorCustomElements(e,t){let n;const l="custom-element-ancestor-check",listener=l=>{l.stopImmediatePropagation();const o=l.composedPath();n=o.slice(o.indexOf(t),o.indexOf(e))};e.addEventListener(l,listener,{once:!0}),t.dispatchEvent(new CustomEvent(l,{composed:!0,bubbles:!0})),e.removeEventListener(l,listener);const o=n.filter((n=>n!==t&&n!==e)).filter((e=>{var t;return null==(t=e.tagName)?void 0:t.includes("-")}));return o.length>0}(a,e)?null:a};function connectLabel(e){if(!e)return;const t=findLabelForComponent(e.el);if(r.has(t)&&t===e.labelEl||!t&&u.has(e))return;const n=onLabelDisconnected.bind(e);if(t){e.labelEl=t;const l=i.get(t)||[];l.push(e),i.set(t,l.sort(sortByDOMOrder)),r.has(e.labelEl)||(r.set(e.labelEl,onLabelClick),e.labelEl.addEventListener(o,onLabelClick)),u.delete(e),document.removeEventListener(a,d.get(e)),b.set(e,n),document.addEventListener(s,n)}else u.has(e)||(n(),document.removeEventListener(s,b.get(e)))}function disconnectLabel(e){if(!e)return;if(u.delete(e),document.removeEventListener(a,d.get(e)),document.removeEventListener(s,b.get(e)),d.delete(e),b.delete(e),!e.labelEl)return;const t=i.get(e.labelEl);1===t.length&&(e.labelEl.removeEventListener(o,r.get(e.labelEl)),r.delete(e.labelEl)),i.set(e.labelEl,t.filter((t=>t!==e)).sort(sortByDOMOrder)),e.labelEl=null}function sortByDOMOrder(t,n){return e(t.el,n.el)?-1:1}function getLabelText(e){var t,n;return e.label||(null==(n=null==(t=e.labelEl)?void 0:t.textContent)?void 0:n.trim())||""}function onLabelClick(e){const t=e.detail.sourceEvent.target,n=i.get(this),l=n.find((e=>e.el===t));if(n.includes(l))return;const o=n[0];o.disabled||o.onLabelClick(e)}function onLabelConnected(){u.has(this)&&connectLabel(this)}function onLabelDisconnected(){u.add(this);const e=d.get(this)||onLabelConnected.bind(this);d.set(this,e),document.addEventListener(a,e)}async function associateExplicitLabelToUnlabeledComponent(e){var t;await l(e);if(i.has(e))return;const n=null==(t=e.ownerDocument)?void 0:t.getElementById(e.for);n&&requestAnimationFrame((()=>{for(const e of u)if(e.el===n){connectLabel(e);break}}))}export{associateExplicitLabelToUnlabeledComponent as a,s as b,connectLabel as c,disconnectLabel as d,getLabelText as g,a as l};
