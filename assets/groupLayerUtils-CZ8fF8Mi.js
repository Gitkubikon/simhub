import{$ as e,j as r}from"./utils-CNFe6p3t.js";import{h4 as t,ey as a,eP as s,eJ as o,eL as n,eN as i}from"./index-DSIPxOWi.js";const c="Group Layer",u=n.GROUP_LAYER_MAP;function m(e){return{isValid:"group"===e.type,errorMessage:"Layer.type should be 'group'"}}function y(e){return{isValid:a(e,u),errorMessage:`Layer.portalItem.typeKeywords should have '${u}'`}}function f(e,r){return{...s(e,"web-map",!0),initiator:r}}function v(e){const r=e.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}async function d(e,r){r.title||(r.title=e.title),o(r,n.METADATA),i(r,u)}async function I(r,a){return e({layer:r,itemType:c,validateLayer:m,validateItem:y,createJSONContext:e=>f(e,r),createItemData:v,errorNamePrefix:"group-layer-save",saveResources:async(e,a)=>(r.sourceIsPortalItem||await e.removeAllResources().catch((()=>{})),t(r.resourceReferences,a))},a)}async function g(e,a,s){return r({layer:e,itemType:c,validateLayer:m,createJSONContext:r=>f(r,e),createItemData:v,errorNamePrefix:"group-layer-save-as",newItem:a,setItemProperties:d,saveResources:(r,a)=>t(e.resourceReferences,a)},s)}export{I as save,g as saveAs};
