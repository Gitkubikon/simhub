const __vite__fileDeps=["assets/libtess-asm-BKGkDV_2.js","assets/index-DSIPxOWi.js","assets/index-B_7YxLDX.css","assets/libtess-BSvv1pG0.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{m as t,_ as e,fS as l,il as d,im as u,io as v}from"./index-DSIPxOWi.js";let w=null,f=null;async function i(){return w||(w=async function r$1(){const d=t("esri-csp-restrictions")?await e((()=>import("./libtess-asm-BKGkDV_2.js")),__vite__mapDeps([0,1,2])).then((t=>t.l)):await e((()=>import("./libtess-BSvv1pG0.js")),__vite__mapDeps([3,1,2])).then((t=>t.l));f=await d.default({locateFile:t=>l(`esri/core/libs/libtess/${t}`)})}()),w}function a$1(t,e){const l=Math.max(t.length,128e3);return f.triangulate(t,e,l)}function x(t,e){return t.x===e.x&&t.y===e.y}function n(t,e){return t.x=e.y,t.y=-e.x,t}function s(t,e){return t.x=-e.y,t.y=e.x,t}function y(t,e){return t.x=e.x,t.y=e.y,t}function o(t,e){return t.x=-e.x,t.y=-e.y,t}function h(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function _(t,e){return t.x*e.x+t.y*e.y}function a(t,e,l,d){return t.x=e.x*l+e.y*d,t.y=e.x*d-e.y*l,t}class c{constructor(t,e,l){this._writeVertex=t,this._writeTriangle=e,this._canUseThinTessellation=l,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(t,e,l=this._canUseThinTessellation){(function r(t){if(!t)return;const e=t.length;if(e<=1)return;let l=0;for(let d=1;d<e;d++)x(t[d],t[l])||++l===d||(t[l]=t[d]);t.length=l+1})(t),l&&e.halfWidth<d&&!e.offset?this._tessellateThin(t,e):this._tessellate(t,e)}_tessellateThin(t,e){if(t.length<2)return;const l=e.wrapDistance||65535;let d=e.initialDistance||0,u=!1,v=t[0].x,w=t[0].y;const f=t.length;for(let T=1;T<f;++T){u&&(u=!1,d=0);let e=t[T].x,f=t[T].y,g=e-v,m=f-w,V=Math.sqrt(g*g+m*m);if(g/=V,m/=V,d+V>l){u=!0;const t=(l-d)/V;V=l-d,e=(1-t)*v+t*e,f=(1-t)*w+t*f,--T}const E=this._writeVertex(v,w,0,0,g,m,m,-g,0,-1,d),N=this._writeVertex(v,w,0,0,g,m,-m,g,0,1,d);d+=V;const b=this._writeVertex(e,f,0,0,g,m,m,-g,0,-1,d),R=this._writeVertex(e,f,0,0,g,m,-m,g,0,1,d);this._writeTriangle(E,N,b),this._writeTriangle(N,b,R),v=e,w=f}}_tessellate(t,e){const l=t[0],d=t[t.length-1],w=x(l,d),f=w?3:2;if(t.length<f)return;const T=e.pixelCoordRatio,g=null!=e.capType?e.capType:u.BUTT,m=null!=e.joinType?e.joinType:v.MITER,V=null!=e.miterLimit?Math.min(e.miterLimit,4):2,E=null!=e.roundLimit?Math.min(e.roundLimit,1.05):1.05,N=null!=e.halfWidth?e.halfWidth:2,b=!!e.textured;let R,p,M,U=null;const k=this._prevNormal,L=this._nextNormal;let B=-1,D=-1;const S=this._joinNormal;let A,O;const j=this._textureNormalLeft,I=this._textureNormalRight,P=this._textureNormal;let $=-1,W=-1;const q=e.wrapDistance||65535;let Q=e.initialDistance||0;const X=this._writeVertex,F=this._writeTriangle,C=(t,e,l,d,u,v)=>{const w=X(p,M,A,O,l,d,t,e,u,v,Q);return $>=0&&W>=0&&w>=0&&F($,W,w),$=W,W=w,w};w&&(R=t[t.length-2],L.x=d.x-R.x,L.y=d.y-R.y,D=h(L),L.x/=D,L.y/=D);let z=!1;for(let J=0;J<t.length;++J){if(z&&(z=!1,Q=0),R&&(k.x=-L.x,k.y=-L.y,B=D,Q+B>q&&(z=!0)),z){const e=(q-Q)/B;B=q-Q,R={x:(1-e)*R.x+e*t[J].x,y:(1-e)*R.y+e*t[J].y},--J}else R=t[J];p=R.x,M=R.y;const e=J<=0&&!z,l=J===t.length-1;if(e||(Q+=B),U=l?w?t[1]:null:t[J+1],U?(L.x=U.x-p,L.y=U.y-M,D=h(L),L.x/=D,L.y/=D):(L.x=void 0,L.y=void 0),!w){if(e){s(S,L),A=S.x,O=S.y,g===u.SQUARE&&(C(-L.y-L.x,L.x-L.y,L.x,L.y,0,-1),C(L.y-L.x,-L.x-L.y,L.x,L.y,0,1)),g===u.ROUND&&(C(-L.y-L.x,L.x-L.y,L.x,L.y,-1,-1),C(L.y-L.x,-L.x-L.y,L.x,L.y,-1,1)),g!==u.ROUND&&g!==u.BUTT||(C(-L.y,L.x,L.x,L.y,0,-1),C(L.y,-L.x,L.x,L.y,0,1));continue}if(l){n(S,k),A=S.x,O=S.y,g!==u.ROUND&&g!==u.BUTT||(C(k.y,-k.x,-k.x,-k.y,0,-1),C(-k.y,k.x,-k.x,-k.y,0,1)),g===u.SQUARE&&(C(k.y-k.x,-k.x-k.y,-k.x,-k.y,0,-1),C(-k.y-k.x,k.x-k.y,-k.x,-k.y,0,1)),g===u.ROUND&&(C(k.y-k.x,-k.x-k.y,-k.x,-k.y,1,-1),C(-k.y-k.x,k.x-k.y,-k.x,-k.y,1,1));continue}}let d,f,X=(H=L,-((G=k).x*H.y-G.y*H.x));if(Math.abs(X)<.01)_(k,L)>0?(S.x=k.x,S.y=k.y,X=1,d=Number.MAX_VALUE,f=!0):(s(S,L),X=1,d=1,f=!1);else{S.x=(k.x+L.x)/X,S.y=(k.y+L.y)/X,d=h(S);const t=(d-1)*N*T;f=d>4||t>B&&t>D}A=S.x,O=S.y;let F=m;switch(m){case v.BEVEL:d<1.05&&(F=v.MITER);break;case v.ROUND:d<E&&(F=v.MITER);break;case v.MITER:d>V&&(F=v.BEVEL)}switch(F){case v.MITER:if(C(S.x,S.y,-k.x,-k.y,0,-1),C(-S.x,-S.y,-k.x,-k.y,0,1),l)break;if(b){const t=z?0:Q;$=this._writeVertex(p,M,A,O,L.x,L.y,S.x,S.y,0,-1,t),W=this._writeVertex(p,M,A,O,L.x,L.y,-S.x,-S.y,0,1,t)}break;case v.BEVEL:{const t=X<0;let e,d,u,v;if(t){const t=$;$=W,W=t,e=j,d=I}else e=I,d=j;if(f)u=t?s(this._innerPrev,k):n(this._innerPrev,k),v=t?n(this._innerNext,L):s(this._innerNext,L);else{const e=t?o(this._inner,S):y(this._inner,S);u=e,v=e}const w=t?n(this._bevelStart,k):s(this._bevelStart,k);C(u.x,u.y,-k.x,-k.y,e.x,e.y);const T=C(w.x,w.y,-k.x,-k.y,d.x,d.y);if(l)break;const g=t?s(this._bevelEnd,L):n(this._bevelEnd,L);if(f){const t=this._writeVertex(p,M,A,O,-k.x,-k.y,0,0,0,0,Q);$=this._writeVertex(p,M,A,O,L.x,L.y,v.x,v.y,e.x,e.y,Q),W=this._writeVertex(p,M,A,O,L.x,L.y,g.x,g.y,d.x,d.y,Q),this._writeTriangle(T,t,W)}else{if(b){const t=this._bevelMiddle;t.x=(w.x+g.x)/2,t.y=(w.y+g.y)/2,a(P,t,-k.x,-k.y),C(t.x,t.y,-k.x,-k.y,P.x,P.y),a(P,t,L.x,L.y),$=this._writeVertex(p,M,A,O,L.x,L.y,t.x,t.y,P.x,P.y,Q),W=this._writeVertex(p,M,A,O,L.x,L.y,v.x,v.y,e.x,e.y,Q)}else{const t=$;$=W,W=t}C(g.x,g.y,L.x,L.y,d.x,d.y)}if(t){const t=$;$=W,W=t}break}case v.ROUND:{const t=X<0;let e,u;if(t){const t=$;$=W,W=t,e=j,u=I}else e=I,u=j;const v=t?o(this._inner,S):y(this._inner,S);let w,T;f?(w=t?s(this._innerPrev,k):n(this._innerPrev,k),T=t?n(this._innerNext,L):s(this._innerNext,L)):(w=v,T=v);const g=t?n(this._roundStart,k):s(this._roundStart,k),m=t?s(this._roundEnd,L):n(this._roundEnd,L),V=C(w.x,w.y,-k.x,-k.y,e.x,e.y),E=C(g.x,g.y,-k.x,-k.y,u.x,u.y);if(l)break;const N=this._writeVertex(p,M,A,O,-k.x,-k.y,0,0,0,0,Q);f||this._writeTriangle($,W,N);const R=o(this._outer,v),U=this._writeVertex(p,M,A,O,L.x,L.y,m.x,m.y,u.x,u.y,Q);let B,D;const q=d>2;if(q){let e;d!==Number.MAX_VALUE?(R.x/=d,R.y/=d,e=_(k,R),e=(d*(e*e-1)+1)/e):e=-1,B=t?n(this._startBreak,k):s(this._startBreak,k),B.x+=k.x*e,B.y+=k.y*e,D=t?s(this._endBreak,L):n(this._endBreak,L),D.x+=L.x*e,D.y+=L.y*e}a(P,R,-k.x,-k.y);const F=this._writeVertex(p,M,A,O,-k.x,-k.y,R.x,R.y,P.x,P.y,Q);a(P,R,L.x,L.y);const z=b?this._writeVertex(p,M,A,O,L.x,L.y,R.x,R.y,P.x,P.y,Q):F,G=N,H=b?this._writeVertex(p,M,A,O,L.x,L.y,0,0,0,0,Q):N;let J=-1,K=-1;if(q&&(a(P,B,-k.x,-k.y),J=this._writeVertex(p,M,A,O,-k.x,-k.y,B.x,B.y,P.x,P.y,Q),a(P,D,L.x,L.y),K=this._writeVertex(p,M,A,O,L.x,L.y,D.x,D.y,P.x,P.y,Q)),b?q?(this._writeTriangle(G,E,J),this._writeTriangle(G,J,F),this._writeTriangle(H,z,K),this._writeTriangle(H,K,U)):(this._writeTriangle(G,E,F),this._writeTriangle(H,z,U)):q?(this._writeTriangle(N,E,J),this._writeTriangle(N,J,K),this._writeTriangle(N,K,U)):(this._writeTriangle(N,E,F),this._writeTriangle(N,z,U)),f?($=this._writeVertex(p,M,A,O,L.x,L.y,T.x,T.y,e.x,e.y,Q),W=U):($=b?this._writeVertex(p,M,A,O,L.x,L.y,T.x,T.y,e.x,e.y,Q):V,this._writeTriangle($,H,U),W=U),t){const t=$;$=W,W=t}break}}}var G,H}}export{a$1 as a,c,i};
