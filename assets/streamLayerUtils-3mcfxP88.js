import{$ as e,j as t}from"./utils-CNFe6p3t.js";import{eI as r,eJ as a,eL as s,eN as n}from"./index-DSIPxOWi.js";const l="Stream Service";function u(e){return{isValid:"stream"===e.type&&!!e.url&&!e.webSocketUrl,errorMessage:"Stream layer should be created using a url to a stream service"}}function c(e){const t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}async function y(e,t){const{parsedUrl:l,title:i,fullExtent:o}=e;t.url=l.path,t.title||(t.title=i),t.extent=null,null!=o&&(t.extent=await r(o)),a(t,s.METADATA),n(t,s.SINGLE_LAYER)}async function p(t,r){return e({layer:t,itemType:l,additionalItemType:"Feed",validateLayer:u,createItemData:c,errorNamePrefix:"stream-layer-save"},r)}async function f(e,r,a){return t({layer:e,itemType:l,validateLayer:u,createItemData:c,errorNamePrefix:"stream-layer-save-as",newItem:r,setItemProperties:y},a)}export{p as save,f as saveAs};
