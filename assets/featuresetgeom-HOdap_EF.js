import{a0 as n,a as e,m as t,B as r,b as s,r as a}from"./arcadeUtils-CHsZDnQG.js";import{s as i}from"./TimeOnly-C5lZbbIX.js";import{u,f as o}from"./SpatialFilter-DZhILkSk.js";import{g_ as l}from"./index-DSIPxOWi.js";import{relate as c,crosses as f,touches as p,within as m,overlaps as d,contains as w,intersects as y}from"./geometryEngineAsync--5NbEF1a.js";import"./ImmutableArray-BLzlMo4D.js";import"./number-DXNV0RYc.js";import"./hash-BjBdcEEU.js";import"./WhereClause-DYd7Xwn9.js";function h(n){return n instanceof l}function S(e,t,c,v){return v(e,t,(async(v,F,A)=>{if(A.length<2)throw new s(e,a.WrongNumberOfParameters,t);if(null===(A=n(A))[0]&&null===A[1])return!1;if(r(A[0])){if(A[1]instanceof l)return new o({parentfeatureset:A[0],relation:c,relationGeom:A[1]});if(null===A[1])return new u({parentfeatureset:A[0]});throw new s(e,a.InvalidParameter,t)}if(h(A[0])){if(h(A[1])){switch(c){case"esriSpatialRelEnvelopeIntersects":return y(i(A[0]),i(A[1]));case"esriSpatialRelIntersects":return y(A[0],A[1]);case"esriSpatialRelContains":return w(A[0],A[1]);case"esriSpatialRelOverlaps":return d(A[0],A[1]);case"esriSpatialRelWithin":return m(A[0],A[1]);case"esriSpatialRelTouches":return p(A[0],A[1]);case"esriSpatialRelCrosses":return f(A[0],A[1])}throw new s(e,a.InvalidParameter,t)}if(r(A[1]))return new o({parentfeatureset:A[1],relation:c,relationGeom:A[0]});if(null===A[1])return!1;throw new s(e,a.InvalidParameter,t)}if(null===A[0]){if(r(A[1]))return new u({parentfeatureset:A[1]});if(A[1]instanceof l||null===A[1])return!1}throw new s(e,a.InvalidParameter,t)}))}function R(i){"async"===i.mode&&(i.functions.intersects=function(n,e){return S(n,e,"esriSpatialRelIntersects",i.standardFunctionAsync)},i.functions.envelopeintersects=function(n,e){return S(n,e,"esriSpatialRelEnvelopeIntersects",i.standardFunctionAsync)},i.signatures.push({name:"envelopeintersects",min:2,max:2}),i.functions.contains=function(n,e){return S(n,e,"esriSpatialRelContains",i.standardFunctionAsync)},i.functions.overlaps=function(n,e){return S(n,e,"esriSpatialRelOverlaps",i.standardFunctionAsync)},i.functions.within=function(n,e){return S(n,e,"esriSpatialRelWithin",i.standardFunctionAsync)},i.functions.touches=function(n,e){return S(n,e,"esriSpatialRelTouches",i.standardFunctionAsync)},i.functions.crosses=function(n,e){return S(n,e,"esriSpatialRelCrosses",i.standardFunctionAsync)},i.functions.relate=function(o,f){return i.standardFunctionAsync(o,f,(async(i,p,m)=>{if(m=n(m),e(m,3,3,o,f),h(m[0])&&h(m[1]))return c(m[0],m[1],t(m[2]));if(m[0]instanceof l&&null===m[1])return!1;if(m[1]instanceof l&&null===m[0])return!1;if(r(m[0])&&null===m[1])return new u({parentfeatureset:m[0]});if(r(m[1])&&null===m[0])return new u({parentfeatureset:m[1]});if(r(m[0])&&m[1]instanceof l)return m[0].relate(m[1],t(m[2]));if(r(m[1])&&m[0]instanceof l)return m[1].relate(m[0],t(m[2]));if(null===m[0]&&null===m[1])return!1;throw new s(o,a.InvalidParameter,f)}))})}export{R as registerFunctions};
