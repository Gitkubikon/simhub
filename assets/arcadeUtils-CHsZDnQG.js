const __vite__fileDeps=["assets/geometryEngine-Bp1TD6MM.js","assets/geometryEngineBase-9EI9fooq.js","assets/index-DSIPxOWi.js","assets/index-B_7YxLDX.css","assets/hydrated-DE1HcVsK.js","assets/geomasync-CEAkjwG1.js","assets/TimeOnly-C5lZbbIX.js","assets/portalUtils-CJNVYHNM.js","assets/geometryEngineAsync--5NbEF1a.js","assets/ImmutableArray-BLzlMo4D.js","assets/number-DXNV0RYc.js","assets/hash-BjBdcEEU.js","assets/arcadeAsyncRuntime-4_H3vixK.js","assets/featureSetUtils-CIPr2I89.js","assets/WhereClause-DYd7Xwn9.js","assets/SpatialFilter-DZhILkSk.js","assets/infoFor3D-BTCPmnmy.js","assets/executeQueryJSON-DDi8KdIf.js","assets/query-C2USZ63O.js","assets/normalizeUtils-BrH-PrZy.js","assets/normalizeUtilsCommon-BU8xfl77.js","assets/pbfQueryUtils-DUjEbwA9.js","assets/pbf-B53Txr8m.js","assets/executeQueryPBF-71YCUWAF.js","assets/AttachmentInfo-u2TyaLjZ.js","assets/executeForIds-vkxYbvNq.js","assets/featuresetbase-BYi56tYb.js","assets/featuresetgeom-HOdap_EF.js","assets/featuresetstats-D6Hyqz6R.js","assets/featuresetstring-DOoQDc5J.js","assets/knowledgegraph-CHU729kD.js","assets/GraphQueryStreaming-DGarY5EH.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{aA as u,g$ as o,aw as g,fP as C,l8 as S,az as M,j,ax as xe,ay as Oe,g_ as Ue,f2 as Je,gM as We,tn as Xe,jQ as Qe,I as et,g5 as tt,fe as nt,fj as rt,ge as it,to as at,d9 as st,hX as ut,bE as ot,ez as lt,tp as ct,_ as dt,bZ as ft,m as ht,bn as mt}from"./index-DSIPxOWi.js";import{m as pt,a as $t,n as gt,h as Dt,c as yt,r as wt,b as xt}from"./TimeOnly-C5lZbbIX.js";import{t as Ft}from"./ImmutableArray-BLzlMo4D.js";import{s as Ct,p as At}from"./number-DXNV0RYc.js";import{i as bt}from"./hash-BjBdcEEU.js";let vt=class s{constructor(u){this.source=u}},Et=class s2{constructor(u,o){this._moduleSingletons=u,this._syntaxModules=o}loadLibrary(u){if(null==this._syntaxModules)return null;const o=this._syntaxModules[u.toLowerCase()];return o?{syntax:o.script,uri:o.uri}:null}};var St,It;(It=St||(St={})).AsyncNotEnabled="AsyncNotEnabled",It.ModulesNotSupported="ModulesNotSupported",It.CircularModules="CircularModules",It.CannotCompareDateAndTime="CannotCompareDateAndTime",It.NeverReach="NeverReach",It.UnsupportedHashType="UnsupportedHashType",It.InvalidParameter="InvalidParameter",It.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",It.UnexpectedToken="UnexpectedToken",It.Unrecognized="Unrecognized",It.UnrecognizedType="UnrecognizedType",It.MaximumCallDepth="MaximumCallDepth",It.BooleanConditionRequired="BooleanConditionRequired",It.TypeNotAllowedInFeature="TypeNotAllowedInFeature",It.KeyMustBeString="KeyMustBeString",It.WrongNumberOfParameters="WrongNumberOfParameters",It.CallNonFunction="CallNonFunction",It.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",It.NoFunctionInDictionary="NoFunctionInDictionary",It.NoFunctionInArray="NoFunctionInArray",It.AssignModuleFunction="AssignModuleFunction",It.LogicExpressionOrAnd="LogicExpressionOrAnd",It.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",It.FunctionNotFound="FunctionNotFound",It.InvalidMemberAccessKey="InvalidMemberAccessKey",It.UnsupportedUnaryOperator="UnsupportUnaryOperator",It.InvalidIdentifier="InvalidIdentifier",It.MemberOfNull="MemberOfNull",It.UnsupportedOperator="UnsupportedOperator",It.Cancelled="Cancelled",It.ModuleAccessorMustBeString="ModuleAccessorMustBeString",It.ModuleExportNotFound="ModuleExportNotFound",It.Immutable="Immutable",It.OutOfBounds="OutOfBounds",It.IllegalResult="IllegalResult",It.FieldNotFound="FieldNotFound",It.PortalRequired="PortalRequired",It.LogicError="LogicError",It.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",It.KeyAccessorMustBeString="KeyAccessorMustBeString",It.WrongSpatialReference="WrongSpatialReference",It.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",It.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly";const kt={[St.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[St.LogicError]:"Logic error - {reason}",[St.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[St.NeverReach]:"Encountered unreachable logic",[St.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[St.ModuleAccessorMustBeString]:"Module accessor must be a string",[St.ModuleExportNotFound]:"Module has no export with provided identifier",[St.ModulesNotSupported]:"Current profile does not support modules",[St.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[St.FunctionNotFound]:"Function not found",[St.FieldNotFound]:"Key not found - {key}",[St.CircularModules]:"Circular module dependencies are not allowed",[St.Cancelled]:"Execution cancelled",[St.UnsupportedHashType]:"Type not supported in hash function",[St.IllegalResult]:"Value is not a supported return type",[St.PortalRequired]:"Portal is required",[St.InvalidParameter]:"Invalid parameter",[St.WrongNumberOfParameters]:"Call with wrong number of parameters",[St.Unrecognized]:"Unrecognized code structure",[St.UnrecognizedType]:"Unrecognized type",[St.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[St.BooleanConditionRequired]:"Conditions must use booleans",[St.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[St.NoFunctionInArray]:"Arrays cannot contain functions.",[St.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[St.KeyAccessorMustBeString]:"Accessor must be a string",[St.KeyMustBeString]:"Object keys must be a string",[St.Immutable]:"Object is immutable",[St.UnexpectedToken]:"Unexpected token",[St.MemberOfNull]:"Cannot access property of null object",[St.MaximumCallDepth]:"Exceeded maximum function depth",[St.OutOfBounds]:"Out of bounds",[St.InvalidIdentifier]:"Identifier not recognized",[St.CallNonFunction]:"Expression is not a function",[St.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[St.AssignModuleFunction]:"Cannot assign function to module variable",[St.UnsupportedUnaryOperator]:"Unsupported unary operator",[St.UnsupportedOperator]:"Unsupported operator",[St.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[St.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[St.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[St.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[St.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};let _t=class n extends Error{constructor(...u){super(...u)}},Tt=class t extends _t{constructor(u,o){super(s$7(o)+u.message,{cause:u}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,t),(null==o?void 0:o.loc)&&(this.loc=o.loc)}},Mt=class a extends Error{constructor(o,g,C,S){super("Execution error - "+s$7(C)+u(kt[g],S)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,a),(null==C?void 0:C.loc)&&(this.loc=C.loc)}};function s$7(u){var o,g;return u&&u.loc?`Line : ${null==(o=u.loc.start)?void 0:o.line}, ${null==(g=u.loc.start)?void 0:g.column}: `:""}let Bt=class c extends Error{constructor(o,g,C,S){super("Compilation error - "+s$7(C)+u(kt[g],S)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,c),(null==C?void 0:C.loc)&&(this.loc=C.loc)}},Nt=class i extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,i)}};function u$6(u,o,g){return"esri.arcade.arcadeexecutionerror"===g.declaredRootClass||"esri.arcade.arcadecompilationerror"===g.declaredRootClass?null===g.loc&&(null==o?void 0:o.loc)?new Tt(g,{cause:g}):g:("esri.arcade.featureset.support.featureseterror"===g.declaredRootClass||"esri.arcade.featureset.support.sqlerror"===g.declaredRootClass||g.declaredRootClass,(null==o?void 0:o.loc)?new Tt(g,{cause:g}):g)}var Pt;!function(u){u.UnrecognizedUri="UnrecognizedUri",u.UnsupportedUriProtocol="UnsupportedUriProtocol"}(Pt||(Pt={}));const Rt={[Pt.UnrecognizedUri]:"Unrecognized uri - {uri}",[Pt.UnsupportedUriProtocol]:"Unrecognized uri protocol"};let Ot=class p extends Error{constructor(o,g){super(u(Rt[o],g)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,p)}},Lt=class r{constructor(){}};function n$2(u,o,g){if(u instanceof Lt&&!(u instanceof Gt)){const C=new Gt;return C.fn=u,C.parameterEvaluator=g,C.context=o,C}return u}let Ut=class e extends Lt{constructor(u){super(),this.fn=u}createFunction(u){return(...o)=>this.fn(u,{preparsed:!0,arguments:o})}call(u,o){return this.fn(u,o)}marshalledCall(u,g,C,S){return S(u,g,((g,M,j)=>{j=j.map((o=>o instanceof Lt&&!(o instanceof Gt)?n$2(o,u,S):o));const xe=this.call(C,{args:j});return o(xe)?xe.then((u=>n$2(u,C,S))):xe}))}},Gt=class s3 extends Lt{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(u){return this.fn.createFunction(this.context)}call(u,o){return this.fn.marshalledCall(u,o,this.context,this.parameterEvaluator)}marshalledCall(u,o,g){return this.fn.marshalledCall(u,o,this.context,this.parameterEvaluator)}},zt=class i2 extends Ft{constructor(u,o,g,C,S,M){super(u),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=o,this._hasZ=g,this._hasM=C,this._cacheId=S,this._partId=M}get(u){if(void 0===this._lazyPt[u]){const o=this._elements[u];if(void 0===o)return;const C=this._hasZ,S=this._hasM;let M;M=C&&!S?new g(o[0],o[1],o[2],void 0,this._spRef):S&&!C?new g(o[0],o[1],void 0,o[2],this._spRef):C&&S?new g(o[0],o[1],o[2],o[3],this._spRef):new g(o[0],o[1],this._spRef),M.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+u.toString(),this._lazyPt[u]=M}return this._lazyPt[u]}equalityTest(u){return u===this||null!==u&&u instanceof i2!=0&&u.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}},Zt=class h extends Ft{constructor(u,o,g,C,S){super(u),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=g,this._hasM=C,this._spRef=o,this._cacheId=S}get(u){if(void 0===this._lazyPath[u]){const o=this._elements[u];if(void 0===o)return;this._lazyPath[u]=new zt(o,this._spRef,this._hasZ,this._hasM,this._cacheId,u)}return this._lazyPath[u]}equalityTest(u){return u===this||null!==u&&u instanceof h!=0&&u.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}};var Jt,Ht;function y$5(u){return C.fromJSON(u.toJSON())}function u$5(u){return u.toJSON?u.toJSON():u}function p$9(u){return"string"==typeof u||u instanceof String}function c$4(u){return"number"==typeof u}function f$5(u){return u instanceof Date}function d$7(u){return u instanceof S}function T$6(u){return u instanceof pt}function g$5(u){return u instanceof $t}function F$5(u){return u instanceof gt}function G$4(u,o){return u===o||!(!f$5(u)&&!T$6(u)||!f$5(o)&&!T$6(o))&&u.getTime()===o.getTime()}function O$5(u){if(null==u)return null;if("number"==typeof u)return u;switch(u.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109439;case"kilometers":case"kilometer":case"km":return 109414}return null}function b$2(u){if(null==u)return null;switch(u.type){case"polygon":case"multipoint":case"polyline":return u.extent;case"point":return new M({xmin:u.x,ymin:u.y,xmax:u.x,ymax:u.y,spatialReference:u.spatialReference});case"extent":return u}return null}function v$6(u){if(null==u)return null;if("number"==typeof u)return u;if("number"==typeof u)return u;switch(u.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9093;case"kilometers":case"kilometer":case"km":return 9036}return null}!function(u){u[u.Standardised=0]="Standardised",u[u.StandardisedNoInterval=1]="StandardisedNoInterval",u[u.SqlServer=2]="SqlServer",u[u.Oracle=3]="Oracle",u[u.Postgres=4]="Postgres",u[u.PGDB=5]="PGDB",u[u.FILEGDB=6]="FILEGDB",u[u.NotEvaluated=7]="NotEvaluated"}(Jt||(Jt={})),function(u){u[u.InFeatureSet=0]="InFeatureSet",u[u.NotInFeatureSet=1]="NotInFeatureSet",u[u.Unknown=2]="Unknown"}(Ht||(Ht={}));const jt=1e3,Vt={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},qt={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},Kt={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function k$5(u){return void 0===u?"":u=(u=(u=u.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function J$8(u,o){o||(o={}),"function"==typeof o&&(o={cmp:o});const g="boolean"==typeof o.cycles&&o.cycles,C=o.cmp&&(S=o.cmp,function(u){return function(o,g){const C={key:o,value:u[o]},M={key:g,value:u[g]};return S(C,M)}});var S;const M=[];return function e5(u){if((null==u?void 0:u.toJSON)&&"function"==typeof u.toJSON&&(u=u.toJSON()),void 0===u)return;if("number"==typeof u)return isFinite(u)?""+u:"null";if("object"!=typeof u)return JSON.stringify(u);let o,S;if(Array.isArray(u)){for(S="[",o=0;o<u.length;o++)o&&(S+=","),S+=e5(u[o])||"null";return S+"]"}if(null===u)return"null";if(M.includes(u)){if(g)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const j=M.push(u)-1,xe=Object.keys(u).sort(null==C?void 0:C(u));for(S="",o=0;o<xe.length;o++){const g=xe[o],C=e5(u[g]);C&&(S&&(S+=","),S+=JSON.stringify(g)+":"+C)}return M.splice(j,1),"{"+S+"}"}(u)}function M$8(u){switch(u.type){case"catalog":case"feature":case"oriented-imagery":case"subtype-group":return!0;default:return!1}}function B$5(u){switch(u.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return M$8(u)}}let Wt=class F{constructor(u){this.value=u}},Xt=class w{constructor(u){this.value=u}};const Qt=Xt,Yt=Wt,en={type:"VOID"},tn={type:"BREAK"},nn={type:"CONTINUE"};function v$5(u,o,g){return""===o||null==o||o===g||o===g?u:u=u.split(o).join(g)}function _$4(u){return u instanceof Lt}function I$5(u){return u instanceof vt}function Y$6(u){return!!(G$3(u)||E$4(u)||X$6(u)||ee$5(u)||te$5(u)||z$6(u)||null===u||u===en||"number"==typeof u)}function P$7(u,o){return void 0===u?o:u}function L$5(u){return null==u?"":U$5(u)||Q$5(u)?"Array":X$6(u)?"Date":te$5(u)?"Time":ee$5(u)?"DateOnly":G$3(u)?"String":z$6(u)?"Boolean":E$4(u)?"Number":"esri.arcade.Attachment"===(null==u?void 0:u.declaredClass)?"Attachment":"esri.arcade.Portal"===(null==u?void 0:u.declaredClass)?"Portal":"esri.arcade.Dictionary"===(null==u?void 0:u.declaredClass)?"Dictionary":$$3(u)?"KnowledgeGraph":u instanceof vt?"Module":H$7(u)?"Feature":u instanceof g?"Point":u instanceof j?"Polygon":u instanceof xe?"Polyline":u instanceof Oe?"Multipoint":u instanceof M?"Extent":_$4(u)?"Function":B$4(u)?"FeatureSet":W$7(u)?"FeatureSetCollection":u===en?"":"number"==typeof u&&isNaN(u)?"Number":"Unrecognized Type"}function G$3(u){return"string"==typeof u||u instanceof String}function z$6(u){return"boolean"==typeof u}function E$4(u){return"number"==typeof u}function V$4(u){return"number"==typeof u&&isFinite(u)&&Math.floor(u)===u}function q$5(u){return u instanceof Ue}function U$5(u){return Array.isArray(u)}function H$7(u){return"esri.arcade.Feature"===(null==u?void 0:u.arcadeDeclaredClass)}function B$4(u){return"esri.arcade.featureset.support.FeatureSet"===(null==u?void 0:u.declaredRootClass)}function K$4(u){return"esri.arcade.Dictionary"===(null==u?void 0:u.declaredClass)}function W$7(u){return"esri.arcade.featureSetCollection"===(null==u?void 0:u.declaredRootClass)}function $$3(u){return"esri.rest.knowledgeGraph.KnowledgeGraph"===(null==u?void 0:u.declaredClass)}function Q$5(u){return u instanceof Ft}function X$6(u){return u instanceof pt}function ee$5(u){return u instanceof $t}function te$5(u){return u instanceof gt}function ne$4(u){return null!=u&&"object"==typeof u}function re$5(u){return u instanceof Date}function ae$4(u,o,g,C,S){if(u.length<o||u.length>g)throw new Mt(C,St.WrongNumberOfParameters,S)}function ie$4(u){return u<0?-Math.round(-u):Math.round(u)}function oe$4(u,o){return isNaN(u)||null==o||""===o?u.toString():(o=v$5(o,"‰",""),o=v$5(o,"¤",""),Ct(u,{pattern:o}))}function ue$4(u,o){return null==o||""===o?u.toISOString(!0):u.toFormat(se$4(o),{locale:Je(),numberingSystem:"latn"})}function se$4(u,o=!1){u=u.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let g="";const C=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const S of u.match(C)||[])switch(S){case"D":g+="d";break;case"DD":g+="dd";break;case"DDD":g+="o";break;case"d":g+="c";break;case"ddd":g+="ccc";break;case"dddd":g+="cccc";break;case"M":g+="L";break;case"MM":g+="LL";break;case"MMM":g+="LLL";break;case"MMMM":g+="LLLL";break;case"YY":g+="yy";break;case"Y":case"YYYY":g+="yyyy";break;case"Q":g+="q";break;case"Z":g+="Z";break;case"ZZ":g+="ZZ";break;case"ZZZ":g+="ZZZ";break;case"ZZZZ":g+=o?"[ZZZZ]":"ZZZZ";break;case"ZZZZZ":g+=o?"[ZZZZZ]":"ZZZZZ";break;case"S":g+="'S'";break;case"SS":g+="'SS'";break;case"SSS":g+="u";break;case"A":case"a":g+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":g+=S;break;default:S.length>=2&&"["===S.slice(0,1)&&"]"===S.slice(-1)?g+=`'${S.slice(1,-1)}'`:g+=`'${S}'`}return g}function le$3(u,o,g){switch(g){case">":return u>o;case"<":return u<o;case">=":return u>=o;case"<=":return u<=o}return!1}function fe$2(u,o,g){if(null===u){if(null===o||o===en)return le$3(null,null,g);if(E$4(o))return le$3(0,o,g);if(G$3(o))return le$3(0,ge$2(o),g);if(z$6(o))return le$3(0,ge$2(o),g);if(X$6(o))return le$3(0,o.toNumber(),g);if(te$5(o))return le$3(u,o.toNumber(),g);if(ee$5(o))return le$3(u,o.toNumber(),g)}if(u===en){if(null===o||o===en)return le$3(null,null,g);if(E$4(o))return le$3(0,o,g);if(G$3(o))return le$3(0,ge$2(o),g);if(z$6(o))return le$3(0,ge$2(o),g);if(X$6(o))return le$3(0,o.toNumber(),g);if(te$5(o))return le$3(u,o.toNumber(),g);if(ee$5(o))return le$3(u,o.toNumber(),g)}else if(E$4(u)){if(E$4(o))return le$3(u,o,g);if(z$6(o))return le$3(u,ge$2(o),g);if(null===o||o===en)return le$3(u,0,g);if(G$3(o))return le$3(u,ge$2(o),g);if(X$6(o))return le$3(u,o.toNumber(),g);if(te$5(o))return le$3(u,o.toNumber(),g);if(ee$5(o))return le$3(u,o.toNumber(),g)}else if(G$3(u)){if(G$3(o))return le$3(me$3(u),me$3(o),g);if(X$6(o))return le$3(ge$2(u),o.toNumber(),g);if(te$5(o))return le$3(ge$2(u),o.toNumber(),g);if(ee$5(o))return le$3(ge$2(u),o.toNumber(),g);if(E$4(o))return le$3(ge$2(u),o,g);if(null===o||o===en)return le$3(ge$2(u),0,g);if(z$6(o))return le$3(ge$2(u),ge$2(o),g)}else if(X$6(u)){if(X$6(o))return u.timeZone!==o.timeZone&&(u.isUnknownTimeZone?u=pt.arcadeDateAndZoneToArcadeDate(u,o.timeZone):o.isUnknownTimeZone&&(o=pt.arcadeDateAndZoneToArcadeDate(o,u.timeZone))),le$3(u.toNumber(),o.toNumber(),g);if(null===o||o===en)return le$3(u.toNumber(),0,g);if(E$4(o))return le$3(u.toNumber(),o,g);if(z$6(o))return le$3(u.toNumber(),ge$2(o),g);if(G$3(o))return le$3(u.toNumber(),ge$2(o),g);if(te$5(o))throw new Mt(null,St.CannotCompareDateAndTime,null);if(ee$5(o))return le$3(u.toNumber(),o.toNumber(),g)}else if(z$6(u)){if(z$6(o))return le$3(u,o,g);if(E$4(o))return le$3(ge$2(u),ge$2(o),g);if(X$6(o))return le$3(ge$2(u),o.toNumber(),g);if(te$5(o))return le$3(ge$2(u),o.toNumber(),g);if(ee$5(o))return le$3(ge$2(u),o.toNumber(),g);if(null===o||o===en)return le$3(ge$2(u),0,g);if(G$3(o))return le$3(ge$2(u),ge$2(o),g)}else if(ee$5(u)){if(X$6(o))return le$3(u.toNumber(),o.toNumber(),g);if(null===o||o===en)return le$3(u.toNumber(),0,g);if(E$4(o))return le$3(u.toNumber(),o,g);if(z$6(o))return le$3(u.toNumber(),ge$2(o),g);if(G$3(o))return le$3(u.toNumber(),ge$2(o),g);if(te$5(o))throw new Mt(null,St.CannotCompareDateAndTime,null);if(ee$5(o))return le$3(u.toNumber(),o.toNumber(),g)}else if(te$5(u)){if(X$6(o))throw new Mt(null,St.CannotCompareDateAndTime,null);if(null===o||o===en)return le$3(u.toNumber(),0,g);if(E$4(o))return le$3(u.toNumber(),o,g);if(z$6(o))return le$3(u.toNumber(),ge$2(o),g);if(G$3(o))return le$3(u.toNumber(),ge$2(o),g);if(te$5(o))return le$3(u.toNumber(),o.toNumber(),g);if(ee$5(o))throw new Mt(null,St.CannotCompareDateAndTime,null)}return!!ce$3(u,o)&&("<="===g||">="===g)}function ce$3(u,o){if(u===o)return!0;if(null===u&&o===en||null===o&&u===en)return!0;if(X$6(u)&&X$6(o))return u.equals(o);if(te$5(u)&&te$5(o))return u.equals(o);if(ee$5(u)&&ee$5(o))return u.equals(o);if(u instanceof Zt)return u.equalityTest(o);if(u instanceof zt)return u.equalityTest(o);if(u instanceof g&&o instanceof g){const g=u.cache._arcadeCacheId,C=o.cache._arcadeCacheId;if(null!=g)return g===C}if(ne$4(u)&&ne$4(o)){if(u._arcadeCacheId===o._arcadeCacheId&&void 0!==u._arcadeCacheId&&null!==u._arcadeCacheId)return!0;if(u._underlyingGraphic===o._underlyingGraphic&&void 0!==u._underlyingGraphic&&null!==u._underlyingGraphic)return!0}return!1}function me$3(u,o){if(G$3(u))return u;if(null===u)return"";if(E$4(u))return oe$4(u,o);if(z$6(u))return u.toString();if(X$6(u))return ue$4(u,o);if(te$5(u))return u.toFormat(o);if(ee$5(u))return u.toFormat(o);if(u instanceof Ue)return JSON.stringify(u.toJSON());if(U$5(u)){const o=[];for(let g=0;g<u.length;g++)o[g]=ye$2(u[g]);return"["+o.join(",")+"]"}if(u instanceof Ft){const o=[];for(let g=0;g<u.length();g++)o[g]=ye$2(u.get(g));return"["+o.join(",")+"]"}return null!==u&&"object"==typeof u&&void 0!==u.castToText?u.castToText():_$4(u)?"object, Function":u===en?"":I$5(u)?"object, Module":""}function de$3(u){const o=[];if(!U$5(u))return null;if(u instanceof Ft){for(let g=0;g<u.length();g++)o[g]=ge$2(u.get(g));return o}for(let g=0;g<u.length;g++)o[g]=ge$2(u[g]);return o}function pe$2(u,o,g=!1){if(G$3(u))return u;if(null===u)return"";if(E$4(u))return oe$4(u,o);if(z$6(u))return u.toString();if(X$6(u))return ue$4(u,o);if(te$5(u))return u.toFormat(o);if(ee$5(u))return u.toFormat(o);if(u instanceof Ue)return u instanceof M?'{"xmin":'+u.xmin.toString()+',"ymin":'+u.ymin.toString()+","+(u.hasZ?'"zmin":'+u.zmin.toString()+",":"")+(u.hasM?'"mmin":'+u.mmin.toString()+",":"")+'"xmax":'+u.xmax.toString()+',"ymax":'+u.ymax.toString()+","+(u.hasZ?'"zmax":'+u.zmax.toString()+",":"")+(u.hasM?'"mmax":'+u.mmax.toString()+",":"")+'"spatialReference":'+je$1(u.spatialReference)+"}":je$1(u.toJSON(),((u,o)=>u.key===o.key?0:"spatialReference"===u.key?1:"spatialReference"===o.key||u.key<o.key?-1:u.key>o.key?1:0));if(U$5(u)){const o=[];for(let C=0;C<u.length;C++)o[C]=ye$2(u[C],g);return"["+o.join(",")+"]"}if(u instanceof Ft){const o=[];for(let C=0;C<u.length();C++)o[C]=ye$2(u.get(C),g);return"["+o.join(",")+"]"}return null!==u&&"object"==typeof u&&void 0!==u.castToText?u.castToText(g):_$4(u)?"object, Function":u===en?"":I$5(u)?"object, Module":""}function ye$2(u,o=!1){if(null===u)return"null";if(z$6(u)||E$4(u)||G$3(u))return JSON.stringify(u);if(u instanceof Ue)return pe$2(u,null,o);if(u instanceof Ft)return pe$2(u,null,o);if(Array.isArray(u))return pe$2(u,null,o);if(X$6(u))return o?JSON.stringify(u.getTime()):JSON.stringify(ue$4(u,""));if(te$5(u))return JSON.stringify(u.toString());if(ee$5(u))return JSON.stringify(u.toString());if(null!==u&&"object"==typeof u){if(void 0!==u.castToText)return u.castToText(o)}else if(u===en)return"null";return"null"}function ge$2(u,o){return E$4(u)?u:null===u||""===u?0:X$6(u)||ee$5(u)||te$5(u)?NaN:z$6(u)?u?1:0:U$5(u)||""===u||void 0===u?NaN:void 0!==o&&G$3(u)?(o=v$5(o,"‰",""),o=v$5(o,"¤",""),At(u,{pattern:o})):u===en?0:Number(u)}function he$3(u,o){if(X$6(u))return u;if(G$3(u)){const g=function be$2(u,o){const g=/ (\d\d)/,C=Dt(o);let M=S.fromISO(u,{zone:C});return M.isValid||g.test(u)&&(u=u.replace(g,"T$1"),M=S.fromISO(u,{zone:o}),M.isValid)?M:null}(u,o);if(g)return pt.dateTimeToArcadeDate(g)}return null}function Ne(u){return z$6(u)?u:G$3(u)?"true"===(u=u.toLowerCase()):!!E$4(u)&&0!==u&&!isNaN(u)}function Ze$1(u,o){return null==u?null:(null!==u.spatialReference&&void 0!==u.spatialReference||(u.spatialReference=o),u)}function Ae$1(u){if(null===u)return null;if(u instanceof g)return"NaN"===u.x||null===u.x||isNaN(u.x)?null:u;if(u instanceof j){if(0===u.rings.length)return null;for(const o of u.rings)if(o.length>0)return u;return null}if(u instanceof xe){if(0===u.paths.length)return null;for(const o of u.paths)if(o.length>0)return u;return null}return u instanceof Oe?0===u.points.length?null:u:u instanceof M?"NaN"===u.xmin||null===u.xmin||isNaN(u.xmin)?null:u:null}function Te$1(u,o){if(!u)return o;if(!u.domain)return o;let g=null,C=null;if(X$6(o))g=o.toNumber();else if(ee$5(o))g=o.toString();else if(te$5(o))g=o.toStorageString();else if("string"===u.field.type||"esriFieldTypeString"===u.field.type)g=me$3(o);else{if(null==o)return null;if(""===o)return o;g=ge$2(o)}for(let S=0;S<u.domain.codedValues.length;S++){const o=u.domain.codedValues[S];o.code===g&&(C=o)}return null===C?me$3(o):C.name}function ke$1(u,o){if(!u)return o;if(!u.domain)return o;let g=null;const C=me$3(o);for(let S=0;S<u.domain.codedValues.length;S++){const o=u.domain.codedValues[S];o.name===C&&(g=o)}return null===g?o:g.code}function Ce$2(u,o,g=null,C=null){if(!o)return null;if(!o.fields)return null;let S,M,j=null;for(let Je=0;Je<o.fields.length;Je++){const g=o.fields[Je];g.name.toLowerCase()===u.toString().toLowerCase()&&(j=g)}if(null===j)throw new Mt(null,St.FieldNotFound,null,{key:u});let xe=o.typeIdField,Oe="id",Ue=o.types;if(o.subtypeField&&(xe=o.subtypeField,Oe="code",Ue=o.subtypes??[]),null===C&&g&&xe)C=g.hasField(xe)?g.field(xe):null;else if(xe&&null!==C){let u=!1;for(const o of Ue||[])if(C===o[Oe]){u=!0;break}if(!u)for(const o of Ue||[])if(C===o.name){C=o[Oe],u=!0;break}u||(C=null,g&&xe&&(C=g.hasField(xe)?g.field(xe):null))}return null!=C&&Ue.some((u=>{var g;return u[Oe]===C&&(S=null==(g=u.domains)?void 0:g[j.name],S&&"inherited"===S.type&&(S=De$1(j.name,o),M=!0),!0)})),M||S||(S=De$1(u,o)),{field:j,domain:S}}function De$1(u,o){let g;return o.fields.some((o=>(o.name.toLowerCase()===u.toLowerCase()&&(g=o.domain),!!g))),g}function je$1(u,o){o||(o={}),"function"==typeof o&&(o={cmp:o});const g="boolean"==typeof o.cycles&&o.cycles,C=o.cmp&&(S=o.cmp,function(u){return function(o,g){const C={key:o,value:u[o]},M={key:g,value:u[g]};return S(C,M)}});var S;const M=[];return function e5(u){if((null==u?void 0:u.toJSON)&&"function"==typeof u.toJSON&&(u=u.toJSON()),void 0===u)return;if("number"==typeof u)return isFinite(u)?""+u:"null";if("object"!=typeof u)return JSON.stringify(u);let o,S;if(Array.isArray(u)){for(S="[",o=0;o<u.length;o++)o&&(S+=","),S+=e5(u[o])||"null";return S+"]"}if(null===u)return"null";if(M.includes(u)){if(g)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const j=M.push(u)-1,xe=Object.keys(u).sort(null==C?void 0:C(u));for(S="",o=0;o<xe.length;o++){const g=xe[o],C=e5(u[g]);C&&(S&&(S+=","),S+=JSON.stringify(g)+":"+C)}return M.splice(j,1),"{"+S+"}"}(u)}function Fe$2(u){if(null===u)return null;const o=[];for(const g of u)(null==g?void 0:g.arcadeDeclaredClass)&&"esri.arcade.Feature"===g.arcadeDeclaredClass?o.push(g.geometry()):o.push(g);return o}function we$2(u,o){if(!(o instanceof g))throw new Mt(null,St.InvalidParameter,null);u.push(o.hasZ?o.hasM?[o.x,o.y,o.z,o.m]:[o.x,o.y,o.z]:[o.x,o.y])}function xe$2(u,o){if(U$5(u)||Q$5(u)){let g=!1,C=!1,S=[],M=o;if(U$5(u)){for(const o of u)we$2(S,o);S.length>0&&(M=u[0].spatialReference,g=u[0].hasZ,C=u[0].hasM)}else if(u instanceof zt)S=u._elements,S.length>0&&(g=u._hasZ,C=u._hasM,M=u.get(0).spatialReference);else{if(!Q$5(u))throw new Mt(null,St.InvalidParameter,null);for(const o of u.toArray())we$2(S,o);S.length>0&&(M=u.get(0).spatialReference,g=!0===u.get(0).hasZ,C=!0===u.get(0).hasM)}return 0===S.length?null:(Xe(S)||(S=S.slice(0).reverse()),new j({rings:[S],spatialReference:M,hasZ:g,hasM:C}))}return u}function Me$2(u,o){if(U$5(u)||Q$5(u)){let g=!1,C=!1,S=[],M=o;if(U$5(u)){for(const o of u)we$2(S,o);S.length>0&&(M=u[0].spatialReference,g=!0===u[0].hasZ,C=!0===u[0].hasM)}else if(u instanceof zt)S=u._elements,S.length>0&&(g=u._hasZ,C=u._hasM,M=u.get(0).spatialReference);else if(Q$5(u)){for(const o of u.toArray())we$2(S,o);S.length>0&&(M=u.get(0).spatialReference,g=!0===u.get(0).hasZ,C=!0===u.get(0).hasM)}return 0===S.length?null:new xe({paths:[S],spatialReference:M,hasZ:g,hasM:C})}return u}function Oe$1(u,o){if(U$5(u)||Q$5(u)){let g=!1,C=!1,S=[],M=o;if(U$5(u)){for(const o of u)we$2(S,o);S.length>0&&(M=u[0].spatialReference,g=!0===u[0].hasZ,C=!0===u[0].hasM)}else if(u instanceof zt)S=u._elements,S.length>0&&(g=u._hasZ,C=u._hasM,M=u.get(0).spatialReference);else if(Q$5(u)){for(const o of u.toArray())we$2(S,o);S.length>0&&(M=u.get(0).spatialReference,g=!0===u.get(0).hasZ,C=!0===u.get(0).hasM)}return 0===S.length?null:new Oe({points:S,spatialReference:M,hasZ:g,hasM:C})}return u}function Re$2(u,o=!1){const g=[];if(null===u)return g;if(!0===U$5(u)){for(let C=0;C<u.length;C++){const S=me$3(u[C]);""===S&&!0!==o||g.push(S)}return g}if(u instanceof Ft){for(let C=0;C<u.length();C++){const S=me$3(u.get(C));""===S&&!0!==o||g.push(S)}return g}if(Y$6(u)){const C=me$3(u);return""===C&&!0!==o||g.push(C),g}return[]}let rn=0;function ve$2(u){return rn++,rn%100==0?(rn=0,new Promise((o=>{setTimeout((()=>{o(u)}),0)}))):u}function _e$1(u,o,g){switch(g){case"&":return u&o;case"|":return u|o;case"^":return u^o;case"<<":return u<<o;case">>":return u>>o;case">>>":return u>>>o}}function Ie$2(u,o=null){return null==u?null:z$6(u)||E$4(u)||G$3(u)?u:u instanceof Ue?!0===(null==o?void 0:o.keepGeometryType)?u:u.toJSON():u instanceof Ft?u.toArray().map((u=>Ie$2(u,o))):Array.isArray(u)?u.map((u=>Ie$2(u,o))):re$5(u)?u:X$6(u)?u.toJSDate():te$5(u)?u.toString():ee$5(u)?u.toJSDate():null!==u&&"object"==typeof u&&void 0!==u.castAsJson?u.castAsJson(o):null}async function Ye(u,o,g,C,S){const M=await Pe$1(u,o,g);S[C]=M}async function Pe$1(u,o=null,g=null){if(u instanceof Ft&&(u=u.toArray()),null==u)return null;if(Y$6(u)||u instanceof Ue||re$5(u)||X$6(u))return Ie$2(u,g);if(Array.isArray(u)){const C=[],S=[];for(const M of u)null===M||Y$6(M)||M instanceof Ue||re$5(M)||X$6(M)?S.push(Ie$2(M,g)):(S.push(null),C.push(Ye(M,o,g,S.length-1,S)));return C.length>0&&await Promise.all(C),S}return null!==u&&"object"==typeof u&&void 0!==u.castAsJsonAsync?u.castAsJsonAsync(o,g):null}function Le$2(u){return Ge$1(u)?u.parent:u}function Ge$1(u){return u&&"declaredClass"in u&&"esri.layers.support.SubtypeSublayer"===u.declaredClass}function Ee$2(u,o,g){const C=Le$2(u.fullSchema());return null===C?null:C.fields?Ce$2(o,C,u,g):null}function Ve(u){const o=Le$2(u.fullSchema());return null===o?null:o.fields?o.subtypeField?{subtypeField:o.subtypeField,subtypes:o.subtypes?o.subtypes.map((u=>({name:u.name,code:u.code}))):[]}:o.typeIdField?{subtypeField:o.typeIdField,subtypes:o.types?o.types.map((u=>({name:u.name,code:u.id}))):[]}:null:null}function qe(u,o,g,C){const S=Le$2(u.fullSchema());if(null===S)return null;if(!S.fields)return null;const M=Ce$2(o,S,u,C);if(void 0===g)try{g=u.field(o)}catch(j){return null}return Te$1(M,g)}function Ue$1(u,o,g,C){const S=Le$2(u.fullSchema());if(null===S)return null;if(!S.fields)return null;if(void 0===g){try{g=u.field(o)}catch(M){return null}return g}return ke$1(Ce$2(o,S,u,C),g)}function He(u){return(null==u?void 0:u.timeZone)??"system"}function Be(u){const o=Le$2(u.fullSchema());if(null===o)return null;if(!o.fields)return null;const g=[];for(const C of o.fields)g.push(u$5(C));return{objectIdField:o.objectIdField,globalIdField:o.globalIdField??"",geometryType:void 0===qt[o.geometryType]?"":qt[o.geometryType],fields:g}}function Ke$1(u,o){return"system"===u&&(u=pt.systemTimeZoneCanonicalName),{version:an,engineVersion:Qe,timeZone:u,spatialReference:o instanceof et?o.toJSON():o,application:tt.applicationName??"",engine:"web",locale:Je()}}const an="1.24",sn=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResultE:Xt,ReturnResultE:Wt,absRound:ie$4,arcadeVersion:an,autoCastArrayOfPointsToMultiPoint:Oe$1,autoCastArrayOfPointsToPolygon:xe$2,autoCastArrayOfPointsToPolyline:Me$2,autoCastFeatureToGeometry:Fe$2,binaryOperator:_e$1,breakResult:tn,castAsJson:Ie$2,castAsJsonAsync:Pe$1,continueResult:nn,defaultExecutingContext:Ke$1,defaultTimeZone:He,defaultUndefined:P$7,equalityTest:ce$3,featureDomainCodeLookup:Ue$1,featureDomainValueLookup:qe,featureFullDomain:Ee$2,featureSchema:Be,featureSubtypes:Ve,fixNullGeometry:Ae$1,fixSpatialReference:Ze$1,formatDate:ue$4,formatNumber:oe$4,getDomain:Ce$2,getDomainCode:ke$1,getDomainValue:Te$1,getType:L$5,greaterThanLessThan:fe$2,implicitResult:Qt,isArray:U$5,isBoolean:z$6,isDate:X$6,isDateOnly:ee$5,isDictionary:K$4,isFeature:H$7,isFeatureSet:B$4,isFeatureSetCollection:W$7,isFunctionParameter:_$4,isGeometry:q$5,isImmutableArray:Q$5,isInteger:V$4,isJsDate:re$5,isKnowledgeGraph:$$3,isModule:I$5,isNumber:E$4,isObject:ne$4,isSimpleType:Y$6,isString:G$3,isSubtypeGrouplayer:function ze(u){return u&&"declaredClass"in u&&"esri.layers.SubtypeGroupLayer"===u.declaredClass},isSubtypeSublayer:Ge$1,isTime:te$5,multiReplace:v$5,parseGeometryFromJson:function Se$2(u,o){const g=JSON.parse(u);return g&&!g.spatialReference&&(g.spatialReference=o),We(g)},pcCheck:ae$4,returnResult:Yt,stableStringify:je$1,standardiseDateFormat:se$4,tick:ve$2,toBoolean:Ne,toDate:he$3,toNumber:ge$2,toNumberArray:de$3,toString:me$3,toStringArray:Re$2,toStringExplicit:pe$2,voidOperation:en},Symbol.toStringTag,{value:"Module"}));let un;function f$4(u){return null===u?null:X$6(u)?u.clone():Y$6(u)?u:q$5(u)?u.clone():Q$5(u)?u.toArray().map((u=>f$4(u))):U$5(u)?u.map((u=>f$4(u))):H$7(u)?un.createFromArcadeFeature(u):W$7(u)||B$4(u)?u:K$4(u)||"esri.arcade.Attachment"===(null==u?void 0:u.declaredClass)?u.deepClone():("esri.arcade.Portal"===(null==u?void 0:u.declaredClass)||$$3(u)||u instanceof vt||_$4(u),u)}function v$4(u,o,g=!1,C=!1){if(null==u)return null;if(E$4(u))return ge$2(u);if(z$6(u))return Ne(u);if(G$3(u))return me$3(u);if(X$6(u))return he$3(u,o);if(ee$5(u))return u;if(te$5(u))return u;if(U$5(u)){const S=[];for(const M of u)S.push(v$4(M,o,g,C));return S}if(C&&q$5(u))return u;const S=new on;S.immutable=!1;for(const M of Object.keys(u)){const j=u[M];void 0!==j&&S.setField(M,v$4(j,o,g,C))}return S.immutable=g,S}let on=class N{constructor(u){this.declaredClass="esri.arcade.Dictionary",this.attributes=null,this.plain=!1,this.immutable=!0,this.attributes=u instanceof N?u.attributes:u??{}}field(u){const o=u.toLowerCase(),g=this.attributes[u];if(void 0!==g)return g;for(const C in this.attributes)if(C.toLowerCase()===o)return this.attributes[C];throw new Mt(null,St.FieldNotFound,null,{key:u})}setField(u,o){if(this.immutable)throw new Mt(null,St.Immutable,null);if(_$4(o))throw new Mt(null,St.NoFunctionInDictionary,null);const g=u.toLowerCase();if(o instanceof Date&&(o=pt.dateJSToArcadeDate(o)),void 0===this.attributes[u]){for(const u in this.attributes)if(u.toLowerCase()===g)return void(this.attributes[u]=o);this.attributes[u]=o}else this.attributes[u]=o}hasField(u){const o=u.toLowerCase();if(void 0!==this.attributes[u])return!0;for(const g in this.attributes)if(g.toLowerCase()===o)return!0;return!1}keys(){let u=[];for(const o in this.attributes)u.push(o);return u=u.sort(),u}castToText(u=!1){let o="";for(const g in this.attributes){""!==o&&(o+=",");const C=this.attributes[g];null==C?o+=JSON.stringify(g)+":null":z$6(C)||E$4(C)||G$3(C)?o+=JSON.stringify(g)+":"+JSON.stringify(C):C instanceof Ue?o+=JSON.stringify(g)+":"+pe$2(C):C instanceof Ft||Array.isArray(C)?o+=JSON.stringify(g)+":"+pe$2(C,null,u):C instanceof pt?o+=u?JSON.stringify(g)+":"+JSON.stringify(C.getTime()):JSON.stringify(g)+":"+C.stringify():null!==C&&"object"==typeof C&&void 0!==C.castToText&&(o+=JSON.stringify(g)+":"+C.castToText(u))}return"{"+o+"}"}static convertObjectToArcadeDictionary(u,o,g=!0,C=!1){const S=new N;S.immutable=!1;for(const M in u){const j=u[M];void 0!==j&&S.setField(M.toString(),v$4(j,o,g,C))}return S.immutable=g,S}static convertJsonToArcade(u,o,g=!1,C=!1){return v$4(u,o,g,C)}castAsJson(u=null){const o={};for(let g in this.attributes){const C=this.attributes[g];void 0!==C&&((null==u?void 0:u.keyTranslate)&&(g=u.keyTranslate(g)),o[g]=Ie$2(C,u))}return o}async castDictionaryValueAsJsonAsync(u,o,g,C=null,S){const M=await Pe$1(g,C,S);return u[o]=M,M}async castAsJsonAsync(u=null,o=null){const g={},C=[];for(let S in this.attributes){const M=this.attributes[S];(null==o?void 0:o.keyTranslate)&&(S=o.keyTranslate(S)),void 0!==M&&(Y$6(M)||M instanceof Ue||M instanceof pt?g[S]=Ie$2(M,o):C.push(this.castDictionaryValueAsJsonAsync(g,S,M,u,o)))}return C.length>0&&await Promise.all(C),g}deepClone(){const u=new N;u.immutable=!1;for(const o of this.keys())u.setField(o,f$4(this.field(o)));return u}},ln=0;function d$6(u,o,g,C,S=1){let M;switch(o=o.toLowerCase()){case"hasz":{const o=u.hasZ;return void 0!==o&&o}case"hasm":{const o=u.hasM;return void 0!==o&&o}case"spatialreference":{let o=u.spatialReference._arcadeCacheId;if(void 0===o){let g=!0;Object.freeze&&Object.isFrozen(u.spatialReference)&&(g=!1),g&&(ln++,u.spatialReference._arcadeCacheId=ln,o=ln)}const g=new on({wkt:u.spatialReference.wkt,wkid:u.spatialReference.wkid});return void 0!==o&&(g._arcadeCacheId="SPREF"+o.toString()),g}}switch(u.type){case"extent":switch(o){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const g=u[o];return void 0!==g?g:null}case"type":return"Extent"}break;case"polygon":switch(o){case"rings":return M=u.cache._arcadeCacheId,void 0===M&&(ln++,M=ln,u.cache._arcadeCacheId=M),new Zt(u.rings,u.spatialReference,!0===u.hasZ,!0===u.hasM,M);case"type":return"Polygon"}break;case"point":switch(o){case"x":case"y":case"z":case"m":return u[o]??null;case"type":return"Point"}break;case"polyline":switch(o){case"paths":return M=u.cache._arcadeCacheId,void 0===M&&(ln++,M=ln,u.cache._arcadeCacheId=M),new Zt(u.paths,u.spatialReference,!0===u.hasZ,!0===u.hasM,M);case"type":return"Polyline"}break;case"multipoint":switch(o){case"points":return M=u.cache._arcadeCacheId,void 0===M&&(ln++,M=ln,u.cache._arcadeCacheId=M),new zt(u.points,u.spatialReference,!0===u.hasZ,!0===u.hasM,M,1);case"type":return"Multipoint"}}if(1===S)throw new Mt(g,St.InvalidIdentifier,C);return 2===S?{keystate:"notfound"}:null}function p$7(u,o){let g,C=u;if(null==C)return null;if(U$5(o))g=o;else if(Q$5(o))g=o.toArray();else{if(null==o)return null;g=[o]}for(const S of g){if(H$7(C)){if(!1===G$3(S))return null;if(!C.hasField(S))return null;C=C.field(S)}else if(K$4(C)){if(!1===G$3(S))return null;if(!C.hasField(S))return null;C=C.field(S)}else if(q$5(C)){if(!1===G$3(S))return null;C=d$6(C,S,null,null,0)}else if(U$5(C)){if(!1===E$4(S))return null;C=S>=0?C[S]:C[C.length+S]}else{if(!Q$5(C))return null;if(!1===E$4(S))return null;C=S>=0?C.get(S):C.get(C.length()+S)}if(null==C)return null}return C}let cn=class D{constructor(){this.arcadeDeclaredClass="esri.arcade.Feature",this._optimizedGeomDefinition=null,this._geometry=null,this.attributes=null,this._layer=null,this._fieldTypesFixed=!0,this.fieldsIndex=null,this.contextTimeZone=null,this.immutable=!0,this._fieldsToFixDataTypes=null,this.immutable=!0}static createFromGraphic(u,o){const g=new D;return g.contextTimeZone=o??null,g._geometry=null!=u.geometry?u.geometry:null,void 0===u.attributes||null===u.attributes?g.attributes={}:g.attributes=u.attributes,u._sourceLayer?(g._layer=u._sourceLayer,g._fieldTypesFixed=!1):u._layer?(g._layer=u._layer,g._fieldTypesFixed=!1):u.layer&&"fields"in u.layer?(g._layer=u.layer,g._fieldTypesFixed=!1):u.sourceLayer&&"fields"in u.sourceLayer&&(g._layer=u.sourceLayer,g._fieldTypesFixed=!1),g._layer&&!g._fieldTypesFixed&&(g.fieldsIndex=this.hydrateFieldsIndex(g._layer)),g}static createFromArcadeFeature(u){if(u instanceof D){const o=new D;return o._fieldTypesFixed=u._fieldTypesFixed,o.attributes=u.attributes,o._geometry=u._geometry,o._optimizedGeomDefinition=u._optimizedGeomDefinition,u._layer&&(o._layer=u._layer),o.fieldsIndex=u.fieldsIndex,o.contextTimeZone=u.contextTimeZone,o}const o={};for(const g of u.keys())o[g]=u.field(g);return D.createFromGraphicLikeObject(u.geometry(),o,u.fullSchema(),u.contextTimeZone)}static createFromOptimisedFeature(u,o,g){const C=new D;return C._geometry=u.geometry?{geometry:u.geometry}:null,C._optimizedGeomDefinition=g,C.attributes=u.attributes||{},C._layer=o,C._fieldTypesFixed=!1,C}static createFromArcadeDictionary(u,o){const g=new D;return g.attributes=u.field("attributes"),null!==g.attributes&&g.attributes instanceof on?(g.attributes=g.attributes.attributes,null===g.attributes&&(g.attributes={})):g.attributes={},g._geometry=u.field("geometry"),null!==g._geometry&&(g._geometry instanceof on?g._geometry=D.parseGeometryFromDictionary(g._geometry,o):g._geometry instanceof Ue||(g._geometry=null)),g}static createFromGraphicLikeObject(u,o,g=null,C){const S=new D;return S.contextTimeZone=C??null,null===o&&(o={}),S.attributes=o,S._geometry=null!=u?u:null,S._layer=g,S._layer&&(S._fieldTypesFixed=!1,S.fieldsIndex=this.hydrateFieldsIndex(S._layer)),S}static hydrateFieldsIndex(u){return null===u?null:B$4(u)?u.getFieldsIndex():u.fieldsIndex?u.fieldsIndex:nt.fromLayerJSON({datesInUnknownTimezone:u.datesInUnknownTimezone,fields:u.fields,timeInfo:u.timeInfo,editFieldsInfo:u.editFieldsInfo,dateFieldsTimeReference:u.dateFieldsTimeReference??{timeZone:"UTC",respectsDaylightSaving:!1}})}repurposeFromGraphicLikeObject(u,o,g=null){null===o&&(o={}),this.attributes=o,this._geometry=u??null,this._layer=g,this._layer?this._fieldTypesFixed=!1:this._fieldTypesFixed=!0}castToText(u=!1){let o="";!1===this._fieldTypesFixed&&this._fixFieldTypes();for(const g in this.attributes){""!==o&&(o+=",");const C=this.attributes[g];null==C?o+=JSON.stringify(g)+":null":z$6(C)||E$4(C)||G$3(C)?o+=JSON.stringify(g)+":"+JSON.stringify(C):C instanceof Ue?o+=JSON.stringify(g)+":"+pe$2(C):C instanceof gt||C instanceof $t?o+=`${JSON.stringify(g)}:${JSON.stringify(C.toString())}`:C instanceof Ft||Array.isArray(C)?o+=JSON.stringify(g)+":"+pe$2(C,null,u):C instanceof pt?o+=u?JSON.stringify(g)+":"+JSON.stringify(C.getTime()):JSON.stringify(g)+":"+C.stringify():null!==C&&"object"==typeof C&&void 0!==C.castToText&&(o+=JSON.stringify(g)+":"+C.castToText(u))}return'{"geometry":'+(null===this.geometry()?"null":pe$2(this.geometry()))+',"attributes":{'+o+"}}"}_fixFieldTypes(){var u;if(this._fieldsToFixDataTypes&&(null==(u=this._fieldsToFixDataTypes)?void 0:u.length)>0)return this._fixAllFields(this._fieldsToFixDataTypes),void(this._fieldTypesFixed=!0);const o=[],g=this._layer.fields;for(let C=0;C<g.length;C++){const u=g[C],{name:S,type:M}=u;switch(M){case"date":case"esriFieldTypeDate":o.push({field:S,dataType:"date"});break;case"date-only":case"esriFieldTypeDateOnly":o.push({field:S,dataType:"date-only"});break;case"time-only":case"esriFieldTypeTimeOnly":o.push({field:S,dataType:"time-only"});break;case"timestamp-offset":case"esriFieldTypeTimestampOffset":o.push({field:S,dataType:"timestamp-offset"})}}this._fieldsToFixDataTypes=o,o.length>0&&this._fixAllFields(o),this._fieldTypesFixed=!0}isUnknownDateTimeField(u){var o;return"unknown"===(null==(o=this.fieldsIndex)?void 0:o.getTimeZone(u))}_fixAllFields(u){this.attributes={...this.attributes};const o=this.contextTimeZone??"system";for(let g=0;g<u.length;g++){const C=u[g].field,S=u[g].dataType;let M=this.attributes[C];if(void 0===M){for(const u in this.attributes)if(u.toLowerCase()===C.toLowerCase()){if(M=this.attributes[u],null!==M){if("time-only"===S){te$5(M)||(this.attributes[u]=gt.fromReader(M.toString()));break}if("date-only"===S){ee$5(M)||(this.attributes[u]=$t.fromReader(M.toString()));break}if("timestamp-offset"===S){X$6(M)||(this.attributes[u]=pt.fromReaderAsTimeStampOffset(M.toString()));break}const g=this.isUnknownDateTimeField(u);M instanceof Date?this.attributes[u]=g?pt.unknownDateJSToArcadeDate(M):pt.dateJSAndZoneToArcadeDate(M,o):X$6(M)||(this.attributes[u]=g?pt.unknownEpochToArcadeDate(M):pt.epochToArcadeDate(M,o))}break}}else if(null!==M){if("time-only"===S){te$5(M)?this.attributes[C]=M:this.attributes[C]=gt.fromReader(M.toString());continue}if("date-only"===S){ee$5(M)?this.attributes[C]=M:this.attributes[C]=$t.fromReader(M.toString());continue}if("timestamp-offset"===S){X$6(M)?this.attributes[C]=M:this.attributes[C]=pt.fromReaderAsTimeStampOffset(M.toString());continue}const u=this.isUnknownDateTimeField(C);X$6(M)?this.attributes[C]=M:M instanceof Date?this.attributes[C]=u?pt.unknownDateJSToArcadeDate(M):pt.dateJSAndZoneToArcadeDate(M,o):this.attributes[C]=u?pt.unknownEpochToArcadeDate(M):pt.epochToArcadeDate(M,o)}}}geometry(){return null===this._geometry||this._geometry instanceof Ue||(this._optimizedGeomDefinition?(this._geometry=We(rt(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM)),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=We(this._geometry)),this._geometry}field(u){this._fieldTypesFixed||this._fixFieldTypes();const o=this.attributes[u];if(void 0!==o)return o;const g=u.toLowerCase();for(const C in this.attributes)if(C.toLowerCase()===g)return this.attributes[C];if(this._hasFieldDefinition(g))return null;throw new Mt(null,St.FieldNotFound,null,{key:u})}_hasFieldDefinition(u){if(null===this._layer)return!1;for(let o=0;o<this._layer.fields.length;o++)if(this._layer.fields[o].name.toLowerCase()===u)return!0;return!1}setField(u,o){if(this.immutable)throw new Mt(null,St.Immutable,null);if(o instanceof Date&&(o=this.isUnknownDateTimeField(u)?pt.unknownDateJSToArcadeDate(o):pt.dateJSToArcadeDate(o)),!1===Y$6(o))throw new Mt(null,St.TypeNotAllowedInFeature,null);const g=u.toLowerCase();if(void 0===this.attributes[u]){for(const u in this.attributes)if(u.toLowerCase()===g)return void(this.attributes[u]=o);this.attributes[u]=o}else this.attributes[u]=o}hasField(u){const o=u.toLowerCase();if(void 0!==this.attributes[u])return!0;for(const g in this.attributes)if(g.toLowerCase()===o)return!0;return!!this._hasFieldDefinition(o)}keys(){let u=[];const o={};for(const g in this.attributes)u.push(g),o[g.toLowerCase()]=1;if(null!==this._layer)for(let g=0;g<this._layer.fields.length;g++){const C=this._layer.fields[g];1!==o[C.name.toLowerCase()]&&u.push(C.name)}return u=u.sort(),u}static parseGeometryFromDictionary(u,o){const g=D._convertDictionaryToJson(u,!0);return void 0!==g.hasm&&(g.hasM=g.hasm,delete g.hasm),void 0!==g.hasz&&(g.hasZ=g.hasz,delete g.hasz),void 0!==g.spatialreference&&(g.spatialReference=g.spatialreference,delete g.spatialreference),g.spatialReference||(g.spatialReference=o),void 0!==g.rings&&(g.rings=this._fixPathArrays(g.rings,!0===g.hasZ,!0===g.hasZ)),void 0!==g.paths&&(g.paths=this._fixPathArrays(g.paths,!0===g.hasZ,!0===g.hasM)),void 0!==g.points&&(g.points=this._fixPointArrays(g.points,!0===g.hasZ,!0===g.hasM)),We(g)}static _fixPathArrays(u,o,g){const C=[];if(Array.isArray(u))for(let S=0;S<u.length;S++)C.push(this._fixPointArrays(u[S],o,g));else if(u instanceof Ft)for(let S=0;S<u.length();S++)C.push(this._fixPointArrays(u.get(S),o,g));return C}static _fixPointArrays(u,o,C){const S=[];if(Array.isArray(u))for(let M=0;M<u.length;M++){const j=u[M];j instanceof g?o&&C?S.push([j.x,j.y,j.z,j.m]):o?S.push([j.x,j.y,j.z]):C?S.push([j.x,j.y,j.m]):S.push([j.x,j.y]):j instanceof Ft?S.push(j.toArray()):S.push(j)}else if(u instanceof Ft)for(let M=0;M<u.length();M++){const j=u.get(M);j instanceof g?o&&C?S.push([j.x,j.y,j.z,j.m]):o?S.push([j.x,j.y,j.z]):C?S.push([j.x,j.y,j.m]):S.push([j.x,j.y]):j instanceof Ft?S.push(j.toArray()):S.push(j)}return S}static _convertDictionaryToJson(u,o=!1){const g={};for(const C in u.attributes){let S=u.attributes[C];S instanceof on&&(S=D._convertDictionaryToJson(S)),o?g[C.toLowerCase()]=S:g[C]=S}return g}static parseAttributesFromDictionary(u){const o={};for(const g in u.attributes){const C=u.attributes[g];if(!Y$6(C))throw new Mt(null,St.InvalidParameter,null);o[g]=C}return o}static fromJson(u,o){let g=null;null!==u.geometry&&void 0!==u.geometry&&(g=We(u.geometry));const C={};if(null!==u.attributes&&void 0!==u.attributes)for(const S in u.attributes){const o=u.attributes[S];if(null===o)C[S]=o;else{if(!(G$3(o)||E$4(o)||z$6(o)||X$6(o)||te$5(o)||ee$5(o)))throw new Mt(null,St.InvalidParameter,null);C[S]=o}}return D.createFromGraphicLikeObject(g,C,null,o??null)}fullSchema(){return this._layer}gdbVersion(){var u;if(null===this._layer)return"";const o=this._layer.gdbVersion;return void 0===o?"":""===o&&(null==(u=this._layer.capabilities)?void 0:u.isVersioned)?"SDE.DEFAULT":o}castAsJson(u){var o;const g={attributes:{},geometry:!0===(null==u?void 0:u.keepGeometryType)?this.geometry():(null==(o=this.geometry())?void 0:o.toJSON())??null};for(const C in this.attributes){const o=this.attributes[C];void 0!==o&&(g.attributes[C]=Ie$2(o,u))}return g}async castAsJsonAsync(u=null,o){return this.castAsJson(o)}};!function m$5(u){un=u}(cn);const dn={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},fn={functionDefinitions:new Map,constantDefinitions:new Map},hn={functionDefinitions:new Map,constantDefinitions:new Map};for(const Ui of["pi","infinity"])hn.constantDefinitions.set(Ui,{type:"constant"}),fn.constantDefinitions.set(Ui,{type:"constant"});hn.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]}),fn.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const Ui in dn){const u=dn[Ui];hn.functionDefinitions.set(Ui,{overloads:[{type:"function",parametersInfo:{min:u.min,max:u.max}}]}),fn.functionDefinitions.set(Ui,{overloads:[{type:"function",parametersInfo:{min:u.min,max:u.max}}]})}const mn=new Set(["featureset","featuresetbyid","featuresetbyname","featuresetbyassociation","featuresetbyrelationshipname","featuresetbyurl","getfeatureset","getuser","attachments","featuresetbyportalitem","getfeaturesetinfo","filterbysubtypecode","knowledgegraphbyportalitem","querygraph"]),pn=new Set(["disjoint","intersects","touches","crosses","within","contains","overlaps","equals","relate","intersection","nearestvertex","nearestcoordinate","union","difference","symmetricdifference","clip","cut","area","areageodetic","length","length3d","lengthgeodetic","distance","distancegeodetic","densify","densifygeodetic","generalize","buffer","buffergeodetic","offset","rotate","issimple","convexhull","simplify","multiparttosinglepart","pointtocoordinate","distancetocoordinate","measuretocoordinate"]);function m$4(u){return"string"==typeof u||u instanceof String}function o$2(u,o){var g;const C="sync"===o?fn:hn;C.functionDefinitions.has(u.name.toLowerCase())?null==(g=C.functionDefinitions.get(u.name.toLowerCase()))||g.overloads.push({type:"function",parametersInfo:{min:u.min,max:u.max}}):C.functionDefinitions.set(u.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:u.min,max:u.max}}]})}function s$4(u,o){if(u)for(const g of u)r$2(g,o)}function r$2(u,o){if(u&&!1!==o(u))switch(u.type){case"ImportDeclaration":s$4(u.specifiers,o),r$2(u.source,o);break;case"ExportNamedDeclaration":r$2(u.declaration,o);break;case"ArrayExpression":s$4(u.elements,o);break;case"AssignmentExpression":case"BinaryExpression":case"LogicalExpression":r$2(u.left,o),r$2(u.right,o);break;case"BlockStatement":case"Program":s$4(u.body,o);break;case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"Identifier":case"Literal":break;case"CallExpression":r$2(u.callee,o),s$4(u.arguments,o);break;case"ExpressionStatement":r$2(u.expression,o);break;case"ForInStatement":r$2(u.left,o),r$2(u.right,o),r$2(u.body,o);break;case"ForStatement":r$2(u.init,o),r$2(u.test,o),r$2(u.update,o),r$2(u.body,o);break;case"WhileStatement":r$2(u.test,o),r$2(u.body,o);break;case"FunctionDeclaration":r$2(u.id,o),s$4(u.params,o),r$2(u.body,o);break;case"IfStatement":r$2(u.test,o),r$2(u.consequent,o),r$2(u.alternate,o);break;case"MemberExpression":r$2(u.object,o),r$2(u.property,o);break;case"ObjectExpression":s$4(u.properties,o);break;case"Property":r$2(u.key,o),r$2(u.value,o);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":r$2(u.argument,o);break;case"VariableDeclaration":s$4(u.declarations,o);break;case"VariableDeclarator":r$2(u.id,o),r$2(u.init,o);break;case"TemplateLiteral":s$4(u.expressions,o),s$4(u.quasis,o)}}function c$3(u,o){let g=!1;const C=o.toLowerCase();return r$2(u,(u=>!g&&("Identifier"===u.type&&u.name&&u.name.toLowerCase()===C&&(g=!0),!0))),g}function x$5(u){const o=[];return r$2(u,(u=>("ImportDeclaration"===u.type&&u.source&&u.source.value&&o.push({libname:u.specifiers[0].local.name.toLowerCase(),source:u.source.value}),!0))),o}function y$4(u){const o=[];return r$2(u,(u=>("CallExpression"===u.type&&"Identifier"===u.callee.type&&o.push(u.callee.name.toLowerCase()),!0))),o}function d$5(u,o=[]){let g=null;if(void 0===u.usesFeatureSet){null===g&&(g=y$4(u)),u.usesFeatureSet=!1;for(let o=0;o<g.length;o++)mn.has(g[o])&&(u.usesFeatureSet=!0,u.isAsync=!0);if(!1===u.usesFeatureSet&&o&&o.length>0)for(const g of o)if(c$3(u,g)){u.usesFeatureSet=!0,u.isAsync=!0;break}}if(void 0===u.usesModules&&(u.usesModules=!1,x$5(u).length>0&&(u.usesModules=!0)),void 0===u.usesGeometry){u.usesGeometry=!1,null===g&&(g=y$4(u));for(let o=0;o<g.length;o++)pn.has(g[o])&&(u.usesGeometry=!0)}}const $n=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:function F$3(u){function p3(u,o,g){if(u instanceof Ft)return u.toArray();if(U$5(u))return u;throw new Mt(o,St.InvalidParameter,g)}function y2(u,o){const g=u.length,C=Math.floor(g/2);return 0===g?[]:1===g?[u[0]]:function v2(u,o,g){const C=[];for(;u.length>0||o.length>0;)if(u.length>0&&o.length>0){let S=g(u[0],o[0]);isNaN(S)&&(S=0),S<=0?(C.push(u[0]),u=u.slice(1)):(C.push(o[0]),o=o.slice(1))}else u.length>0?(C.push(u[0]),u=u.slice(1)):o.length>0&&(C.push(o[0]),o=o.slice(1));return C}(y2(u.slice(0,C),o),y2(u.slice(C,g),o),o)}async function P3(u,o){const g=u.length,C=Math.floor(g/2);if(0===g)return[];if(1===g)return[u[0]];const S=[await P3(u.slice(0,C),o),await P3(u.slice(C,g),o)];return I2(S[0],S[1],o,[])}async function I2(u,o,g,C){const S=C;if(u.length>0||o.length>0){if(u.length>0&&o.length>0){let M=await g(u[0],o[0]);return isNaN(M)&&(M=1),M<=0?(S.push(u[0]),u=u.slice(1)):(S.push(o[0]),o=o.slice(1)),I2(u,o,g,C)}return u.length>0?(S.push(u[0]),I2(u=u.slice(1),o,g,C)):(S.push(o[0]),I2(u,o=o.slice(1),g,C))}return C}function O2(u,o,g,C){ae$4(g,1,2,u,o);let S=g[0];if(Q$5(S)&&(S=S.toArray()),!1===U$5(S))throw new Mt(u,St.InvalidParameter,o);if(g.length>1){if(!1===_$4(g[1]))throw new Mt(u,St.InvalidParameter,o);let M=S;const j=g[1].createFunction(u);return C?P3(M,j):(M=y2(M,((u,o)=>j(u,o))),M)}let M=S;if(0===M.length)return[];const j={};for(let Ue=0;Ue<M.length;Ue++){const u=L$5(M[Ue]);""!==u&&(j[u]=!0)}if(!0===j.Array||!0===j.Dictionary||!0===j.Feature||!0===j.Point||!0===j.Polygon||!0===j.Polyline||!0===j.Multipoint||!0===j.Extent||!0===j.Function)return M.slice(0);let xe=0,Oe="";for(const Ue in j)xe++,Oe=Ue;return M=xe>1||"String"===Oe?y2(M,((u,o)=>{if(null==u||u===en)return null==o||o===en?0:1;if(null==o||o===en)return-1;const g=me$3(u),C=me$3(o);return g<C?-1:g===C?0:1})):"Number"===Oe?y2(M,((u,o)=>u-o)):"Boolean"===Oe?y2(M,((u,o)=>u===o?0:o?-1:1)):"Date"===Oe?y2(M,((u,o)=>o-u)):M.slice(0),M}u.functions.array=function(o,g){return u.standardFunction(o,g,((u,C,S)=>{if(ae$4(S,0,2,o,g),0===S.length)return[];if(1===S.length&&null===S[0])return[];if(U$5(S[0])){if(2===S.length&&!1===z$6(S[1]))throw new Mt(o,St.InvalidParameter,g);return!0===P$7(S[1],!1)?f$4(S[0]):S[0].slice(0)}if(Q$5(S[0])){if(2===S.length&&!1===z$6(S[1]))throw new Mt(o,St.InvalidParameter,g);return!0===P$7(S[1],!1)?f$4(S[0]):S[0].toArray().slice(0)}const M=ge$2(S[0]);if(isNaN(M)||!1===V$4(M))throw new Mt(o,St.InvalidParameter,g);const j=P$7(S[1],null),xe=new Array(M);return xe.fill(j),xe}))},u.functions.front=function(o,g){return u.standardFunction(o,g,((u,C,S)=>{if(ae$4(S,1,1,o,g),Q$5(S[0])){if(S[0].length()<=0)throw new Mt(o,St.OutOfBounds,g);return S[0].get(0)}if(U$5(S[0])){if(S[0].length<=0)throw new Mt(o,St.OutOfBounds,g);return S[0][0]}throw new Mt(o,St.InvalidParameter,g)}))},u.functions.back=function(o,g){return u.standardFunction(o,g,((u,C,S)=>{if(ae$4(S,1,1,o,g),Q$5(S[0])){if(S[0].length()<=0)throw new Mt(o,St.OutOfBounds,g);return S[0].get(S[0].length()-1)}if(U$5(S[0])){if(S[0].length<=0)throw new Mt(o,St.OutOfBounds,g);return S[0][S[0].length-1]}throw new Mt(o,St.InvalidParameter,g)}))},u.functions.push=function(o,g){return u.standardFunction(o,g,((u,C,S)=>{if(ae$4(S,1,2,o,g),U$5(S[0]))return S[0][S[0].length]=S[1],S[0].length;throw new Mt(o,St.InvalidParameter,g)}))},u.functions.pop=function(o,g){return u.standardFunction(o,g,((u,C,S)=>{if(ae$4(S,1,1,o,g),U$5(S[0])){if(S[0].length<=0)throw new Mt(o,St.OutOfBounds,g);const u=S[0][S[0].length-1];return S[0].length=S[0].length-1,u}throw new Mt(o,St.InvalidParameter,g)}))},u.functions.erase=function(o,g){return u.standardFunction(o,g,((u,C,S)=>{if(ae$4(S,2,2,o,g),U$5(S[0])){let u=ge$2(S[1]);if(isNaN(u)||!1===V$4(u))throw new Mt(o,St.InvalidParameter,g);const C=S[0];if(C.length<=0)throw new Mt(o,St.OutOfBounds,g);if(u<0&&(u=C.length+u),u<0)throw new Mt(o,St.OutOfBounds,g);if(u>=C.length)throw new Mt(o,St.OutOfBounds,g);return C.splice(u,1),en}throw new Mt(o,St.InvalidParameter,g)}))},u.functions.insert=function(o,g){return u.standardFunction(o,g,((u,C,S)=>{if(ae$4(S,3,3,o,g),U$5(S[0])){const u=ge$2(S[1]);if(isNaN(u)||!1===V$4(u))throw new Mt(o,St.InvalidParameter,g);const C=S[2],M=S[0];if(u>M.length)throw new Mt(o,St.OutOfBounds,g);if(u<0&&u<-1*M.length)throw new Mt(o,St.OutOfBounds,g);return u===M.length?(M[u]=C,en):(M.splice(u,0,C),en)}throw new Mt(o,St.InvalidParameter,g)}))},u.functions.resize=function(o,g){return u.standardFunction(o,g,((u,C,S)=>{if(ae$4(S,2,3,o,g),U$5(S[0])){const u=ge$2(S[1]);if(isNaN(u)||!1===V$4(u))throw new Mt(o,St.InvalidParameter,g);if(u<0)throw new Mt(o,St.InvalidParameter,g);const C=P$7(S[2],null),M=S[0];if(M.length>=u)return M.length=u,en;const j=M.length;M.length=u;for(let o=j;o<M.length;o++)M[o]=C;return en}throw new Mt(o,St.InvalidParameter,g)}))},u.functions.includes=function(o,g){return u.standardFunction(o,g,((u,C,S)=>{if(ae$4(S,2,2,o,g),U$5(S[0])){const u=S[1];return S[0].findIndex((o=>ce$3(o,u)))>-1}if(Q$5(S[0])){const u=S[1];return S[0].toArray().findIndex((o=>ce$3(o,u)))>-1}throw new Mt(o,St.InvalidParameter,g)}))},u.functions.slice=function(o,g){return u.standardFunction(o,g,((u,C,S)=>{if(ae$4(S,1,3,o,g),U$5(S[0])){const u=ge$2(P$7(S[1],0)),C=ge$2(P$7(S[2],S[0].length));if(isNaN(u)||!1===V$4(u))throw new Mt(o,St.InvalidParameter,g);if(isNaN(C)||!1===V$4(C))throw new Mt(o,St.InvalidParameter,g);return S[0].slice(u,C)}if(Q$5(S[0])){const u=S[0],C=ge$2(P$7(S[1],0)),M=ge$2(P$7(S[2],u.length()));if(isNaN(C)||!1===V$4(C))throw new Mt(o,St.InvalidParameter,g);if(isNaN(M)||!1===V$4(M))throw new Mt(o,St.InvalidParameter,g);return u.toArray().slice(C,M)}throw new Mt(o,St.InvalidParameter,g)}))},u.functions.splice=function(o,g){return u.standardFunction(o,g,((u,o,g)=>{const C=[];for(let S=0;S<g.length;S++)U$5(g[S])?C.push(...g[S]):Q$5(g[S])?C.push(...g[S].toArray()):C.push(g[S]);return C}))},u.functions.top=function(o,g){return u.standardFunction(o,g,((u,C,S)=>{if(ae$4(S,2,2,o,g),U$5(S[0]))return ge$2(S[1])>=S[0].length?S[0].slice(0):S[0].slice(0,ge$2(S[1]));if(Q$5(S[0]))return ge$2(S[1])>=S[0].length()?S[0].slice(0):S[0].slice(0,ge$2(S[1]));throw new Mt(o,St.InvalidParameter,g)}))},u.functions.first=function(o,g){return u.standardFunction(o,g,((u,C,S)=>(ae$4(S,1,1,o,g),U$5(S[0])?0===S[0].length?null:S[0][0]:Q$5(S[0])?0===S[0].length()?null:S[0].get(0):null)))},"sync"===u.mode&&(u.functions.sort=function(o,g){return u.standardFunction(o,g,((u,g,C)=>O2(o,g,C,!1)))},u.functions.any=function(o,g){return u.standardFunction(o,g,((u,g,C)=>{ae$4(C,2,2,o,g);const S=C[1].createFunction(o),M=p3(C[0],o,g);for(const o of M){const u=S(o);if(z$6(u)&&!0===u)return!0}return!1}))},u.functions.all=function(o,g){return u.standardFunction(o,g,((u,g,C)=>{ae$4(C,2,2,o,g);const S=C[1].createFunction(o),M=p3(C[0],o,g);for(const o of M)if(!0!==S(o))return!1;return!0}))},u.functions.none=function(o,g){return u.standardFunction(o,g,((u,g,C)=>{ae$4(C,2,2,o,g);const S=C[1].createFunction(o),M=p3(C[0],o,g);for(const o of M)if(!0===S(o))return!1;return!0}))},u.functions.reduce=function(o,g){return u.standardFunction(o,g,((u,g,C)=>{ae$4(C,2,3,o,g);const S=C[1].createFunction(o),M=p3(C[0],o,g);return 2===C.length?0===M.length?null:M.reduce(((u,o)=>{const g=S(u,o);return void 0!==g&&g!==en?g:null})):M.reduce(((u,o)=>{const g=S(u,o);return void 0!==g&&g!==en?g:null}),C[2])}))},u.functions.map=function(o,g){return u.standardFunction(o,g,((u,g,C)=>{ae$4(C,2,2,o,g);const S=C[1].createFunction(o),M=p3(C[0],o,g),j=[];for(const o of M){const u=S(o);void 0!==u&&u!==en?j.push(u):j.push(null)}return j}))},u.functions.filter=function(o,g){return u.standardFunction(o,g,((u,g,C)=>{ae$4(C,2,2,o,g);const S=C[1].createFunction(o),M=p3(C[0],o,g),j=[];for(const o of M)!0===S(o)&&j.push(o);return j}))}),"async"===u.mode&&(u.functions.sort=function(o,g){return u.standardFunctionAsync(o,g,(async(u,g,C)=>O2(o,g,C,!0)))},u.functions.any=function(g,C){return u.standardFunctionAsync(g,C,(async(u,C,S)=>{ae$4(S,2,2,g,C);const M=S[1].createFunction(g),j=p3(S[0],g,C);for(const g of j){const u=await M(g);let C=null;if(C=o(C)?await u:u,z$6(C)&&!0===C)return!0}return!1}))},u.functions.all=function(g,C){return u.standardFunctionAsync(g,C,(async(u,C,S)=>{ae$4(S,2,2,g,C);const M=S[1].createFunction(g),j=p3(S[0],g,C);for(const g of j){const u=await M(g);let C=null;if(C=o(C)?await u:u,!0!==C)return!1}return!0}))},u.functions.none=function(g,C){return u.standardFunctionAsync(g,C,(async(u,C,S)=>{ae$4(S,2,2,g,C);const M=S[1].createFunction(g),j=p3(S[0],g,C);for(const g of j){const u=await M(g);let C=null;if(C=o(C)?await u:u,!0===C)return!1}return!0}))},u.functions.filter=function(g,C){return u.standardFunctionAsync(g,C,(async(u,C,S)=>{ae$4(S,2,2,g,C);const M=S[1].createFunction(g),j=p3(S[0],g,C),xe=[];for(const g of j){const u=await M(g);let C=null;C=o(C)?await u:u,!0===C&&xe.push(g)}return xe}))},u.functions.reduce=function(o,g){return u.standardFunctionAsync(o,g,(async(u,g,C)=>{ae$4(C,2,3,o,g);const S=C[1].createFunction(o),M=p3(C[0],o,g);let j;if(C.length>2){const u=P$7(C[2],null);j=M.reduce((async(u,o)=>{let g=await u;return void 0!==g&&g!==en||(g=null),S(g,o)}),Promise.resolve(u))}else{if(0===M.length)return null;j=M.reduce((async(u,o,g)=>{if(g<=1)return S(u,o);let C=await u;return void 0!==C&&C!==en||(C=null),S(C,o)}))}return j.then((u=>void 0!==u&&u!==en?u:null))}))},u.functions.map=function(g,C){return u.standardFunctionAsync(g,C,(async(u,C,S)=>{ae$4(S,2,2,g,C);const M=S[1].createFunction(g),j=p3(S[0],g,C),xe=[];for(const g of j){const u=await M(g);let C=null;C=o(C)?await u:u,void 0!==C&&C!==en?xe.push(C):xe.push(null)}return xe}))})}},Symbol.toStringTag,{value:"Module"}));const gn=[0,31,59,90,120,151,181,212,243,273,304,334],Dn=[0,31,60,91,121,152,182,213,244,274,305,335];function S$2(u){return null===u?u:!1===u.isValid?null:u}function Z$5(u,o){return""===u||"default"===u.toLowerCase().trim()?He(o):"z"===u||"Z"===u?"UTC":u}function p$4(u,o){return ee$5(u)?u.toArcadeDate():he$3(u,He(o))}function C$4(u,o){u.today=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,0,0,u,g);const M=new Date;return M.setHours(0,0,0,0),pt.dateJSAndZoneToArcadeDate(M,He(u))}))},u.time=function(u,g){return o(u,g,((o,C,S)=>{switch(ae$4(S,0,4,u,g),S.length){case 0:{const o=pt.nowToArcadeDate(He(u));return new gt(o.hour,o.minute,o.second,o.millisecond)}case 1:{if(te$5(S[0]))return S[0].clone();if(X$6(S[0]))return new gt(S[0].hour,S[0].minute,S[0].second,S[0].millisecond);if(ee$5(S[0]))return new gt(0,0,0,0);if(G$3(S[0]))return gt.fromString(S[0]);const u=ge$2(S[0]);return!1===isNaN(u)?gt.fromMilliseconds(u):null}case 2:return G$3(S[0])&&G$3(S[1])?gt.fromString(S[0],S[1]):gt.fromParts(ge$2(S[0]),ge$2(S[1]),0,0);case 3:return gt.fromParts(ge$2(S[0]),ge$2(S[1]),ge$2(S[2]),0);case 4:return gt.fromParts(ge$2(S[0]),ge$2(S[1]),ge$2(S[2]),ge$2(S[3]))}throw new Mt(u,St.InvalidParameter,g)}))},u.dateonly=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,0,3,u,g),3===S.length)return $t.fromParts(ge$2(S[0]),ge$2(S[1])+1,ge$2(S[2]));if(2===S.length){const u=me$3(S[1]);return""===u?null:"X"===u?$t.fromSeconds(ge$2(S[0])):"x"===u?$t.fromMilliseconds(ge$2(S[0])):$t.fromString(me$3(S[0]),u)}if(1===S.length){if(G$3(S[0])){if(""===S[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(S[0]))return $t.fromString(S[0]+"-01-01")}if(ee$5(S[0]))return S[0].clone();if(X$6(S[0]))return $t.fromParts(S[0].year,S[0].monthJS+1,S[0].day);const u=ge$2(S[0]);return!1===isNaN(u)?$t.fromMilliseconds(u):G$3(S[0])?$t.fromString(S[0]):null}if(0===S.length){const o=pt.nowToArcadeDate(He(u));return!1===o.isValid?null:$t.fromParts(o.year,o.monthJS+1,o.day)}return null}))},u.changetimezone=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,2,2,u,g),null===S[0])return null;if(ee$5(S[0]))throw new Mt(u,St.CannotChangeTimeZoneDateOnly,g);if(ee$5(S[0]))throw new Mt(u,St.CannotChangeTimeZoneTime,g);const M=he$3(S[0],He(u));if(null===M)throw new Mt(u,St.InvalidParameter,g);const j=Dt(Z$5(me$3(S[1]),u),!1);if(null===j)return null;const xe=pt.arcadeDateAndZoneToArcadeDate(M,j);return!1===xe.isValid?null:xe}))},u.timezone=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,2,u,g),te$5(S[0]))return"Unknown";if(ee$5(S[0]))return"Unknown";const M=he$3(S[0],He(u));if(null===M)return null;const j=M.timeZone;return"system"===j?pt.systemTimeZoneCanonicalName:"utc"===j.toLowerCase()?"UTC":"unknown"===j.toLowerCase()?"Unknown":j}))},u.timezoneoffset=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=he$3(S[0],He(u));return null===M?null:60*M.timeZoneOffset*1e3}))},u.now=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,0,0,u,g);const M=pt.nowToArcadeDate(He(u));return!1===M.isValid?null:M}))},u.timestamp=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,0,0,u,g);const M=pt.nowUTCToArcadeDate();return!1===M.isValid?null:M}))},u.toutc=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=he$3(S[0],He(u));return null===M?null:M.toUTC()}))},u.tolocal=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=he$3(S[0],He(u));return null===M?null:M.toLocal()}))},u.day=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=p$4(S[0],He(u));return null===M?NaN:M.day}))},u.month=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=p$4(S[0],He(u));return null===M?NaN:M.monthJS}))},u.year=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=p$4(S[0],He(u));return null===M?NaN:M.year}))},u.hour=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,1,u,g),te$5(S[0]))return S[0].hour;const M=he$3(S[0],He(u));return null===M?NaN:M.hour}))},u.second=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,1,u,g),te$5(S[0]))return S[0].second;const M=he$3(S[0],He(u));return null===M?NaN:M.second}))},u.millisecond=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,1,u,g),te$5(S[0]))return S[0].millisecond;const M=he$3(S[0],He(u));return null===M?NaN:M.millisecond}))},u.minute=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,1,u,g),te$5(S[0]))return S[0].minute;const M=he$3(S[0],He(u));return null===M?NaN:M.minute}))},u.week=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,2,u,g);const M=p$4(S[0],He(u));if(null===M)return NaN;const j=ge$2(P$7(S[1],0));if(j<0||j>6)throw new Mt(u,St.InvalidParameter,g);const xe=M.day,Oe=M.monthJS,Ue=M.year,Je=M.dayOfWeekJS,We=function k$4(u,o,g){return u+(function T$5(u){return u%4==0&&(u%100!=0||u%400==0)}(g)?Dn:gn)[o]}(xe,Oe,Ue)-1,Xe=Math.floor(We/7);return Je-j+(Je-j<0?7:0)<We-7*Xe?Xe+1:Xe}))},u.weekday=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=p$4(S[0],He(u));return null===M?NaN:M.dayOfWeekJS}))},u.isoweekday=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=p$4(S[0],He(u));return null===M?NaN:M.dayOfWeekISO}))},u.isomonth=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=p$4(S[0],He(u));return null===M?NaN:M.monthISO}))},u.isoweek=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=p$4(S[0],He(u));return null===M?NaN:M.weekISO}))},u.isoyear=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=p$4(S[0],He(u));return null===M?NaN:M.yearISO}))},u.date=function(u,g){return o(u,g,((o,C,M)=>{if(ae$4(M,0,8,u,g),3===M.length){if(ee$5(M[0])&&te$5(M[1])&&G$3(M[2])){const o=Dt(Z$5(me$3(M[2])??"unknown",u),!1);return null===o?null:S$2(pt.fromParts(M[0].year,M[0].month,M[0].day,M[1].hour,M[1].minute,M[1].second,M[1].millisecond,o))}return S$2(pt.fromParts(ge$2(M[0]),ge$2(M[1])+1,ge$2(M[2]),0,0,0,0,He(u)))}if(4===M.length)return S$2(pt.fromParts(ge$2(M[0]),ge$2(M[1])+1,ge$2(M[2]),ge$2(M[3]),0,0,0,He(u)));if(5===M.length)return S$2(pt.fromParts(ge$2(M[0]),ge$2(M[1])+1,ge$2(M[2]),ge$2(M[3]),ge$2(M[4]),0,0,He(u)));if(6===M.length)return S$2(pt.fromParts(ge$2(M[0]),ge$2(M[1])+1,ge$2(M[2]),ge$2(M[3]),ge$2(M[4]),ge$2(M[5]),0,He(u)));if(7===M.length)return S$2(pt.fromParts(ge$2(M[0]),ge$2(M[1])+1,ge$2(M[2]),ge$2(M[3]),ge$2(M[4]),ge$2(M[5]),ge$2(M[6]),He(u)));if(8===M.length){const o=Dt(Z$5(me$3(M[7])??"unknown",u),!1);return null===o?null:S$2(pt.fromParts(ge$2(M[0]),ge$2(M[1])+1,ge$2(M[2]),ge$2(M[3]),ge$2(M[4]),ge$2(M[5]),ge$2(M[6]),o))}if(2===M.length){if(ee$5(M[0])&&G$3(M[1])){const o=Dt(Z$5(me$3(M[1])??"unknown",u),!1);return null===o?null:S$2(pt.fromParts(M[0].year,M[0].month,M[0].day,0,0,0,0,o))}if(ee$5(M[0])&&te$5(M[1]))return S$2(pt.fromParts(M[0].year,M[0].month,M[0].day,M[1].hour,M[1].minute,M[1].second,M[1].millisecond,"unknown"));let o,g=me$3(M[1]);return""===g?null:(g=se$4(g,!0),o="X"===g?S.fromSeconds(ge$2(M[0])):"x"===g?S.fromMillis(ge$2(M[0])):S.fromFormat(me$3(M[0]),g,{locale:Je(),numberingSystem:"latn"}),o.isValid?pt.dateTimeToArcadeDate(o):null)}if(1===M.length){if(ee$5(M[0]))return S$2(pt.fromParts(M[0].year,M[0].month,M[0].day,0,0,0,0,"unknown"));if(G$3(M[0])){if(""===M[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(M[0]))return he$3(M[0]+"-01-01",He(u))}const o=ge$2(M[0]);if(!1===isNaN(o)){const g=S.fromMillis(o);return g.isValid?pt.dateTimeAndZoneToArcadeDate(g,He(u)):null}return he$3(M[0],He(u))}return 0===M.length?pt.nowToArcadeDate(He(u)):null}))},u.datediff=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,2,4,u,g),te$5(S[0]))return te$5(S[1])?S[0].difference(S[1],me$3(S[2])):NaN;if(te$5(S[1]))return NaN;if(ee$5(S[0]))return ee$5(S[1])?S[0].difference(S[1],me$3(S[2])):NaN;if(ee$5(S[1]))return NaN;let M=he$3(S[0],He(u)),j=he$3(S[1],He(u));if(null===M||null===j)return NaN;let xe=P$7(S[3],"");switch(""!==xe&&null!==xe?(xe=Z$5(me$3(xe),u),M=pt.arcadeDateAndZoneToArcadeDate(M,xe),j=pt.arcadeDateAndZoneToArcadeDate(j,xe)):M.timeZone!==j.timeZone&&(M.isUnknownTimeZone?M=pt.arcadeDateAndZoneToArcadeDate(M,j.timeZone):(j.isUnknownTimeZone,j=pt.arcadeDateAndZoneToArcadeDate(j,M.timeZone))),me$3(S[2]).toLowerCase()){case"days":case"day":case"d":return M.diff(j,"days");case"months":case"month":return M.diff(j,"months");case"minutes":case"minute":case"m":return"M"===S[2]?M.diff(j,"months"):M.diff(j,"minutes");case"seconds":case"second":case"s":return M.diff(j,"seconds");case"milliseconds":case"millisecond":case"ms":default:return M.diff(j);case"hours":case"hour":case"h":return M.diff(j,"hours");case"years":case"year":case"y":return M.diff(j,"years")}}))},u.dateadd=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,2,3,u,g);let M=ge$2(S[1]);if(isNaN(M)||M===1/0||M===-1/0)return te$5(S[0])||ee$5(S[0])?S[0].clone():he$3(S[0],He(u));let j="milliseconds";switch(me$3(S[2]).toLowerCase()){case"days":case"day":case"d":j="days",M=ee$5(S[0])?M:ie$4(M);break;case"months":case"month":j="months",M=ee$5(S[0])?M:ie$4(M);break;case"minutes":case"minute":case"m":j="M"===S[2]?"months":"minutes";break;case"seconds":case"second":case"s":j="seconds";break;case"milliseconds":case"millisecond":case"ms":j="milliseconds";break;case"hours":case"hour":case"h":j="hours";break;case"years":case"year":case"y":j="years"}if(te$5(S[0]))return S[0].plus(j,M);if(ee$5(S[0]))return S[0].plus(j,M);const xe=he$3(S[0],He(u));return null===xe?null:xe.plus({[j]:M})}))}}function r$1(u,o,g){return Math.sqrt((u[0]-o[0])**2+(u[1]-o[1])**2+(void 0!==u[2]&&void 0!==o[2]?(u[2]*g-o[2]*g)**2:0))}function o$1(u,o,g){return(u[0]-o[0])**2+(u[1]-o[1])**2+(void 0!==u[2]&&void 0!==o[2]?(u[2]*g-o[2]*g)**2:0)}const yn=[];for(const Ui of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const u=Ui[0];for(let o=1;o<Ui.length;o++)yn[Ui[o]]=u}const wn=[];function c$2(u){return u.vcsWkid&&void 0!==yn[u.vcsWkid]?wn[yn[u.vcsWkid]]:u.latestVcsWkid&&void 0!==yn[u.latestVcsWkid]?wn[yn[u.latestVcsWkid]]:1}function f$3(u,o,g){const C={x:0,y:0};o&&(C.z=0),g&&(C.m=0);let S=0,M=u[0];for(let j=0;j<u.length;j++){const xe=u[j];if(!1===x$4(xe,M)){const u=h$3(M,xe,o),j=u$3(M,xe,o,g);j.x*=u,j.y*=u,C.x+=j.x,C.y+=j.y,o&&(j.z*=u,C.z+=j.z),g&&(j.m*=u,C.m+=j.m),S+=u,M=xe}}return S>0?(C.x/=S,C.y/=S,o&&(C.z/=S),g&&(C.m/=S)):(C.x=u[0][0],C.y=u[0][1],o&&(C.z=u[0][2]),g&&o?C.m=u[0][3]:g&&(C.m=u[0][2])),C}function u$3(u,o,g,C){const S={x:(u[0]+o[0])/2,y:(u[1]+o[1])/2};return g&&(S.z=(u[2]+o[2])/2),g&&C?S.m=(u[3]+o[3])/2:C&&(S.m=(u[2]+o[2])/2),S}function a$2(u,o){if(u.length<=1)return 0;let g=0;for(let C=1;C<u.length;C++)g+=h$3(u[C-1],u[C],o);return g}function h$3(u,o,g){const C=o[0]-u[0],S=o[1]-u[1];if(g){const u=o[2]-o[2];return Math.sqrt(C*C+S*S+u*u)}return Math.sqrt(C*C+S*S)}function l$4(u,o,g){const C=o[0]-u[0],S=o[1]-u[1];return C*C+S*S}function x$4(u,o){if(u.length!==o.length)return!1;for(let g=0;g<u.length;g++)if(u[g]!==o[g])return!1;return!0}function y$3(u){const o={x:0,y:0,spatialReference:u.spatialReference.toJSON()},C={x:0,y:0,spatialReference:u.spatialReference.toJSON()};let S=0,M=0;for(let g=0;g<u.paths.length;g++){if(0===u.paths[g].length)continue;const j=a$2(u.paths[g],!0===u.hasZ);if(0===j){const C=f$3(u.paths[g],!0===u.hasZ,!0===u.hasM);o.x+=C.x,o.y+=C.y,!0===u.hasZ&&(o.z+=C.z),!0===u.hasM&&(o.m+=C.m),++S}else{const o=f$3(u.paths[g],!0===u.hasZ,!0===u.hasM);C.x+=o.x*j,C.y+=o.y*j,!0===u.hasZ&&(C.z+=o.z*j),!0===u.hasM&&(C.m+=o.m*j),M+=j}}return M>0?(C.x/=M,C.y/=M,!0===u.hasZ&&(C.z/=M),!0===u.hasM&&(C.m/=M),new g(C)):S>0?(o.x/=S,o.y/=S,!0===u.hasZ&&(C.z/=S),!0===u.hasM&&(o.m/=S),new g(o)):null}function m$3(u){if(0===u.points.length)return null;let o=0,C=0,S=0,M=0;for(let g=0;g<u.points.length;g++){const j=u.getPoint(g);!0===j.hasZ&&(S+=j.z),!0===j.hasM&&(M+=j.m),o+=j.x,C+=j.y,M+=j.m}const j={x:o/u.points.length,y:C/u.points.length,spatialReference:null};return j.spatialReference=u.spatialReference.toJSON(),!0===u.hasZ&&(j.z=S/u.points.length),!0===u.hasM&&(j.m=M/u.points.length),new g(j)}function M$6(u,o,g=0){for(;u<g;)u+=o;const C=g+o;for(;u>=C;)u-=o;return u}function z$5(u,o){return Math.atan2(o.y-u.y,o.x-u.x)}function P$5(u,o,g){const C={x:u.x-o.x,y:u.y-o.y},S={x:g.x-o.x,y:g.y-o.y};return Math.atan2(function g$4(u,o){return u.x*o.y-o.x*u.y}(C,S),function p$3(u,o){return u.x*o.x+u.y*o.y}(C,S))}wn[9002]=.3048,wn[9003]=.3048006096012192,wn[9095]=.3048007491;const xn=[0,0];function k$3(u){for(let o=0;o<u.length;o++){const g=u[o];for(let S=0;S<g.length-1;S++){const C=g[S],M=g[S+1];for(let g=o+1;g<u.length;g++)for(let o=0;o<u[g].length-1;o++){const S=u[g][o],j=u[g][o+1];if(at(C,M,S,j,xn)&&!(xn[0]===C[0]&&xn[1]===C[1]||xn[0]===S[0]&&xn[1]===S[1]||xn[0]===M[0]&&xn[1]===M[1]||xn[0]===j[0]&&xn[1]===j[1]))return!0}}const C=g.length;if(!(C<3))for(let u=0;u<=C-2;u++){const o=g[u],S=g[u+1];for(let M=u+2;M<=C-2;M++){const u=g[M],C=g[M+1];if(at(o,S,u,C,xn)&&!(xn[0]===o[0]&&xn[1]===o[1]||xn[0]===u[0]&&xn[1]===u[1]||xn[0]===S[0]&&xn[1]===S[1]||xn[0]===C[0]&&xn[1]===C[1]))return!0}}}return!1}function w$3(u,o,g){const C=[g[0]-o[0],g[1]-o[1],g[2]-o[2]],S=function W$6(u,o,g){return Math.max(o,Math.min(g,u))}(function j$2(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]}(C,[u[0]-o[0],u[1]-o[1],u[2]-o[2]])/function q$4(u){return u[0]*u[0]+u[1]*u[1]+u[2]*u[2]}(C),0,1);return[o[0]+(g[0]-o[0])*S,o[1]+(g[1]-o[1])*S,o[2]+(g[2]-o[2])*S]}function J$6(u,o,g){let C=0;const S=g[0]-o[0],M=g[1]-o[1],j=S*S+M*M;return 0===j?C=.5:(C=((u[0]-o[0])*S+(u[1]-o[1])*M)/j,C<0?C=0:C>1&&(C=1)),C<=.5?[o[0]+(g[0]-o[0])*C,o[1]+(g[1]-o[1])*C]:[g[0]-(g[0]-o[0])*(1-C),g[1]-(g[1]-o[1])*(1-C)]}function L$4(u,o){u.ringisclockwise=function(u,C){return o(u,C,((o,S,M)=>{ae$4(M,1,1,u,C);let j=[];if(null===M[0])return!1;if(U$5(M[0]))for(const xe of M[0]){if(!(xe instanceof g))throw new Mt(u,St.InvalidParameter,C);j.push(xe.hasZ?xe.hasM?[xe.x,xe.y,xe.z,xe.m]:[xe.x,xe.y,xe.z]:[xe.x,xe.y])}else if(M[0]instanceof zt)j=M[0]._elements;else{if(!Q$5(M[0]))throw new Mt(u,St.InvalidParameter,C);for(const o of M[0].toArray()){if(!(o instanceof g))throw new Mt(u,St.InvalidParameter,C);j.push(o.hasZ?o.hasM?[o.x,o.y,o.z,o.m]:[o.x,o.y,o.z]:[o.x,o.y])}}return!(j.length<3)&&Xe(j)}))},u.polygon=function(u,g){return o(u,g,((o,C,S)=>{let M;if(ae$4(S,1,1,u,g),S[0]instanceof on){const o=Ze$1(cn.parseGeometryFromDictionary(S[0],u.spatialReference),u.spatialReference);if(o instanceof j==0)throw new Mt(u,St.InvalidParameter,g);M=o}else if(S[0]instanceof j)M=We(S[0].toJSON());else{const o=JSON.parse(S[0]);o&&!o.spatialReference&&(o.spatialReference=u.spatialReference),M=Ze$1(new j(o),u.spatialReference)}if(null!==M&&!1===M.spatialReference.equals(u.spatialReference))throw new Mt(u,St.WrongSpatialReference,g);return Ae$1(M)}))},u.polyline=function(u,g){return o(u,g,((o,C,S)=>{let M;if(ae$4(S,1,1,u,g),S[0]instanceof on){const o=Ze$1(cn.parseGeometryFromDictionary(S[0],u.spatialReference),u.spatialReference);if(o instanceof xe==0)throw new Mt(u,St.InvalidParameter,g);M=o}else if(S[0]instanceof xe)M=We(S[0].toJSON());else{const o=JSON.parse(S[0]);o&&!o.spatialReference&&(o.spatialReference=u.spatialReference),M=Ze$1(new xe(o),u.spatialReference)}if(null!==M&&!1===M.spatialReference.equals(u.spatialReference))throw new Mt(u,St.WrongSpatialReference,g);return Ae$1(M)}))},u.point=function(u,C){return o(u,C,((o,S,M)=>{let j;if(ae$4(M,1,1,u,C),M[0]instanceof on){const o=Ze$1(cn.parseGeometryFromDictionary(M[0],u.spatialReference),u.spatialReference);if(o instanceof g==0)throw new Mt(u,St.InvalidParameter,C);j=o}else if(M[0]instanceof g)j=We(M[0].toJSON());else{const o=JSON.parse(M[0]);o&&!o.spatialReference&&(o.spatialReference=u.spatialReference),j=Ze$1(new g(o),u.spatialReference)}if(null!==j&&!1===j.spatialReference.equals(u.spatialReference))throw new Mt(u,St.WrongSpatialReference,C);return Ae$1(j)}))},u.multipoint=function(u,g){return o(u,g,((o,C,S)=>{let M;if(ae$4(S,1,1,u,g),S[0]instanceof on){const o=Ze$1(cn.parseGeometryFromDictionary(S[0],u.spatialReference),u.spatialReference);if(o instanceof Oe==0)throw new Mt(u,St.InvalidParameter,g);M=o}else if(S[0]instanceof Oe)M=We(S[0].toJSON());else{const o=JSON.parse(S[0]);o&&!o.spatialReference&&(o.spatialReference=u.spatialReference),M=Ze$1(new Oe(o),u.spatialReference)}if(null!==M&&!1===M.spatialReference.equals(u.spatialReference))throw new Mt(u,St.WrongSpatialReference,g);return Ae$1(M)}))},u.extent=function(u,C){return o(u,C,((o,S,Ue)=>{var Je,Xe,Qe;ae$4(Ue=Fe$2(Ue),1,1,u,C);let et=null;if(Ue[0]instanceof on)et=Ze$1(cn.parseGeometryFromDictionary(Ue[0],u.spatialReference),u.spatialReference);else if(Ue[0]instanceof g){const u={xmin:Ue[0].x,ymin:Ue[0].y,xmax:Ue[0].x,ymax:Ue[0].y,spatialReference:Ue[0].spatialReference.toJSON()},o=Ue[0];o.hasZ?(u.zmin=o.z,u.zmax=o.z):o.hasM&&(u.mmin=o.m,u.mmax=o.m),et=We(u)}else if(Ue[0]instanceof j)et=We(null==(Je=Ue[0].extent)?void 0:Je.toJSON());else if(Ue[0]instanceof xe)et=We(null==(Xe=Ue[0].extent)?void 0:Xe.toJSON());else if(Ue[0]instanceof Oe)et=We(null==(Qe=Ue[0].extent)?void 0:Qe.toJSON());else if(Ue[0]instanceof M)et=We(Ue[0].toJSON());else{const o=JSON.parse(Ue[0]);o&&!o.spatialReference&&(o.spatialReference=u.spatialReference),et=Ze$1(new M(o),u.spatialReference)}if(null!==et&&!1===et.spatialReference.equals(u.spatialReference))throw new Mt(u,St.WrongSpatialReference,C);return Ae$1(et)}))},u.geometry=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);let M=null;if(null===S[0])return null;if(H$7(S[0]))M=Ze$1(S[0].geometry(),u.spatialReference);else if(S[0]instanceof on)M=Ze$1(cn.parseGeometryFromDictionary(S[0],u.spatialReference),u.spatialReference);else{const o=JSON.parse(S[0]);o&&!o.spatialReference&&(o.spatialReference=u.spatialReference),M=Ze$1(We(o),u.spatialReference)}if(null!==M&&!1===M.spatialReference.equals(u.spatialReference))throw new Mt(u,St.WrongSpatialReference,g);return Ae$1(M)}))},u.setgeometry=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,2,2,u,g),!H$7(S[0]))throw new Mt(u,St.InvalidParameter,g);if(!0===S[0].immutable)throw new Mt(u,St.Immutable,g);if(!(S[1]instanceof Ue||null===S[1]))throw new Mt(u,St.InvalidParameter,g);return S[0]._geometry=S[1],en}))},u.feature=function(u,g){return o(u,g,((o,C,S)=>{if(0===S.length)throw new Mt(u,St.WrongNumberOfParameters,g);let M;if(1===S.length)if(G$3(S[0]))M=cn.fromJson(JSON.parse(S[0]),u.timeZone);else if(H$7(S[0]))M=cn.createFromArcadeFeature(S[0]);else if(S[0]instanceof Ue)M=cn.createFromGraphicLikeObject(S[0],null,null,u.timeZone);else{if(!(S[0]instanceof on))throw new Mt(u,St.InvalidParameter,g);{let o=S[0].hasField("geometry")?S[0].field("geometry"):null,g=S[0].hasField("attributes")?S[0].field("attributes"):null;null!==o&&o instanceof on&&(o=cn.parseGeometryFromDictionary(o,u.spatialReference)),null!==g&&(g=cn.parseAttributesFromDictionary(g)),M=cn.createFromGraphicLikeObject(o,g,null,u.timeZone)}}else if(2===S.length){let o=null,C=null;if(null!==S[0])if(S[0]instanceof Ue)o=S[0];else{if(!(o instanceof on))throw new Mt(u,St.InvalidParameter,g);o=cn.parseGeometryFromDictionary(S[0],u.spatialReference)}if(null!==S[1]){if(!(S[1]instanceof on))throw new Mt(u,St.InvalidParameter,g);C=cn.parseAttributesFromDictionary(S[1])}M=cn.createFromGraphicLikeObject(o,C,null,u.timeZone)}else{let o=null;const C={};if(null!==S[0])if(S[0]instanceof Ue)o=S[0];else{if(!(o instanceof on))throw new Mt(u,St.InvalidParameter,g);o=cn.parseGeometryFromDictionary(S[0],u.spatialReference)}for(let M=1;M<S.length;M+=2){const o=me$3(S[M]),j=S[M+1];if(!(null==j||G$3(j)||isNaN(j)||X$6(j)||E$4(j)||te$5(j)||ee$5(j)||z$6(j)))throw new Mt(u,St.InvalidParameter,g);if(_$4(j)||!1===Y$6(j))throw new Mt(u,St.InvalidParameter,g);C[o]=j===en?null:j}M=cn.createFromGraphicLikeObject(o,C,null,u.timeZone)}return M._geometry=Ze$1(M.geometry(),u.spatialReference),M.immutable=!1,M}))},u.dictionary=function(u,g){return o(u,g,((o,C,S)=>{if(0===S.length||1===S.length&&null===S[0]){const u=new on;return u.immutable=!1,u}if(1===S.length&&G$3(S[0]))try{const o=JSON.parse(S[0]),g=on.convertObjectToArcadeDictionary(o,He(u),!1);return g.immutable=!1,g}catch(xe){throw new Mt(u,St.InvalidParameter,g)}if(1===S.length&&S[0]instanceof Ue)try{const o=S[0].toJSON();o.hasZ=!0===S[0].hasZ,o.hasM=!0===S[0].hasM;const g=on.convertObjectToArcadeDictionary(o,He(u),!1);return g.immutable=!1,g}catch(xe){throw new Mt(u,St.InvalidParameter,g)}if(1===S.length&&H$7(S[0]))try{const u=new on;u.immutable=!1,u.setField("geometry",S[0].geometry());const o=new on;o.immutable=!1,u.setField("attributes",o);for(const g of S[0].keys())o.setField(g,S[0].field(g));return u}catch(xe){throw new Mt(u,St.InvalidParameter,g)}if(1===S.length&&S[0]instanceof on)try{const u=new on;u.immutable=!1;for(const o of S[0].keys())u.setField(o,S[0].field(o));return u}catch(xe){throw new Mt(u,St.InvalidParameter,g)}if(2===S.length&&S[0]instanceof on&&z$6(S[1]))try{if(!0!==S[1]){const u=new on;u.immutable=!1;for(const o of S[0].keys())u.setField(o,S[0].field(o));return u}return S[0].deepClone()}catch(xe){throw new Mt(u,St.InvalidParameter,g)}if(S.length%2!=0)throw new Mt(u,St.WrongNumberOfParameters,g);const M={};for(let Oe=0;Oe<S.length;Oe+=2){const o=me$3(S[Oe]),C=S[Oe+1];if(!(null==C||G$3(C)||isNaN(C)||X$6(C)||E$4(C)||z$6(C)||ee$5(C)||te$5(C)||U$5(C)||Q$5(C)))throw new Mt(u,St.InvalidParameter,g);if(_$4(C))throw new Mt(u,St.InvalidParameter,g);M[o]=C===en?null:C}const j=new on(M);return j.immutable=!1,j}))},u.haskey=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,2,2,u,g);const M=me$3(S[1]);if(H$7(S[0]))return S[0].hasField(M);if(S[0]instanceof on)return S[0].hasField(M);if(S[0]instanceof Ue){const u=d$6(S[0],M,null,null,2);return!u||"notfound"!==u.keystate}throw new Mt(u,St.InvalidParameter,g)}))},u.hasvalue=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,2,2,u,g),null!=p$7(S[0],S[1]))))},u.indexof=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,2,2,u,g);const M=S[1];if(U$5(S[0])){for(let u=0;u<S[0].length;u++)if(ce$3(M,S[0][u]))return u;return-1}if(Q$5(S[0])){const u=S[0].length();for(let o=0;o<u;o++)if(ce$3(M,S[0].get(o)))return o;return-1}throw new Mt(u,St.InvalidParameter,g)}))},u.angle=function(u,C){return o(u,C,((o,S,M)=>{if(ae$4(M=Fe$2(M),2,3,u,C),!(M[0]instanceof g))throw new Mt(u,St.InvalidParameter,C);if(!(M[1]instanceof g))throw new Mt(u,St.InvalidParameter,C);if(M.length>2&&!(M[2]instanceof g))throw new Mt(u,St.InvalidParameter,C);return 2===M.length?function d$4(u,o){return M$6(z$5(u,o),2*Math.PI)*(180/Math.PI)}(M[0],M[1]):function Z$4(u,o,g){return it(M$6(P$5(u,o,g),2*Math.PI))}(M[0],M[1],M[2])}))},u.bearing=function(u,C){return o(u,C,((o,S,M)=>{if(ae$4(M=Fe$2(M),2,3,u,C),!(M[0]instanceof g))throw new Mt(u,St.InvalidParameter,C);if(!(M[1]instanceof g))throw new Mt(u,St.InvalidParameter,C);if(M.length>2&&!(M[2]instanceof g))throw new Mt(u,St.InvalidParameter,C);return 2===M.length?function v$3(u,o){return M$6(Math.PI/2-z$5(u,o),2*Math.PI)*(180/Math.PI)}(M[0],M[1]):function I$4(u,o,g){return it(M$6(-1*P$5(u,o,g),2*Math.PI))}(M[0],M[1],M[2])}))},u.isselfintersecting=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S=Fe$2(S),1,1,u,g);let M=S[0];if(M instanceof j)return M.isSelfIntersecting;if(M instanceof xe)return k$3(M.paths);if(M instanceof Oe){const u=M.points;for(let o=0;o<u.length;o++)for(let g=0;g<u.length;g++)if(g!==o){let C=!0;for(let S=0;S<u[o].length;S++)if(u[o][S]!==u[g][S]){C=!1;break}if(!0===C)return!0}}if(U$5(M)||Q$5(M)){const o=Me$2(M,u.spatialReference);return null!==o&&(M=o.paths),k$3(M)}return!1}))}}function f$2(u,o,g){const C=o[0]-u[0],S=o[1]-u[1];return Math.sqrt(C*C+S*S)}function h$2(u){const o=function u$2(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1]+u[2]*u[2])}(u);return[u[0]/o,u[1]/o,u[2]/o]}function p$2(u,o,g,C){const S=h$2([o[0]-u[0],o[1]-u[1],o[2]*C-u[2]*C]);return[u[0]+S[0]*g,u[1]+S[1]*g,u[2]+S[2]*g]}function m$2(u,o,g,C){return u+(o-u)/g*C}function d$3(u,o,g){let C=o[0]-u[0],S=o[1]-u[1];const M=Math.sqrt(C*C+S*S);return C/=M,S/=M,C*=g,S*=g,[u[0]+C,u[1]+S]}function y$2(u,o){if(!u)return null;switch(u.type){case"extent":case"multipoint":case"mesh":case"point":return null}const C="polygon"===u.type?u.rings:u.paths;let S=1;if((u.spatialReference.vcsWkid||u.spatialReference.latestVcsWkid)&&(S=c$2(u.spatialReference)/st(u.spatialReference)),0===C.length)return null;if(0===C[0].length)return null;if(!1===u.hasM)return null;let M=-1,j=0;const xe=u.hasZ?r$1:f$2,Oe=u.hasZ?3:2;for(const Ue of C){if(M++,Ue.length>0&&Ue[0][Oe]===o)return{partId:M,distanceAlong:j,coordinate:new g({hasZ:u.hasZ,hasM:u.hasM,spatialReference:u.spatialReference,x:Ue[0][0],y:Ue[0][1],...u.hasZ?{z:Ue[0][2]}:{},...u.hasM?{m:Ue[0][Oe]}:{}}),segmentId:0};let C=-1;for(let Je=1;Je<Ue.length;Je++){const We=xe(Ue[Je-1],Ue[Je],S);C++;const Xe=Ue[Je][Oe]-Ue[Je-1][Oe],Qe=Ue[Je][Oe];if(Qe===o)return{partId:M,distanceAlong:We+j,coordinate:new g({hasZ:u.hasZ,hasM:u.hasM,spatialReference:u.spatialReference,x:Ue[Je][0],y:Ue[Je][1],...u.hasZ?{z:Ue[Je][2]}:{},...u.hasM?{m:Ue[Je][Oe]}:{}}),segmentId:C};if(Qe>o&&o>Ue[Je-1][Oe]){const Qe=(o-Ue[Je-1][Oe])/Xe*We;let et=u.hasZ?p$2(Ue[Je-1],Ue[Je],Qe,S):d$3(Ue[Je-1],Ue[Je],Qe);et=[...et,o];const tt=new g({hasZ:u.hasZ,hasM:u.hasM,spatialReference:u.spatialReference,x:et[0],y:et[1],...u.hasZ?{z:et[2]}:{},...u.hasM?{m:et[Oe]}:{}});return{partId:M,distanceAlong:j+xe(Ue[Je-1],[tt.x,tt.y,...tt.hasZ?[tt.z]:[],...tt.hasM?[tt.m]:[]],S),coordinate:tt,segmentId:C}}j+=We}}return null}function Z$3(u,o){if(!u)return null;switch(u.type){case"extent":case"multipoint":case"mesh":case"point":return null}const C="polygon"===u.type?u.rings:u.paths;if(o<0)return null;let S=1;(u.spatialReference.vcsWkid||u.spatialReference.latestVcsWkid)&&(S=c$2(u.spatialReference)/st(u.spatialReference));let M=0;const j=u.hasZ?3:2,xe=u.hasZ?r$1:f$2;let Oe=-1;if(0===o)return 0===C.length||0===C[0].length?null:{partId:0,coordinate:new g({hasZ:u.hasZ,hasM:u.hasM,spatialReference:u.spatialReference,x:C[0][0][0],y:C[0][0][1],...u.hasZ?{z:C[0][0][2]}:{},...u.hasM?{m:C[0][0][j]}:{}}),segmentId:0};for(const Ue of C){Oe++;let C=-1;for(let Je=1;Je<Ue.length;Je++){C++;const We=xe(Ue[Je-1],Ue[Je],S),Xe=M+We;if(Xe===o)return{partId:Oe,coordinate:new g({hasZ:u.hasZ,hasM:u.hasM,spatialReference:u.spatialReference,x:Ue[Je][0],y:Ue[Je][1],...u.hasZ?{z:Ue[Je][2]}:{},...u.hasM?{m:Ue[Je][j]}:{}}),segmentId:C};if(Xe>o){let xe=u.hasZ?p$2(Ue[Je-1],Ue[Je],o-M,S):d$3(Ue[Je-1],Ue[Je],o-M);return xe=[...xe,m$2(Ue[Je-1][j],Ue[Je][j],We,o-M)],{partId:Oe,coordinate:new g({hasZ:u.hasZ,hasM:u.hasM,spatialReference:u.spatialReference,x:xe[0],y:xe[1],...u.hasZ?{z:xe[2]}:{},...u.hasM?{m:xe[j]}:{}}),segmentId:C}}M=Xe}}return null}function x$3(u,o){if(!u)return null;if(!o)return null;if("extent"===u.type){const o=u;u=new j({spatialReference:u.spatialReference,rings:[[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]]]})}switch(u.type){case"point":return function R$3(u,o){if(!u)return null;if(!o)return null;let g=1;(o.spatialReference.vcsWkid||o.spatialReference.latestVcsWkid)&&(g=c$2(o.spatialReference)/st(o.spatialReference));let C=null,S=0;return C=u,S=u.hasZ&&o.hasZ?r$1([o.x,o.y,o.z],[u.x,u.y,u.z],g):h$3([o.x,o.y],[u.x,u.y],!1),{coordinate:C,distance:S}}(u,o)??null;case"multipoint":return function g$3(u,o){if(!u)return null;if(!o)return null;let g=1;(o.spatialReference.vcsWkid||o.spatialReference.latestVcsWkid)&&(g=c$2(o.spatialReference)/st(o.spatialReference));let C=null,S=0,M=Number.MAX_VALUE,j=-1,xe=-1;for(const Oe of u.points||[]){xe++;const C=u.hasZ&&o.hasZ?o$1([Oe[0],Oe[1],Oe[2]],[o.x,o.y,o.z],g):l$4([Oe[0],Oe[1]],[o.x,o.y]);C<M&&(M=C,j=xe)}return j<0?null:(S=M,C=u.getPoint(j),{coordinate:C,distance:Math.sqrt(S)})}(u,o)??null;case"polygon":case"polyline":return function M$5(u,o){if(!u)return null;if(!o)return null;const C="polygon"===u.type?u.rings:u.paths;let S=1;(o.spatialReference.vcsWkid||o.spatialReference.latestVcsWkid)&&(S=c$2(o.spatialReference)/st(o.spatialReference));let M=Number.MAX_VALUE,j=-1,xe=-1,Oe=-1;const Ue=u.hasZ&&o.hasZ;let Je=null;const We=Ue?[o.x,o.y,o.z]:[o.x,o.y];for(const g of C){xe++;for(let u=1;u<g.length;u++){const o=Ue?w$3(We,g[u-1],g[u]):J$6(We,g[u-1],g[u]),C=Ue?o$1(o,We,S):l$4(o,We);C<M&&(M=C,Je=o,Oe=xe,j=u-1)}}if(j<0)return null;const Xe=u.hasM&&u.hasZ?3:2,Qe=C[Oe][j],et=C[Oe][j+1];let tt=null,nt=null,rt=Ue?Je[2]:null;u.hasM&&(nt=m$2(Qe[Xe],et[Xe],Ue?r$1(Qe,et,S):h$3(Qe,et,!1),Ue?r$1(Qe,Je,S):h$3(Qe,Je,!1))),u.hasZ&&!1===o.hasZ&&(rt=m$2(Qe[2],et[2],Ue?r$1(Qe,et,S):h$3(Qe,et,!1),Ue?r$1(Qe,Je,S):h$3(Qe,Je,!1))),tt=new g({hasZ:Ue,hasM:u.hasM,spatialReference:o.spatialReference,x:Je[0],y:Je[1],...u.hasZ?{z:rt}:{},...u.hasM?{m:nt}:{}});let it=0;for(let g=0;g<=Oe;g++){const o=C[g],M=g===Oe?j:o.length-1;for(let g=1;g<=M;g++)it+=u.hasZ?r$1(o[g-1],o[g],S):h$3([o[g-1][0],o[g-1][1]],[o[g][0],o[g][1]],!1)}return it+=u.hasZ?r$1(Qe,[tt.x,tt.y,tt.z],S):h$3(Qe,[tt.x,tt.y],!1),{partId:Oe,segmentId:j,coordinate:tt,distance:Math.sqrt(M),distanceAlong:it}}(u,o)??null;default:return null}}let Fn=null;function J$5(u){return 0===Qe.indexOf("4.")?j.fromExtent(u):new j({spatialReference:u.spatialReference,rings:[[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]]]})}function W$5(u,o){if("polygon"!==u.type&&"polyline"!==u.type&&"extent"!==u.type)return 0;let g=1;(u.spatialReference.vcsWkid||u.spatialReference.latestVcsWkid)&&(g=c$2(u.spatialReference)/st(u.spatialReference));let C=0;if("polyline"===u.type)for(const M of u.paths)for(let u=1;u<M.length;u++)C+=r$1(M[u],M[u-1],g);else if("polygon"===u.type)for(const M of u.rings){for(let u=1;u<M.length;u++)C+=r$1(M[u],M[u-1],g);(M[0][0]!==M[M.length-1][0]||M[0][1]!==M[M.length-1][1]||void 0!==M[0][2]&&M[0][2]!==M[M.length-1][2])&&(C+=r$1(M[0],M[M.length-1],g))}else"extent"===u.type&&(C+=2*r$1([u.xmin,u.ymin,0],[u.xmax,u.ymin,0],g),C+=2*r$1([u.xmin,u.ymin,0],[u.xmin,u.ymax,0],g),C*=2,C+=4*Math.abs(P$7(u.zmax,0)*g-P$7(u.zmin,0)*g));const S=new xe({hasZ:!1,hasM:!1,spatialReference:u.spatialReference,paths:[[0,0],[0,C]]});return Fn.planarLength(S,o)}function H$6(u,o){function L2(u,o,g){if(ae$4(g,2,2,u,o),g[0]instanceof Ue&&g[1]instanceof Ue);else if(g[0]instanceof Ue&&null===g[1]);else if(g[1]instanceof Ue&&null===g[0]);else if(null!==g[0]||null!==g[1])throw new Mt(u,St.InvalidParameter,o)}u.disjoint=function(u,g){return o(u,g,((o,C,S)=>(S=Fe$2(S),L2(u,g,S),null===S[0]||null===S[1]||Fn.disjoint(S[0],S[1]))))},u.intersects=function(u,g){return o(u,g,((o,C,S)=>(S=Fe$2(S),L2(u,g,S),null!==S[0]&&null!==S[1]&&Fn.intersects(S[0],S[1]))))},u.touches=function(u,g){return o(u,g,((o,C,S)=>(S=Fe$2(S),L2(u,g,S),null!==S[0]&&null!==S[1]&&Fn.touches(S[0],S[1]))))},u.crosses=function(u,g){return o(u,g,((o,C,S)=>(S=Fe$2(S),L2(u,g,S),null!==S[0]&&null!==S[1]&&Fn.crosses(S[0],S[1]))))},u.within=function(u,g){return o(u,g,((o,C,S)=>(S=Fe$2(S),L2(u,g,S),null!==S[0]&&null!==S[1]&&Fn.within(S[0],S[1]))))},u.contains=function(u,g){return o(u,g,((o,C,S)=>(S=Fe$2(S),L2(u,g,S),null!==S[0]&&null!==S[1]&&Fn.contains(S[0],S[1]))))},u.overlaps=function(u,g){return o(u,g,((o,C,S)=>(S=Fe$2(S),L2(u,g,S),null!==S[0]&&null!==S[1]&&Fn.overlaps(S[0],S[1]))))},u.equals=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,2,2,u,g),S[0]===S[1]||(S[0]instanceof Ue&&S[1]instanceof Ue?Fn.equals(S[0],S[1]):(X$6(S[0])&&X$6(S[1])||te$5(S[0])&&te$5(S[1])||!(!ee$5(S[0])||!ee$5(S[1])))&&S[0].equals(S[1])))))},u.relate=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),3,3,u,g),S[0]instanceof Ue&&S[1]instanceof Ue)return Fn.relate(S[0],S[1],me$3(S[2]));if(S[0]instanceof Ue&&null===S[1])return!1;if(S[1]instanceof Ue&&null===S[0])return!1;if(null===S[0]&&null===S[1])return!1;throw new Mt(u,St.InvalidParameter,g)}))},u.intersection=function(u,g){return o(u,g,((o,C,S)=>(S=Fe$2(S),L2(u,g,S),null===S[0]||null===S[1]?null:Fn.intersect(S[0],S[1]))))},u.union=function(u,g){return o(u,g,((o,C,S)=>{const M=[];if(0===(S=Fe$2(S)).length)throw new Mt(u,St.WrongNumberOfParameters,g);if(1===S.length)if(U$5(S[0])){const o=Fe$2(S[0]);for(let C=0;C<o.length;C++)if(null!==o[C]){if(!(o[C]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);M.push(o[C])}}else{if(!Q$5(S[0])){if(S[0]instanceof Ue)return Ze$1(yt(S[0]),u.spatialReference);if(null===S[0])return null;throw new Mt(u,St.InvalidParameter,g)}{const o=Fe$2(S[0].toArray());for(let C=0;C<o.length;C++)if(null!==o[C]){if(!(o[C]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);M.push(o[C])}}}else for(let j=0;j<S.length;j++)if(null!==S[j]){if(!(S[j]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);M.push(S[j])}return 0===M.length?null:Fn.union(M)}))},u.difference=function(u,g){return o(u,g,((o,C,S)=>(S=Fe$2(S),L2(u,g,S),null===S[0]?null:null===S[1]?yt(S[0]):Fn.difference(S[0],S[1]))))},u.symmetricdifference=function(u,g){return o(u,g,((o,C,S)=>(S=Fe$2(S),L2(u,g,S),null===S[0]&&null===S[1]?null:null===S[0]?yt(S[1]):null===S[1]?yt(S[0]):Fn.symmetricDifference(S[0],S[1]))))},u.clip=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),2,2,u,g),!(S[1]instanceof M)&&null!==S[1])throw new Mt(u,St.InvalidParameter,g);if(null===S[0])return null;if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);return null===S[1]?null:Fn.clip(S[0],S[1])}))},u.cut=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),2,2,u,g),!(S[1]instanceof xe)&&null!==S[1])throw new Mt(u,St.InvalidParameter,g);if(null===S[0])return[];if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);return null===S[1]?[yt(S[0])]:Fn.cut(S[0],S[1])}))},u.area=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,2,u,g),null===(S=Fe$2(S))[0])return 0;if(U$5(S[0])||Q$5(S[0])){const o=xe$2(S[0],u.spatialReference);return null===o?0:Fn.planarArea(o,wt(P$7(S[1],-1)))}if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);return Fn.planarArea(S[0],wt(P$7(S[1],-1)))}))},u.areageodetic=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,2,u,g),null===(S=Fe$2(S))[0])return 0;if(U$5(S[0])||Q$5(S[0])){const o=xe$2(S[0],u.spatialReference);return null===o?0:Fn.geodesicArea(o,wt(P$7(S[1],-1)))}if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);return Fn.geodesicArea(S[0],wt(P$7(S[1],-1)))}))},u.length=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,2,u,g),null===(S=Fe$2(S))[0])return 0;if(U$5(S[0])||Q$5(S[0])){const o=Me$2(S[0],u.spatialReference);return null===o?0:Fn.planarLength(o,xt(P$7(S[1],-1)))}if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);return Fn.planarLength(S[0],xt(P$7(S[1],-1)))}))},u.length3d=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,2,u,g),null===(S=Fe$2(S))[0])return 0;if(U$5(S[0])||Q$5(S[0])){const o=Me$2(S[0],u.spatialReference);return null===o?0:!0===o.hasZ?W$5(o,xt(P$7(S[1],-1))):Fn.planarLength(o,xt(P$7(S[1],-1)))}if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);return!0===S[0].hasZ?W$5(S[0],xt(P$7(S[1],-1))):Fn.planarLength(S[0],xt(P$7(S[1],-1)))}))},u.lengthgeodetic=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,2,u,g),null===(S=Fe$2(S))[0])return 0;if(U$5(S[0])||Q$5(S[0])){const o=Me$2(S[0],u.spatialReference);return null===o?0:Fn.geodesicLength(o,xt(P$7(S[1],-1)))}if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);return Fn.geodesicLength(S[0],xt(P$7(S[1],-1)))}))},u.distance=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S=Fe$2(S),2,3,u,g);let M=S[0];(U$5(S[0])||Q$5(S[0]))&&(M=Oe$1(S[0],u.spatialReference));let j=S[1];if((U$5(S[1])||Q$5(S[1]))&&(j=Oe$1(S[1],u.spatialReference)),!(M instanceof Ue))throw new Mt(u,St.InvalidParameter,g);if(!(j instanceof Ue))throw new Mt(u,St.InvalidParameter,g);return Fn.distance(M,j,xt(P$7(S[2],-1)))}))},u.distancegeodetic=function(u,C){return o(u,C,((o,S,M)=>{ae$4(M=Fe$2(M),2,3,u,C);const j=M[0],Oe=M[1];if(!(j instanceof g))throw new Mt(u,St.InvalidParameter,C);if(!(Oe instanceof g))throw new Mt(u,St.InvalidParameter,C);const Ue=new xe({paths:[],spatialReference:j.spatialReference});return Ue.addPath([j,Oe]),Fn.geodesicLength(Ue,xt(P$7(M[2],-1)))}))},u.densify=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),2,3,u,g),null===S[0])return null;if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);const Oe=ge$2(S[1]);if(isNaN(Oe))throw new Mt(u,St.InvalidParameter,g);if(Oe<=0)throw new Mt(u,St.InvalidParameter,g);return S[0]instanceof j||S[0]instanceof xe?Fn.densify(S[0],Oe,xt(P$7(S[2],-1))):S[0]instanceof M?Fn.densify(J$5(S[0]),Oe,xt(P$7(S[2],-1))):S[0]}))},u.densifygeodetic=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),2,3,u,g),null===S[0])return null;if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);const Oe=ge$2(S[1]);if(isNaN(Oe))throw new Mt(u,St.InvalidParameter,g);if(Oe<=0)throw new Mt(u,St.InvalidParameter,g);return S[0]instanceof j||S[0]instanceof xe?Fn.geodesicDensify(S[0],Oe,xt(P$7(S[2],-1))):S[0]instanceof M?Fn.geodesicDensify(J$5(S[0]),Oe,xt(P$7(S[2],-1))):S[0]}))},u.generalize=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),2,4,u,g),null===S[0])return null;if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);const M=ge$2(S[1]);if(isNaN(M))throw new Mt(u,St.InvalidParameter,g);return Fn.generalize(S[0],M,Ne(P$7(S[2],!0)),xt(P$7(S[3],-1)))}))},u.buffer=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),2,3,u,g),null===S[0])return null;if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);const M=ge$2(S[1]);if(isNaN(M))throw new Mt(u,St.InvalidParameter,g);return 0===M?yt(S[0]):Fn.buffer(S[0],M,xt(P$7(S[2],-1)))}))},u.buffergeodetic=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),2,3,u,g),null===S[0])return null;if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);const M=ge$2(S[1]);if(isNaN(M))throw new Mt(u,St.InvalidParameter,g);return 0===M?yt(S[0]):Fn.geodesicBuffer(S[0],M,xt(P$7(S[2],-1)))}))},u.offset=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),2,6,u,g),null===S[0])return null;if(!(S[0]instanceof j||S[0]instanceof xe))throw new Mt(u,St.InvalidParameter,g);const M=ge$2(S[1]);if(isNaN(M))throw new Mt(u,St.InvalidParameter,g);const Oe=ge$2(P$7(S[4],10));if(isNaN(Oe))throw new Mt(u,St.InvalidParameter,g);const Ue=ge$2(P$7(S[5],0));if(isNaN(Ue))throw new Mt(u,St.InvalidParameter,g);return Fn.offset(S[0],M,xt(P$7(S[2],-1)),me$3(P$7(S[3],"round")).toLowerCase(),Oe,Ue)}))},u.rotate=function(u,C){return o(u,C,((o,S,xe)=>{if(ae$4(xe=Fe$2(xe),2,3,u,C),null===xe[0])return null;if(!(xe[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,C);const Oe=xe[0]instanceof M?j.fromExtent(xe[0]):xe[0],Je=ge$2(xe[1]);if(isNaN(Je))throw new Mt(u,St.InvalidParameter,C);const We=P$7(xe[2],null);if(null===We)return Fn.rotate(Oe,Je);if(We instanceof g)return Fn.rotate(Oe,Je,We);throw new Mt(u,St.InvalidParameter,C)}))},u.centroid=function(u,C){return o(u,C,((o,S,Je)=>{if(ae$4(Je=Fe$2(Je),1,1,u,C),null===Je[0])return null;let We=Je[0];if((U$5(Je[0])||Q$5(Je[0]))&&(We=Oe$1(Je[0],u.spatialReference)),null===We)return null;if(!(We instanceof Ue))throw new Mt(u,St.InvalidParameter,C);return We instanceof g?Ze$1(yt(We),u.spatialReference):We instanceof j?We.centroid:We instanceof xe?y$3(We):We instanceof Oe?m$3(We):We instanceof M?We.center:null}))},u.measuretocoordinate=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),2,2,u,g),null===S[0])return null;let M=S[0];if((U$5(S[0])||Q$5(S[0]))&&(M=Me$2(S[0],u.spatialReference)),null===M)return null;if(!(M instanceof Ue))throw new Mt(u,St.InvalidParameter,g);if(!(M instanceof xe))throw new Mt(u,St.InvalidParameter,g);if(E$4(!1===S[1]))throw new Mt(u,St.InvalidParameter,g);const j=y$2(M,S[1]);return j?on.convertObjectToArcadeDictionary(j,He(u),!1,!0):null}))},u.pointtocoordinate=function(u,C){return o(u,C,((o,S,M)=>{if(ae$4(M=Fe$2(M),2,2,u,C),null===M[0])return null;let j=M[0];if((U$5(M[0])||Q$5(M[0]))&&(j=Me$2(M[0],u.spatialReference)),null===j)return null;if(!(j instanceof Ue))throw new Mt(u,St.InvalidParameter,C);if(!(j instanceof xe))throw new Mt(u,St.InvalidParameter,C);const Oe=M[1];if(null===Oe)return null;if(!(Oe instanceof g))throw new Mt(u,St.InvalidParameter,C);if(E$4(!1===M[1]))throw new Mt(u,St.InvalidParameter,C);const Je=x$3(j,Oe);return Je?on.convertObjectToArcadeDictionary(Je,He(u),!1,!0):null}))},u.distancetocoordinate=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),2,2,u,g),null===S[0])return null;let M=S[0];if((U$5(S[0])||Q$5(S[0]))&&(M=Me$2(S[0],u.spatialReference)),null===M)return null;if(!(M instanceof Ue))throw new Mt(u,St.InvalidParameter,g);if(!(M instanceof xe))throw new Mt(u,St.InvalidParameter,g);if(E$4(!1===S[1]))throw new Mt(u,St.InvalidParameter,g);const j=Z$3(M,S[1]);return j?on.convertObjectToArcadeDictionary(j,He(u),!1,!0):null}))},u.multiparttosinglepart=function(u,C){return o(u,C,((o,S,Je)=>{if(ae$4(Je=Fe$2(Je),1,1,u,C),null===Je[0])return null;if(!(Je[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,C);if(Je[0]instanceof g)return[Ze$1(yt(Je[0]),u.spatialReference)];if(Je[0]instanceof M)return[Ze$1(yt(Je[0]),u.spatialReference)];const Xe=Fn.simplify(Je[0]);if(Xe instanceof j){const u=[],o=[];for(let g=0;g<Xe.rings.length;g++)if(Xe.isClockwise(Xe.rings[g])){const o=We({rings:[Xe.rings[g]],hasZ:!0===Xe.hasZ,hasM:!0===Xe.hasM,spatialReference:Xe.spatialReference.toJSON()});u.push(o)}else o.push({ring:Xe.rings[g],pt:Xe.getPoint(g,0)});for(let g=0;g<o.length;g++)for(let C=0;C<u.length;C++)if(u[C].contains(o[g].pt)){u[C].addRing(o[g].ring);break}return u}if(Xe instanceof xe){const u=[];for(let o=0;o<Xe.paths.length;o++){const g=We({paths:[Xe.paths[o]],hasZ:!0===Xe.hasZ,hasM:!0===Xe.hasM,spatialReference:Xe.spatialReference.toJSON()});u.push(g)}return u}if(Je[0]instanceof Oe){const o=[],g=Ze$1(yt(Je[0]),u.spatialReference);for(let u=0;u<g.points.length;u++)o.push(g.getPoint(u));return o}return null}))},u.issimple=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),1,1,u,g),null===S[0])return!0;if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);return Fn.isSimple(S[0])}))},u.simplify=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),1,1,u,g),null===S[0])return null;if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);return Fn.simplify(S[0])}))},u.convexhull=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S=Fe$2(S),1,1,u,g),null===S[0])return null;if(!(S[0]instanceof Ue))throw new Mt(u,St.InvalidParameter,g);return Fn.convexHull(S[0])}))},u.nearestcoordinate=function(u,C){return o(u,C,((o,S,M)=>{if(ae$4(M=Fe$2(M),2,2,u,C),!(M[0]instanceof Ue||null===M[0]))throw new Mt(u,St.InvalidParameter,C);if(!(M[1]instanceof g||null===M[1]))throw new Mt(u,St.InvalidParameter,C);if(null===M[0]||null===M[1])return null;const j=Fn.nearestCoordinate(M[0],M[1]);return null===j||j.isEmpty?null:on.convertObjectToArcadeDictionary({coordinate:j.coordinate,distance:j.distance,sideOfLine:0===j.distance?"straddle":j.isRightSide?"right":"left"},He(u),!1,!0)}))},u.nearestvertex=function(u,C){return o(u,C,((o,S,M)=>{if(ae$4(M=Fe$2(M),2,2,u,C),!(M[0]instanceof Ue||null===M[0]))throw new Mt(u,St.InvalidParameter,C);if(!(M[1]instanceof g||null===M[1]))throw new Mt(u,St.InvalidParameter,C);if(null===M[0]||null===M[1])return null;const j=Fn.nearestVertex(M[0],M[1]);return null===j||j.isEmpty?null:on.convertObjectToArcadeDictionary({coordinate:j.coordinate,distance:j.distance,sideOfLine:0===j.distance?"straddle":j.isRightSide?"right":"left"},He(u),!1,!0)}))}}function m$1(u,o,g){if(void 0===g||0==+g)return Math[u](o);if(o=+o,g=+g,isNaN(o)||"number"!=typeof g||g%1!=0)return NaN;let C=o.toString().split("e");return C=(o=Math[u](+(C[0]+"e"+(C[1]?+C[1]-g:-g)))).toString().split("e"),+(C[0]+"e"+(C[1]?+C[1]+g:g))}function M$4(u,o){function p3(u,o,g){const C=ge$2(u);return isNaN(C)?C:isNaN(o)||isNaN(g)||o>g?NaN:C<o?o:C>g?g:C}u.number=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,2,u,g);const M=S[0];if(E$4(M))return M;if(null===M)return 0;if(X$6(M)||te$5(M)||ee$5(M))return M.toNumber();if(z$6(M))return Number(M);if(U$5(M))return NaN;if(""===M)return Number(M);if(void 0===M)return Number(M);if(G$3(M)){if(void 0!==S[1]){let u=v$5(S[1],"‰","");return u=v$5(u,"¤",""),At(M,{pattern:u})}return Number(M.trim())}return Number(M)}))},u.abs=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),Math.abs(ge$2(S[0])))))},u.acos=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),Math.acos(ge$2(S[0])))))},u.asin=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),Math.asin(ge$2(S[0])))))},u.atan=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),Math.atan(ge$2(S[0])))))},u.atan2=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,2,2,u,g),Math.atan2(ge$2(S[0]),ge$2(S[1])))))},u.ceil=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,2,u,g),2===S.length){let u=ge$2(S[1]);return isNaN(u)&&(u=0),m$1("ceil",ge$2(S[0]),-1*u)}return Math.ceil(ge$2(S[0]))}))},u.round=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,2,u,g),2===S.length){let u=ge$2(S[1]);return isNaN(u)&&(u=0),m$1("round",ge$2(S[0]),-1*u)}return Math.round(ge$2(S[0]))}))},u.floor=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,2,u,g),2===S.length){let u=ge$2(S[1]);return isNaN(u)&&(u=0),m$1("floor",ge$2(S[0]),-1*u)}return Math.floor(ge$2(S[0]))}))},u.cos=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),Math.cos(ge$2(S[0])))))},u.isnan=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),"number"==typeof S[0]&&isNaN(S[0]))))},u.exp=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),Math.exp(ge$2(S[0])))))},u.log=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),Math.log(ge$2(S[0])))))},u.pow=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,2,2,u,g),ge$2(S[0])**ge$2(S[1]))))},u.random=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,0,0,u,g),Math.random())))},u.sin=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),Math.sin(ge$2(S[0])))))},u.sqrt=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),Math.sqrt(ge$2(S[0])))))},u.tan=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),Math.tan(ge$2(S[0])))))},u.isempty=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),null===S[0]||""===S[0]||void 0===S[0]||S[0]===en)))},u.boolean=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);return Ne(S[0])}))},u.constrain=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,3,3,u,g);const M=ge$2(S[1]),j=ge$2(S[2]);if(U$5(S[0])){const u=[];for(const o of S[0])u.push(p3(o,M,j));return u}if(Q$5(S[0])){const u=[];for(let o=0;o<S[0].length();o++)u.push(p3(S[0].get(o),M,j));return u}return p3(S[0],M,j)}))}}function s$2(u){let o=0;for(let g=0;g<u.length;g++)o+=u[g];return o/u.length}function c$1(u){const o=s$2(u);let g=0;for(let C=0;C<u.length;C++)g+=(o-u[C])**2;return g/u.length}function l$3(u,o,g=1e3){switch(u.toLowerCase()){case"distinct":return function i$1(u,o){const g=[],C={},S=[];for(let M=0;M<u.length;M++){if(void 0!==u[M]&&null!==u[M]&&u[M]!==en){const o=u[M];if(E$4(o)||G$3(o))void 0===C[o]&&(g.push(o),C[o]=1);else{let u=!1;for(let g=0;g<S.length;g++)!0===ce$3(S[g],o)&&(u=!0);!1===u&&(S.push(o),g.push(o))}}if(g.length>=o&&-1!==o)return g}return g}(o,g);case"avg":case"mean":return s$2(de$3(o));case"min":return Math.min.apply(Math,de$3(o));case"sum":return function u$1(u){let o=0;for(let g=0;g<u.length;g++)o+=u[g];return o}(de$3(o));case"max":return Math.max.apply(Math,de$3(o));case"stdev":case"stddev":return Math.sqrt(c$1(de$3(o)));case"var":case"variance":return c$1(de$3(o));case"count":return o.length}return 0}function a$1(u,o){if(1===o.length){if(U$5(o[0]))return l$3(u,o[0],-1);if(Q$5(o[0]))return l$3(u,o[0].toArray(),-1)}return l$3(u,o,-1)}function f$1(u,o){u.stdev=function(u,g){return o(u,g,((u,o,g)=>a$1("stdev",g)))},u.variance=function(u,g){return o(u,g,((u,o,g)=>a$1("variance",g)))},u.average=function(u,g){return o(u,g,((u,o,g)=>a$1("mean",g)))},u.mean=function(u,g){return o(u,g,((u,o,g)=>a$1("mean",g)))},u.sum=function(u,g){return o(u,g,((u,o,g)=>a$1("sum",g)))},u.min=function(u,g){return o(u,g,((u,o,g)=>a$1("min",g)))},u.max=function(u,g){return o(u,g,((u,o,g)=>a$1("max",g)))},u.distinct=function(u,g){return o(u,g,((u,o,g)=>a$1("distinct",g)))},u.count=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,1,u,g),U$5(S[0])||G$3(S[0]))return S[0].length;if(Q$5(S[0]))return S[0].length();throw new Mt(u,St.InvalidParameter,g)}))}}let Cn=class t2 extends on{constructor(u){super(),this.declaredClass="esri.arcade.Portal",this.immutable=!1,this.setField("url",u),this.immutable=!0}},An=class t3 extends on{constructor(u,o,g,C,S,M,j){super(),this.attachmentUrl=S,this.declaredClass="esri.arcade.Attachment",this.immutable=!1,this.setField("id",u),this.setField("name",o),this.setField("contenttype",g),this.setField("size",C),this.setField("exifinfo",M),this.setField("keywords",j),this.immutable=!0}deepClone(){var u;return new t3(this.field("id"),this.field("name"),this.field("contenttype"),this.field("size"),this.attachmentUrl,(null==(u=this.field("exifinfo"))?void 0:u.deepClone())??null,this.field("keywords"))}};const l$2=u=>(o,g,C)=>(C=C||14,+u(o,g).toFixed(C)),d$2=(u,o)=>u+o,m=(u,o)=>u*o,g$2=(u,o)=>u/o,_$3=(u,o,g)=>l$2(d$2)(u,o,g),w$2=(u,o,g)=>l$2(m)(u,o,g),A$2=(u,o,g)=>l$2(g$2)(u,o,g),bn=360,vn=400,En=2*Math.PI,Sn=3600,In=60,kn=60,_n=648e3/Math.PI,Tn=bn*In*kn,Mn=324e3,Bn=648e3,Nn=String.fromCharCode(7501),Pn="°";function O$3(u){if(!1===G$3(u))throw new Mt(null,St.InvalidParameter,null);return u}function G$2(u,o){const g=10**o;return Math.round(u*g)/g}function b$1(u){const o=parseFloat(u.toString().replace(Math.trunc(u).toString(),"0"))*Math.sign(u);return u<0?{fraction:o,integer:Math.ceil(u)}:{fraction:o,integer:Math.floor(u)}}var Rn,On,Ln,Un;function C$2(u,o){switch(u){case Rn.north:return"SHORT"===o?"N":"North";case Rn.east:return"SHORT"===o?"E":"East";case Rn.south:return"SHORT"===o?"S":"South";case Rn.west:return"SHORT"===o?"W":"West"}}function P$4(u,o){return u-Math.floor(u/o)*o}function Q$4(u){switch(u){case On.truncated_degrees:case On.decimal_degrees:return bn;case On.radians:return En;case On.gradians:return vn;case On.seconds:return Tn;case On.fractional_degree_minutes:return In;case On.fractional_minute_seconds:return kn;default:throw new Mt(null,St.LogicError,null,{reason:"unsupported evaluations"})}}function j$1(u){switch(u.toUpperCase().trim()){case"NORTH":case"NORTHAZIMUTH":case"NORTH AZIMUTH":return Ln.north_azimuth;case"POLAR":return Ln.polar;case"QUADRANT":return Ln.quadrant;case"SOUTH":case"SOUTHAZIMUTH":case"SOUTH AZIMUTH":return Ln.south_azimuth}throw new Mt(null,St.LogicError,null,{reason:"unsupported directionType"})}function W$4(u){switch(u.toUpperCase().trim()){case"D":case"DD":case"DECIMALDEGREE":case"DECIMAL DEGREE":case"DEGREE":case"DECIMALDEGREES":case"DECIMAL DEGREES":case"DEGREES":return On.decimal_degrees;case"DMS":case"DEGREESMINUTESSECONDS":case"DEGREES MINUTES SECONDS":return On.degrees_minutes_seconds;case"R":case"RAD":case"RADS":case"RADIAN":case"RADIANS":return On.radians;case"G":case"GON":case"GONS":case"GRAD":case"GRADS":case"GRADIAN":case"GRADIANS":return On.gradians}throw new Mt(null,St.LogicError,null,{reason:"unsupported units"})}!function(u){u[u.north=0]="north",u[u.east=1]="east",u[u.south=2]="south",u[u.west=3]="west"}(Rn||(Rn={})),function(u){u[u.decimal_degrees=1]="decimal_degrees",u[u.seconds=2]="seconds",u[u.degrees_minutes_seconds=3]="degrees_minutes_seconds",u[u.radians=4]="radians",u[u.gradians=5]="gradians",u[u.truncated_degrees=6]="truncated_degrees",u[u.fractional_degree_minutes=7]="fractional_degree_minutes",u[u.fractional_minute_seconds=8]="fractional_minute_seconds"}(On||(On={})),function(u){u[u.north_azimuth=1]="north_azimuth",u[u.polar=2]="polar",u[u.quadrant=3]="quadrant",u[u.south_azimuth=4]="south_azimuth"}(Ln||(Ln={})),function(u){u[u.meridian=0]="meridian",u[u.direction=1]="direction"}(Un||(Un={}));let Gn=class Z{constructor(u,o,g){this.m_degrees=u,this.m_minutes=o,this.m_seconds=g}getField(u){switch(u){case On.decimal_degrees:case On.truncated_degrees:return this.m_degrees;case On.fractional_degree_minutes:return this.m_minutes;case On.seconds:case On.fractional_minute_seconds:return this.m_seconds;default:throw new Mt(null,St.LogicError,null,{reason:"unexpected evaluation"})}}static secondsToDMS(u){const o=b$1(u).fraction;let g=b$1(u).integer;const C=Math.floor(g/Sn);g-=C*Sn;const S=Math.floor(g/kn);return g-=S*kn,new Z(C,S,g+o)}static numberToDms(u){const o=b$1(u).fraction,g=b$1(u).integer,C=w$2(b$1(100*o).fraction,100),S=b$1(100*o).integer;return new Z(g,S,C)}format(u,o){let g=G$2(this.m_seconds,o),C=this.m_minutes,S=this.m_degrees;if(u===On.seconds||u===On.fractional_minute_seconds)kn<=g&&(g-=kn,++C),In<=C&&(C=0,++S),bn<=S&&(S=0);else if(u===On.fractional_degree_minutes)g=0,C=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,S=this.m_degrees,In<=C&&(C=0,++S),bn<=S&&(S=0);else if(u===On.decimal_degrees||u===On.truncated_degrees){const u=A$2(this.m_seconds,Sn),o=A$2(this.m_minutes,In);S=Math.round(this.m_degrees+o+u),C=0,g=0}return new Z(S,C,g)}static dmsToSeconds(u,o,g){return u*Sn+o*kn+g}},zn=class B{constructor(u,o,g){this.meridian=u,this.angle=o,this.direction=g}fetchAzimuth(u){return u===Un.meridian?this.meridian:this.direction}},Zn=class V{constructor(u){this._angle=u}static createFromAngleAndDirection(u,o){return new V(new Jn(V._convertDirectionFormat(u.extractAngularUnits(On.seconds),o,Ln.north_azimuth)))}getAngle(u){const o=this._angle.extractAngularUnits(On.seconds);switch(u){case Ln.north_azimuth:case Ln.south_azimuth:case Ln.polar:return new Jn(V._convertDirectionFormat(o,Ln.north_azimuth,u));case Ln.quadrant:{const u=V.secondsNorthAzimuthToQuadrant(o);return new Jn(u.angle)}}}getMeridian(u){const o=this._angle.extractAngularUnits(On.seconds);switch(u){case Ln.north_azimuth:return Rn.north;case Ln.south_azimuth:return Rn.south;case Ln.polar:return Rn.east;case Ln.quadrant:return V.secondsNorthAzimuthToQuadrant(o).meridian}}getDirection(u){const o=this._angle.extractAngularUnits(On.seconds);switch(u){case Ln.north_azimuth:return Rn.east;case Ln.south_azimuth:return Rn.west;case Ln.polar:return Rn.north;case Ln.quadrant:return V.secondsNorthAzimuthToQuadrant(o).direction}}static secondsNorthAzimuthToQuadrant(u){const o=u<=Mn||u>=972e3?Rn.north:Rn.south,g=o===Rn.north?Math.min(Tn-u,u):Math.abs(u-Bn),C=u>Bn?Rn.west:Rn.east;return new zn(o,g,C)}static createFromAngleMeridianAndDirection(u,o,g){return new V(new Jn(V.secondsQuadrantToNorthAzimuth(u.extractAngularUnits(On.seconds),o,g)))}static secondsQuadrantToNorthAzimuth(u,o,g){return o===Rn.north?g===Rn.east?u:Tn-u:g===Rn.east?Bn-u:Bn+u}static _convertDirectionFormat(u,o,g){let C=0;switch(o){case Ln.north_azimuth:C=u;break;case Ln.polar:C=Mn-u;break;case Ln.quadrant:throw new Mt(null,St.LogicError,null,{reason:"unexpected evaluation"});case Ln.south_azimuth:C=u+Bn}let S=0;switch(g){case Ln.north_azimuth:S=C;break;case Ln.polar:S=Mn-C;break;case Ln.quadrant:throw new Mt(null,St.LogicError,null,{reason:"unexpected evaluation"});case Ln.south_azimuth:S=C-Bn}return S=function I$3(u,o){return u%o}(S,Tn),S<0?Tn+S:S}};function X$5(u,o,g){let C=null;switch(o){case On.decimal_degrees:C=w$2(u,Sn);break;case On.seconds:C=u;break;case On.gradians:C=w$2(u,3240);break;case On.radians:C=w$2(u,_n);break;default:throw new Mt(null,St.LogicError,null,{reason:"unexpected evaluation"})}switch(g){case On.decimal_degrees:return A$2(C,Sn);case On.seconds:return C;case On.gradians:return A$2(C,3240);case On.radians:return C/_n;default:throw new Mt(null,St.LogicError,null,{reason:"unexpected evaluation"})}}let Jn=class J{constructor(u){this._seconds=u}static createFromAngleAndUnits(u,o){return new J(X$5(u,o,On.seconds))}extractAngularUnits(u){return X$5(this._seconds,On.seconds,K$3(u))}static createFromDegreesMinutesSeconds(u,o,g){return new J(_$3(_$3(w$2(u,Sn),w$2(o,kn)),g))}};function K$3(u){switch(ut(u),u){case On.decimal_degrees:case On.truncated_degrees:case On.degrees_minutes_seconds:return On.decimal_degrees;case On.gradians:return On.gradians;case On.fractional_degree_minutes:return On.fractional_degree_minutes;case On.radians:return On.radians;case On.seconds:case On.fractional_minute_seconds:return On.seconds}}let Hn=class Y{constructor(u,o,g,C){this.view=u,this.angle=o,this.merdian=g,this.direction=C,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(u,o,g){return new Y(u,o.getAngle(g),o.getMeridian(g),o.getDirection(g))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return null===this._dms&&this._calculateDms(),this._dms}fetchFormattedDms(){return null===this._formattedDms&&this._calculateDms(),this._formattedDms}_calculateDms(){let u=null,o=On.truncated_degrees,g=0;for(let C=0;C<this.view.length;C++){const S=this.view[C];switch(S){case"m":u=le$2(this.view,C,S),o=o===On.truncated_degrees?On.fractional_degree_minutes:o,C=u.newpos;continue;case"s":u=le$2(this.view,C,S),o=On.fractional_minute_seconds,g=g<u.rounding?u.rounding:g,C=u.newpos;continue;default:continue}}this._dms=Gn.secondsToDMS(this.angle.extractAngularUnits(On.seconds)),this._formattedDms=Gn.secondsToDMS(this.angle.extractAngularUnits(On.seconds)).format(o,g)}};function $$2(u,o,g,C,S){let M=null;switch(o){case On.decimal_degrees:case On.radians:case On.gradians:return M=P$4(G$2(u.extractAngularUnits(o),C),Q$4(o)),M.toFixed(C).padStart(g+C+(C>0?1:0),"0");case On.truncated_degrees:case On.fractional_degree_minutes:return M=P$4(S.fetchFormattedDms().getField(o),Q$4(o)),M.toFixed(C).padStart(g+C+(C>0?1:0),"0");case On.fractional_minute_seconds:return M=P$4(G$2(S.fetchDms().getField(o),C),Q$4(o)),M.toFixed(C).padStart(g+C+(C>0?1:0),"0");default:throw new Mt(null,St.LogicError,null,{reason:"unexpected evaluation"})}}function te$4(u){switch(u.toUpperCase().trim()){case"N":case"NORTH":return Rn.north;case"E":case"EAST":return Rn.east;case"S":case"SOUTH":return Rn.south;case"W":case"WEST":return Rn.west}return null}function re$4(u){const o=parseFloat(u);if(E$4(o)){if(isNaN(o))throw new Mt(null,St.LogicError,null,{reason:"invalid conversion"});return o}throw new Mt(null,St.LogicError,null,{reason:"invalid conversion"})}function se$3(u,o,g){const C=g===Ln.quadrant;let S=null,M=null,j=0,xe=0,Oe=0;if(C){if(u.length<2)throw new Mt(null,St.LogicError,null,{reason:"conversion error"});Oe=1;const o=function ne$3(u){switch(ge$2(u)){case 1:return{first:Rn.north,second:Rn.east};case 2:return{first:Rn.south,second:Rn.east};case 3:return{first:Rn.south,second:Rn.west};case 4:return{first:Rn.north,second:Rn.west}}return null}(me$3(u[u.length-1]));if(o?(S=o.first,M=o.second):(j=1,S=te$4(me$3(u[0])),M=te$4(me$3(u[u.length-1]))),null===S||null===M)throw new Mt(null,St.LogicError,null,{reason:"invalid conversion"})}switch(o){case On.decimal_degrees:case On.radians:case On.gradians:if(0===u.length)throw new Mt(null,St.LogicError,null,{reason:"invalid conversion"});return C?Zn.createFromAngleMeridianAndDirection(Jn.createFromAngleAndUnits(re$4(u[j]),K$3(o)),S,M):Zn.createFromAngleAndDirection(Jn.createFromAngleAndUnits(re$4(u[j]),K$3(o)),g);case On.degrees_minutes_seconds:if(xe=u.length-Oe-j,3===xe){const o=Jn.createFromDegreesMinutesSeconds(re$4(u[j]),re$4(u[j+1]),re$4(u[j+2]));return C?Zn.createFromAngleMeridianAndDirection(o,S,M):Zn.createFromAngleAndDirection(o,g)}if(1===xe){const o=re$4(u[j]),xe=Gn.numberToDms(o),Oe=Jn.createFromDegreesMinutesSeconds(xe.m_degrees,xe.m_minutes,xe.m_seconds);return C?Zn.createFromAngleMeridianAndDirection(Oe,S,M):Zn.createFromAngleAndDirection(Oe,g)}}throw new Mt(null,St.LogicError,null,{reason:"invalid conversion"})}function ie$3(u,o,g){if(E$4(u))return function ee$4(u,o,g){if(g===Ln.quadrant)throw new Mt(null,St.LogicError,null,{reason:"conversion error"});if(o===On.degrees_minutes_seconds){const o=Gn.numberToDms(u);return Zn.createFromAngleAndDirection(Jn.createFromDegreesMinutesSeconds(o.m_degrees,o.m_minutes,o.m_seconds),g)}return Zn.createFromAngleAndDirection(Jn.createFromAngleAndUnits(u,K$3(o)),g)}(ge$2(u),o,g);if(G$3(u))return se$3(function ae$3(u){const o=new Set([" ","-","/","'",'"',"\\","^",Pn,Nn,"\t","\r","\n","*"]);let g="";for(let C=0;C<u.length;C++){const S=u.charAt(C);o.has(S)?g+="RRSPLITRRSPLITRR":g+=S}return g.split("RRSPLITRRSPLITRR").filter((u=>""!==u))}(u),o,g);if(U$5(u))return se$3(u,o,g);if(Q$5(u))return se$3(u.toArray(),o,g);throw new Mt(null,St.LogicError,null,{reason:"conversion error"})}function le$2(u,o,g){const C={padding:0,rounding:0,newpos:o};let S=!1;for(;o<u.length;){const M=u[o];if(M===g)S?C.rounding++:C.padding++,o++;else{if("."!==M)break;S=!0,o++}}return C.newpos=o-1,C}function de$2(u,o,g){const C={escaped:"",newpos:o};for(o++;o<u.length;){const g=u[o];if(o++,"]"===g)break;C.escaped+=g}return C.newpos=o-1,C}function me$2(u,o,g){if(!(o instanceof on))throw new Mt(null,St.InvalidParameter,null);if(!1===o.hasField("directionType"))throw new Mt(null,St.LogicError,null,{reason:"missing directionType"});if(!1===o.hasField("angleType"))throw new Mt(null,St.LogicError,null,{reason:"missing angleType"});const C=j$1(O$3(o.field("directiontype"))),S=ie$3(u,W$4(O$3(o.field("angletype"))),C);if(!(g instanceof on))throw new Mt(null,St.InvalidParameter,null);if(!1===g.hasField("directionType"))throw new Mt(null,St.LogicError,null,{reason:"missing directionType"});if(!1===g.hasField("outputType"))throw new Mt(null,St.LogicError,null,{reason:"missing angleType"});const M=j$1(O$3(g.field("directiontype"))),j=g.hasField("angleType")?W$4(O$3(g.field("angletype"))):null,xe=O$3(g.field("outputType")).toUpperCase().trim();if(!M||!xe)throw new Mt(null,St.LogicError,null,{reason:"conversion error"});if(!(j||"TEXT"===xe&&g.hasField("format")))throw new Mt(null,St.LogicError,null,{reason:"invalid unit"});switch(xe){case"VALUE":return M===Ln.quadrant||j===On.degrees_minutes_seconds?function ce$2(u,o,g){const C=u.getAngle(o);if(o===Ln.quadrant&&g===On.degrees_minutes_seconds){const g=Gn.secondsToDMS(C.extractAngularUnits(On.seconds));return[C$2(u.getMeridian(o),"SHORT"),g.m_degrees,g.m_minutes,g.m_seconds,C$2(u.getDirection(o),"SHORT")]}if(g===On.degrees_minutes_seconds){const u=Gn.secondsToDMS(C.extractAngularUnits(On.seconds));return[u.m_degrees,u.m_minutes,u.m_seconds]}return o===Ln.quadrant?[C$2(u.getMeridian(o),"SHORT"),C.extractAngularUnits(g),C$2(u.getDirection(o),"SHORT")]:[C.extractAngularUnits(g)]}(S,M,j):function oe$3(u,o,g){const C=K$3(g);if(C&&g!==On.degrees_minutes_seconds)return u.getAngle(o).extractAngularUnits(C);throw new Mt(null,St.LogicError,null,{reason:"conversion error"})}(S,M,j);case"TEXT":{let u="";return g.hasField("format")&&(u=me$3(g.field("format"))),null!==u&&""!==u||(u=function ue$3(u,o){let g="";switch(u){case On.decimal_degrees:g=o===Ln.quadrant?"DD.DD"+Pn:"DDD.DD"+Pn;break;case On.degrees_minutes_seconds:g=o===Ln.quadrant?"dd"+Pn+" mm' ss\"":"ddd"+Pn+" mm' ss.ss\"";break;case On.radians:g="R.RR";break;case On.gradians:g="GGG.GG"+Nn;break;default:throw new Mt(null,St.LogicError,null,{reason:"conversion error"})}return o===Ln.quadrant&&(g="p "+g+" b"),g}(j,M)),function he$2(u,o,g){let C="",S=null,M=null;const j=Hn.createFromStringAndBearing(o,u,g),xe={D:On.decimal_degrees,d:On.truncated_degrees,m:On.fractional_degree_minutes,s:On.fractional_minute_seconds,R:On.radians,G:On.gradians};for(let Oe=0;Oe<o.length;Oe++){const Ue=o[Oe];switch(Ue){case"[":S=de$2(o,Oe),C+=S.escaped,Oe=S.newpos;continue;case"D":case"d":case"m":case"s":case"R":case"G":S=le$2(o,Oe,Ue),M=u.getAngle(g),C+=$$2(M,xe[Ue],S.padding,S.rounding,j),Oe=S.newpos;continue;case"P":case"p":C+=C$2(j.fetchMeridian(),"p"===Ue?"SHORT":"LONG");continue;case"B":case"b":C+=C$2(j.fetchDirection(),"b"===Ue?"SHORT":"LONG");continue;default:C+=Ue}}return C}(S,u,M)}default:throw new Mt(null,St.InvalidParameter,null)}}function K$2(u,o){if(!u||!o)return u===o;if(u.x===o.x&&u.y===o.y){if(u.hasZ){if(u.z!==o.z)return!1}else if(o.hasZ)return!1;if(u.hasM){if(u.m!==o.m)return!1}else if(o.hasM)return!1;return!0}return!1}function X$4(u,o,C){if(null!==u)if(U$5(u)){if(o.updateUint8Array([61]),C.map.has(u)){const g=C.map.get(u);o.updateIntArray([61237541^g])}else{C.map.set(u,C.currentLength++);for(const g of u)X$4(g,o,C);C.map.delete(u),C.currentLength--}o.updateUint8Array([199])}else if(Q$5(u)){if(o.updateUint8Array([61]),C.map.has(u)){const g=C.map.get(u);o.updateIntArray([61237541^g])}else{C.map.set(u,C.currentLength++);for(const g of u.toArray())X$4(g,o,C);C.map.delete(u),C.currentLength--}o.updateUint8Array([199])}else{if(X$6(u))return o.updateIntArray([u.toNumber()]),void o.updateUint8Array([241]);if(ee$5(u))return o.updateIntArray([u.toNumber()]),void o.updateIntArray([257]);if(te$5(u))return o.updateIntArray([u.toNumber()]),void o.updateIntArray([263]);if(G$3(u))return o.updateIntArray([u.length]),o.updateWithString(u),void o.updateUint8Array([41]);if(z$6(u))o.updateUint8Array([!0===u?1:0,113]);else{if(E$4(u))return o.updateFloatArray([u]),void o.updateUint8Array([173]);if(u instanceof An)throw new Mt(C.context,St.UnsupportedHashType,C.node);if(u instanceof Cn)throw new Mt(C.context,St.UnsupportedHashType,C.node);if(!(u instanceof on)){if(H$7(u))throw new Mt(C.context,St.UnsupportedHashType,C.node);if(u instanceof g)return o.updateIntArray([3833836621]),o.updateIntArray([0]),o.updateFloatArray([u.x]),o.updateIntArray([1]),o.updateFloatArray([u.y]),u.hasZ&&(o.updateIntArray([2]),o.updateFloatArray([u.z])),u.hasM&&(o.updateIntArray([3]),o.updateFloatArray([u.m])),o.updateIntArray([3765347959]),void X$4(u.spatialReference.wkid,o,C);if(u instanceof j){o.updateIntArray([1266616829]);for(let g=0;g<u.rings.length;g++){const S=u.rings[g],M=[];let j=null,xe=null;for(let o=0;o<S.length;o++){const C=u.getPoint(g,o);if(0===o)j=C;else if(K$2(xe,C))continue;xe=C,o===S.length-1&&K$2(j,C)||M.push(C)}o.updateIntArray([1397116793,M.length]);for(let u=0;u<M.length;u++){const g=M[u];o.updateIntArray([3962308117,u]),X$4(g,o,C),o.updateIntArray([2716288009])}o.updateIntArray([2278822459])}return o.updateIntArray([3878477243]),void X$4(u.spatialReference.wkid,o,C)}if(u instanceof xe){o.updateIntArray([4106883559]);for(let g=0;g<u.paths.length;g++){const S=u.paths[g];o.updateIntArray([1397116793,S.length]);for(let M=0;M<S.length;M++)o.updateIntArray([3962308117,M]),X$4(u.getPoint(g,M),o,C),o.updateIntArray([2716288009]);o.updateIntArray([2278822459])}return o.updateIntArray([2568784753]),void X$4(u.spatialReference.wkid,o,C)}if(u instanceof Oe){o.updateIntArray([588535921,u.points.length]);for(let g=0;g<u.points.length;g++){const S=u.getPoint(g);o.updateIntArray([g]),X$4(S,o,C)}return o.updateIntArray([1700171621]),void X$4(u.spatialReference.wkid,o,C)}if(u instanceof M)return o.updateIntArray([3483648373]),o.updateIntArray([0]),o.updateFloatArray([u.xmax]),o.updateIntArray([1]),o.updateFloatArray([u.xmin]),o.updateIntArray([2]),o.updateFloatArray([u.ymax]),o.updateIntArray([3]),o.updateFloatArray([u.ymin]),u.hasZ&&(o.updateIntArray([4]),o.updateFloatArray([u.zmax]),o.updateIntArray([5]),o.updateFloatArray([u.zmin])),u.hasM&&(o.updateIntArray([6]),o.updateFloatArray([u.mmax]),o.updateIntArray([7]),o.updateFloatArray([u.mmin])),o.updateIntArray([3622027469]),void X$4(u.spatialReference.wkid,o,C);if(u instanceof et)return o.updateIntArray([14]),void 0!==u.wkid&&null!==u.wkid&&o.updateIntArray([u.wkid]),u.wkt&&o.updateWithString(u.wkt),void(u.wkt2&&o.updateWithString(u.wkt2));if(_$4(u))throw new Mt(C.context,St.UnsupportedHashType,C.node);if(B$4(u))throw new Mt(C.context,St.UnsupportedHashType,C.node);if(W$7(u))throw new Mt(C.context,St.UnsupportedHashType,C.node);if(u===en)throw new Mt(C.context,St.UnsupportedHashType,C.node);throw new Mt(C.context,St.UnsupportedHashType,C.node)}if(o.updateUint8Array([223]),C.map.has(u)){const g=C.map.get(u);o.updateIntArray([61237541^g])}else{C.map.set(u,C.currentLength++);for(const g of u.keys())o.updateIntArray([g.length]),o.updateWithString(g),o.updateUint8Array([251]),X$4(u.field(g),o,C),o.updateUint8Array([239]);C.map.delete(u),C.currentLength--}o.updateUint8Array([73])}}else o.updateUint8Array([0,139])}function Y$4(u,o){u.portal=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),new Cn(me$3(S[0])))))},u.typeof=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=L$5(S[0]);if("Unrecognized Type"===M)throw new Mt(u,St.UnrecognizedType,g);return M}))},u.trim=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),me$3(S[0]).trim())))},u.tohex=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=ge$2(S[0]);return isNaN(M)?M:M.toString(16)}))},u.upper=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),me$3(S[0]).toUpperCase())))},u.proper=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,2,u,g);let M=1;2===S.length&&"firstword"===me$3(S[1]).toLowerCase()&&(M=2);const j=/\s/,xe=me$3(S[0]);let Oe="",Ue=!0;for(let u=0;u<xe.length;u++){let o=xe[u];j.test(o)?1===M&&(Ue=!0):o.toUpperCase()!==o.toLowerCase()&&(Ue?(o=o.toUpperCase(),Ue=!1):o=o.toLowerCase()),Oe+=o}return Oe}))},u.lower=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,1,u,g),me$3(S[0]).toLowerCase())))},u.guid=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,0,1,u,g),S.length>0)switch(me$3(S[0]).toLowerCase()){case"digits":return ot().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return ot();case"digits-hyphen-braces":return"{"+ot()+"}";case"digits-hyphen-parentheses":return"("+ot()+")"}return"{"+ot()+"}"}))},u.standardizeguid=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,2,2,u,g);let M=me$3(S[0]);if(""===M||null===M)return"";const j=/^(\{|\()?(?<partA>[0-9a-z]{8})(-?)(?<partB>[0-9a-z]{4})(-?)(?<partC>[0-9a-z]{4})(-?)(?<partD>[0-9a-z]{4})(-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(M);if(!j)return"";const xe=j.groups;switch(M=xe.partA+"-"+xe.partB+"-"+xe.partC+"-"+xe.partD+"-"+xe.partE,me$3(S[1]).toLowerCase()){case"digits":return M.replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return M;case"digits-hyphen-braces":return"{"+M+"}";case"digits-hyphen-parentheses":return"("+M+")"}return"{"+M+"}"}))},u.console=function(u,g){return o(u,g,((o,g,C)=>(0===C.length||(1===C.length?u.console(me$3(C[0])):u.console(me$3(C))),en)))},u.mid=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,2,3,u,g);let M=ge$2(S[1]);if(isNaN(M))return"";if(M<0&&(M=0),2===S.length)return me$3(S[0]).substr(M);let j=ge$2(S[2]);return isNaN(j)?"":(j<0&&(j=0),me$3(S[0]).substr(M,j))}))},u.find=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,2,3,u,g);let M=0;if(S.length>2){if(M=ge$2(P$7(S[2],0)),isNaN(M))return-1;M<0&&(M=0)}return me$3(S[1]).indexOf(me$3(S[0]),M)}))},u.left=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,2,2,u,g);let M=ge$2(S[1]);return isNaN(M)?"":(M<0&&(M=0),me$3(S[0]).substr(0,M))}))},u.right=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,2,2,u,g);let M=ge$2(S[1]);return isNaN(M)?"":(M<0&&(M=0),me$3(S[0]).substr(-1*M,M))}))},u.split=function(u,g){return o(u,g,((o,C,S)=>{let M;ae$4(S,2,4,u,g);let j=ge$2(P$7(S[2],-1));const xe=Ne(P$7(S[3],!1));if(-1===j||null===j||!0===xe?M=me$3(S[0]).split(me$3(S[1])):(isNaN(j)&&(j=-1),j<-1&&(j=-1),M=me$3(S[0]).split(me$3(S[1]),j)),!1===xe)return M;const Oe=[];for(let u=0;u<M.length&&!(-1!==j&&Oe.length>=j);u++)""!==M[u]&&void 0!==M[u]&&Oe.push(M[u]);return Oe}))},u.text=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,1,2,u,g),pe$2(S[0],S[1]))))},u.concatenate=function(u,g){return o(u,g,((u,o,g)=>{const C=[];if(g.length<1)return"";if(U$5(g[0])){const u=P$7(g[2],"");for(let o=0;o<g[0].length;o++)C[o]=pe$2(g[0][o],u);return g.length>1?C.join(g[1]):C.join("")}if(Q$5(g[0])){const u=P$7(g[2],"");for(let o=0;o<g[0].length();o++)C[o]=pe$2(g[0].get(o),u);return g.length>1?C.join(g[1]):C.join("")}for(let S=0;S<g.length;S++)C[S]=pe$2(g[S]);return C.join("")}))},u.reverse=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,1,u,g),U$5(S[0])){const u=S[0].slice(0);return u.reverse(),u}if(Q$5(S[0])){const u=S[0].toArray().slice(0);return u.reverse(),u}throw new Mt(u,St.InvalidParameter,g)}))},u.replace=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,3,4,u,g);const M=me$3(S[0]),j=me$3(S[1]),xe=me$3(S[2]);return 4!==S.length||Ne(S[3])?v$5(M,j,xe):M.replace(j,xe)}))},u.schema=function(u,g){return o(u,g,((o,C,S)=>{if(H$7(S[0])){const o=Be(S[0]);return o?on.convertObjectToArcadeDictionary(o,He(u)):null}throw new Mt(u,St.InvalidParameter,g)}))},u.subtypes=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,1,u,g),H$7(S[0])){const o=Ve(S[0]);return o?on.convertObjectToArcadeDictionary(o,He(u)):null}throw new Mt(u,St.InvalidParameter,g)}))},u.subtypecode=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,1,u,g),H$7(S[0])){const u=Ve(S[0]);if(!u)return null;if(u.subtypeField&&S[0].hasField(u.subtypeField)){const o=S[0].field(u.subtypeField);for(const g of u.subtypes)if(g.code===o)return g.code;return null}return null}throw new Mt(u,St.InvalidParameter,g)}))},u.subtypename=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,1,u,g),H$7(S[0])){const u=Ve(S[0]);if(!u)return"";if(u.subtypeField&&S[0].hasField(u.subtypeField)){const o=S[0].field(u.subtypeField);for(const g of u.subtypes)if(g.code===o)return g.name;return""}return""}throw new Mt(u,St.InvalidParameter,g)}))},u.gdbversion=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,1,u,g),H$7(S[0]))return S[0].gdbVersion();throw new Mt(u,St.InvalidParameter,g)}))},u.domain=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,2,3,u,g),H$7(S[0])){const o=Ee$2(S[0],me$3(S[1]),void 0===S[2]?void 0:S[2]);return o&&o.domain?"coded-value"===o.domain.type||"codedValue"===o.domain.type?on.convertObjectToArcadeDictionary({type:"codedValue",name:o.domain.name,dataType:Kt[o.field.type],codedValues:o.domain.codedValues.map((u=>({name:u.name,code:u.code})))},He(u)):on.convertObjectToArcadeDictionary({type:"range",name:o.domain.name,dataType:Kt[o.field.type],min:o.domain.minValue,max:o.domain.maxValue},He(u)):null}throw new Mt(u,St.InvalidParameter,g)}))},u.domainname=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,2,4,u,g),H$7(S[0]))return qe(S[0],me$3(S[1]),S[2],void 0===S[3]?void 0:S[3]);throw new Mt(u,St.InvalidParameter,g)}))},u.domaincode=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,2,4,u,g),H$7(S[0]))return Ue$1(S[0],me$3(S[1]),S[2],void 0===S[3]?void 0:S[3]);throw new Mt(u,St.InvalidParameter,g)}))},u.urlencode=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,1,u,g),null===S[0])return"";if(S[0]instanceof on){let u="";for(const o of S[0].keys()){const g=S[0].field(o);""!==u&&(u+="&"),u+=null===g?encodeURIComponent(o)+"=":encodeURIComponent(o)+"="+encodeURIComponent(g)}return u}return encodeURIComponent(me$3(S[0]))}))},u.hash=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,1,u,g);const M=new bt(0);return X$4(S[0],M,{context:u,node:g,map:new Map,currentLength:0}),M.digest()}))},u.convertdirection=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,3,3,u,g),me$2(S[0],S[1],S[2]))))},u.fromjson=function(u,g){return o(u,g,((o,C,S)=>{if(ae$4(S,1,1,u,g),!1===G$3(S[0]))throw new Mt(u,St.InvalidParameter,g);return on.convertJsonToArcade(JSON.parse(me$3(S[0])),He(u))}))},u.expects=function(u,g){return o(u,g,((o,C,S)=>{if(S.length<1)throw new Mt(u,St.WrongNumberOfParameters,g);return en}))},u.tocharcode=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,2,u,g);const M=ge$2(P$7(S[1],0)),j=me$3(S[0]);if(0===j.length&&1===S.length)return null;if(j.length<=M||M<0)throw new Mt(u,St.OutOfBounds,g);return j.charCodeAt(M)}))},u.tocodepoint=function(u,g){return o(u,g,((o,C,S)=>{ae$4(S,1,2,u,g);const M=ge$2(P$7(S[1],0)),j=me$3(S[0]);if(0===j.length&&1===S.length)return null;if(j.length<=M||M<0)throw new Mt(u,St.OutOfBounds,g);return j.codePointAt(M)}))},u.fromcharcode=function(u,g){return o(u,g,((o,C,S)=>{if(S.length<1)throw new Mt(u,St.WrongNumberOfParameters,g);const M=S.map((u=>Math.trunc(ge$2(u)))).filter((u=>u>=0&&u<=65535));return 0===M.length?null:String.fromCharCode.apply(null,M)}))},u.fromcodepoint=function(u,g){return o(u,g,((o,C,S)=>{if(S.length<1)throw new Mt(u,St.WrongNumberOfParameters,g);let M;try{M=S.map((u=>Math.trunc(ge$2(u)))).filter((u=>u<=1114111&&u>>>0===u))}catch(j){return null}return 0===M.length?null:String.fromCodePoint.apply(null,M)}))},u.getuser=function(u,g){return o(u,g,((o,C,S)=>{var M;ae$4(S,0,2,u,g);let j=P$7(S[1],"");if(j=!0===j||!1===j?"":me$3(j),null!==j&&""!==j)return null;if(0===S.length||S[0]instanceof Cn){let o=null;if(o=(null==(M=u.services)?void 0:M.portal)?u.services.portal:lt.getDefault(),S.length>0&&!function q$2(u,o){return!!u&&ct(u,(null==o?void 0:o.restUrl)||"")}(S[0].field("url"),o))return null;if(!o)return null;if(""===j){const g=function E$2(u){var o;return"loaded"===u.loadStatus&&(null==(o=u.user)?void 0:o.sourceJSON)?u.user.sourceJSON:null}(o);if(g){const o=JSON.parse(JSON.stringify(g));for(const u of["lastLogin","created","modified"])void 0!==o[u]&&null!==o[u]&&(o[u]=new Date(o[u]));return on.convertObjectToArcadeDictionary(o,He(u))}}return null}throw new Mt(u,St.InvalidParameter,g)}))},u.getenvironment=function(u,g){return o(u,g,((o,C,S)=>(ae$4(S,0,0,u,g),on.convertObjectToArcadeDictionary(Ke$1(He(u),u.spatialReference),He(u),!0))))}}function z$3(u,o,g){try{return g(u,null,o.arguments)}catch(C){throw C}}function J$3(u,o){try{switch(o.type){case"EmptyStatement":return"lc.voidOperation";case"VariableDeclarator":return function ge$1(u,o){let g=null===o.init?null:J$3(u,o.init);g===en&&(g=null);const C=o.id.name.toLowerCase();if(ue$2(C),null!==u.localScope){if(void 0!==u.localScope[C])return"lscope['"+C+"']="+g+"; ";if(void 0!==u.localScope._SymbolsMap[C])return"lscope['"+u.localScope._SymbolsMap[C]+"']="+g+"; ";{const o=Ae(u);return u.localScope._SymbolsMap[C]=o,u.mangleMap[C]=o,"lscope['"+o+"']="+g+"; "}}if(void 0!==u.globalScope[C])return"gscope['"+C+"']="+g+"; ";if(void 0!==u.globalScope._SymbolsMap[C])return"gscope['"+u.globalScope._SymbolsMap[C]+"']="+g+"; ";if(u.undeclaredGlobalsInFunctions.has(C)){const o=u.undeclaredGlobalsInFunctions.get(C).manglename;return u.globalScope._SymbolsMap[C]=o,u.mangleMap[C]=o,u.undeclaredGlobalsInFunctions.delete(C),"gscope[lang.setAssig('"+o+"', runtimeCtx)]="+g+"; "}const S=Ae(u);return u.globalScope._SymbolsMap[C]=S,u.mangleMap[C]=S,"gscope['"+S+"']="+g+"; "}(u,o);case"VariableDeclaration":return function me$1(u,o){const g=[];for(let C=0;C<o.declarations.length;C++)g.push(J$3(u,o.declarations[C]));return g.join("\n")+" \n lastStatement=  lc.voidOperation; \n"}(u,o);case"BlockStatement":case"Program":return ae$2(u,o);case"FunctionDeclaration":return function pe$1(u,o){const g=o.id.name.toLowerCase();ue$2(g);let C="",S=!1;void 0!==u.globalScope[g]?C=g:void 0!==u.globalScope._SymbolsMap[g]?C=u.globalScope._SymbolsMap[g]:u.undeclaredGlobalsInFunctions.has(g)?(C=u.undeclaredGlobalsInFunctions.get(g).manglename,u.globalScope._SymbolsMap[g]=C,u.mangleMap[g]=C,u.undeclaredGlobalsInFunctions.delete(g),S=!0):(C=Ae(u),u.globalScope._SymbolsMap[g]=C,u.mangleMap[g]=C);const M={isAsync:u.isAsync,console:u.console,exports:u.exports,undeclaredGlobalsInFunctions:u.undeclaredGlobalsInFunctions,customfunctions:u.customfunctions,moduleFactory:u.moduleFactory,moduleFactoryMap:u.moduleFactoryMap,libraryResolver:u.libraryResolver,lrucache:u.lrucache,interceptor:u.interceptor,services:u.services,symbols:u.symbols,mangleMap:u.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:u.depthCounter,globalScope:u.globalScope};let j="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement = lc.voidOperation; \n   var lscope = runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";for(let xe=0;xe<o.params.length;xe++){const g=o.params[xe].name.toLowerCase();ue$2(g);const C=Ae(u);M.localScope._SymbolsMap[g]=C,M.mangleMap[g]=C,j+="lscope['"+C+"']=arguments["+xe.toString()+"];\n"}return!0===u.isAsync?(j+="return lang.__awaiter(this, void 0, void 0, function* () {\n",j+=ae$2(M,o.body)+"\n return lastStatement; ",j+="});  }",j+=", runtimeCtx),"+o.params.length+")",j+="\n lastStatement = lc.voidOperation; \n"):(j+=ae$2(M,o.body)+"\n return lastStatement; }, runtimeCtx),"+o.params.length+")",j+="\n lastStatement = lc.voidOperation; \n"),S?"gscope[lang.setAssig('"+C+"', runtimeCtx)]="+j:"gscope['"+C+"']="+j}(u,o);case"ImportDeclaration":return function ie$2(u,o){var g;const C=o.specifiers[0].local.name.toLowerCase();ue$2(C);const S=null==(g=u.libraryResolver)?void 0:g.loadLibrary(C),M=Ae(u);void 0===u.moduleFactory[S.uri]&&(u.moduleFactory[S.uri]=function Te(u,o,g=!1){const C={isAsync:g,moduleFactory:o.moduleFactory,moduleFactoryMap:{},libraryResolver:new Et(null,u.loadedModules),globalScope:Ee$1(o.vars,g?Vn:jn,o.customfunctions),customfunctions:o.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:De,lrucache:o.lrucache,timeZone:o.timeZone??null,interceptor:o.interceptor,services:o.services,symbols:{symbolCounter:0}};let S=J$3(C,u);""===S&&(S="lc.voidOperation; ");let M="";M=g?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+S+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+S+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ";const j=C.moduleFactory,xe=C.moduleFactoryMap,Oe=C.exports,Ue={};for(const We in Oe)Ue[We]=void 0!==C.mangleMap[We]?C.mangleMap[We]:We;const Je={lc:sn,lang:Kn,mangles:C.mangleMap,prepareModule:u=>new Ke(u),prepare(u,o){let g=u.spatialReference;null==g&&(g=new et({wkid:102100}));const C=Ge(u.vars,u.customfunctions,o,u.timeZone);return{localStack:[],isAsync:o,exports:Oe,exportmangle:Ue,gdefs:{},moduleFactory:j,moduleFactoryMap:xe,moduleSingletons:u.moduleSingletons,mangleMap:this.mangles,spatialReference:g,globalScope:C,abortSignal:void 0===u.abortSignal||null===u.abortSignal?{aborted:!1}:u.abortSignal,localScope:null,services:u.services,console:u.console??De,lrucache:u.lrucache,timeZone:u.timeZone??null,interceptor:u.interceptor,symbols:{symbolCounter:0},depthCounter:u.depthCounter}}};return new Function("context","spatialReference",M).bind(Je)}(S.syntax,{interceptor:u.interceptor,services:u.services,moduleFactory:u.moduleFactory,lrucache:u.lrucache,timeZone:u.timeZone??null,libraryResolver:u.libraryResolver,customfunctions:u.customfunctions,vars:{}},u.isAsync)),u.moduleFactoryMap[M]=S.uri;let j="";if(j=u.isAsync?"(yield lang.loadModule('"+M+"', runtimeCtx) ); ":"lang.loadModule('"+M+"', runtimeCtx); ",void 0!==u.globalScope[C])return"gscope['"+C+"']="+j;if(void 0!==u.globalScope._SymbolsMap[C])return"gscope['"+u.globalScope._SymbolsMap[C]+"']="+j;let xe="";return u.undeclaredGlobalsInFunctions.has(C)?(xe=u.undeclaredGlobalsInFunctions.get(C).manglename,u.undeclaredGlobalsInFunctions.delete(C)):xe=Ae(u),u.globalScope._SymbolsMap[C]=xe,u.mangleMap[C]=xe,"gscope[lang.setAssig('"+xe+"', runtimeCtx)]="+j}(u,o);case"ExportNamedDeclaration":return function ce$1(u,o){const g=J$3(u,o.declaration);if("FunctionDeclaration"===o.declaration.type)u.exports[o.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===o.declaration.type)for(const C of o.declaration.declarations)u.exports[C.id.name.toLowerCase()]="variable";return g}(u,o);case"ReturnStatement":return function se$2(u,o){return null===o.argument?"return lc.voidOperation":"return "+J$3(u,o.argument)}(u,o);case"IfStatement":return re$3(u,o);case"ExpressionStatement":return function oe$2(u,o){return"AssignmentExpression"===o.expression.type?"lastStatement = lc.voidOperation; "+J$3(u,o.expression)+"; \n ":(o.expression.type,"lastStatement = "+J$3(u,o.expression)+"; ")}(u,o);case"AssignmentExpression":return function te$3(u,o){const g=J$3(u,o.right);let C=null,S="";if("MemberExpression"===o.left.type)return C=J$3(u,o.left.object),!0===o.left.computed?S=J$3(u,o.left.property):(S="'"+o.left.property.name+"'",ue$2(o.left.property.name)),"lang.assignmember("+C+","+S+",'"+o.operator+"',"+g+")";if(C=o.left.name.toLowerCase(),ue$2(C),null!==u.localScope){if(void 0!==u.localScope[C])return"lscope['"+C+"']=lang.assign("+g+",'"+o.operator+"', lscope['"+C+"'])";if(void 0!==u.localScope._SymbolsMap[C])return"lscope['"+u.localScope._SymbolsMap[C]+"']=lang.assign("+g+",'"+o.operator+"', lscope['"+u.localScope._SymbolsMap[C]+"'])"}if(void 0!==u.globalScope[C])return"gscope['"+C+"']=lang.assign("+g+",'"+o.operator+"', gscope['"+C+"'])";if(void 0!==u.globalScope._SymbolsMap[C])return"gscope['"+u.globalScope._SymbolsMap[C]+"']=lang.assign("+g+",'"+o.operator+"', gscope['"+u.globalScope._SymbolsMap[C]+"'])";if(null!==u.localScope){if(u.undeclaredGlobalsInFunctions.has(C))return"gscope[lang.chkAssig('"+u.undeclaredGlobalsInFunctions.get(C).manglename+"',runtimeCtx)]=lang.assign("+g+",'"+o.operator+"', gscope['"+u.undeclaredGlobalsInFunctions.get(C).manglename+"'])";const S={manglename:Ae(u),node:o.argument};return u.undeclaredGlobalsInFunctions.set(C,S),"gscope[lang.chkAssig('"+S.manglename+"',runtimeCtx)]=lang.assign("+g+",'"+o.operator+"', gscope['"+S.manglename+"'])"}throw new Mt(u,St.InvalidIdentifier,o)}(u,o);case"UpdateExpression":return function ee$3(u,o){let g=null,C="";if("MemberExpression"===o.argument.type)return g=J$3(u,o.argument.object),!0===o.argument.computed?C=J$3(u,o.argument.property):(C="'"+o.argument.property.name+"'",ue$2(o.argument.property.name)),"lang.memberupdate("+g+","+C+",'"+o.operator+"',"+o.prefix+")";if(g=o.argument.name.toLowerCase(),ue$2(g),null!==u.localScope){if(void 0!==u.localScope[g])return"lang.update(lscope, '"+g+"','"+o.operator+"',"+o.prefix+")";if(void 0!==u.localScope._SymbolsMap[g])return"lang.update(lscope, '"+u.localScope._SymbolsMap[g]+"','"+o.operator+"',"+o.prefix+")"}if(void 0!==u.globalScope[g])return"lang.update(gscope, '"+g+"','"+o.operator+"',"+o.prefix+")";if(void 0!==u.globalScope._SymbolsMap[g])return"lang.update(gscope, '"+u.globalScope._SymbolsMap[g]+"','"+o.operator+"',"+o.prefix+")";if(null!==u.localScope){if(u.undeclaredGlobalsInFunctions.has(g))return"lang.update(gscope,lang.chkAssig( '"+u.undeclaredGlobalsInFunctions.get(g).manglename+"',runtimeCtx),'"+o.operator+"',"+o.prefix+")";const C={manglename:Ae(u),node:o.argument};return u.undeclaredGlobalsInFunctions.set(g,C),"lang.update(gscope, lang.chkAssig('"+C.manglename+"',runtimeCtx),'"+o.operator+"',"+o.prefix+")"}throw new Mt(u,St.InvalidIdentifier,o)}(u,o);case"BreakStatement":return"break";case"ContinueStatement":return"continue";case"TemplateLiteral":return function ye$1(u,o){try{const g=[];let C=0;for(const S of o.quasis)g.push(S.value?JSON.stringify(S.value.cooked):JSON.stringify("")),!1===S.tail&&(g.push(o.expressions[C]?"lang.castString(lang.aCheck("+J$3(u,o.expressions[C])+", 'TemplateLiteral'))":""),C++);return"(["+g.join(",")+"]).join('')"}catch(g){throw g}}(u,o);case"TemplateElement":return JSON.stringify(o.value?o.value.cooked:"");case"ForStatement":return function X$3(u,o){let g="lastStatement = lc.voidOperation; \n";null!==o.init&&(g+=J$3(u,o.init)+"; ");const C=_e(u),S=_e(u);return g+="var "+C+" = true; ",g+="\n do { ",null!==o.update&&(g+=" if ("+C+"===false) {\n "+J$3(u,o.update)+"  \n}\n "+C+"=false; \n"),null!==o.test&&(g+="var "+S+" = "+J$3(u,o.test)+"; ",g+="if ("+S+"===false) { break; } else if ("+S+"!==true) { lang.error('"+St.BooleanConditionRequired+"');   }\n"),g+=J$3(u,o.body),null!==o.update&&(g+="\n "+J$3(u,o.update)),g+="\n"+C+" = true; \n} while(true);  lastStatement = lc.voidOperation; ",g}(u,o);case"ForInStatement":return function Q$3(u,o){const g=_e(u),C=_e(u),S=_e(u);let M="var "+g+" = "+J$3(u,o.right)+";\n";"VariableDeclaration"===o.left.type&&(M+=J$3(u,o.left));let j="VariableDeclaration"===o.left.type?o.left.declarations[0].id.name:o.left.name;j=j.toLowerCase(),ue$2(j);let xe="";null!==u.localScope&&(void 0!==u.localScope[j]?xe="lscope['"+j+"']":void 0!==u.localScope._SymbolsMap[j]&&(xe="lscope['"+u.localScope._SymbolsMap[j]+"']"));let Oe="";if(""===xe)if(void 0!==u.globalScope[j])xe="gscope['"+j+"']";else if(void 0!==u.globalScope._SymbolsMap[j])xe="gscope['"+u.globalScope._SymbolsMap[j]+"']";else if(null!==u.localScope)if(u.undeclaredGlobalsInFunctions.has(j))xe="gscope['"+u.undeclaredGlobalsInFunctions.get(j).manglename+"']",Oe=u.undeclaredGlobalsInFunctions.get(j).manglename;else{const g={manglename:Ae(u),node:o.left};u.undeclaredGlobalsInFunctions.set(j,g),xe="gscope['"+g.manglename+"']",Oe=g.manglename}return Oe&&(M+="lang.chkAssig('"+Oe+"',runtimeCtx); \n"),M+="if ("+g+"===null) {  lastStatement = lc.voidOperation; }\n ",M+="else if (lc.isArray("+g+") || lc.isString("+g+")) {",M+="var "+C+"="+g+".length; \n",M+="for(var "+S+"=0; "+S+"<"+C+"; "+S+"++) {\n",M+=xe+"="+S+";\n",M+=J$3(u,o.body),M+="\n}\n",M+=" lastStatement = lc.voidOperation; \n",M+=" \n}\n",M+="else if (lc.isImmutableArray("+g+")) {",M+="var "+C+"="+g+".length(); \n",M+="for(var "+S+"=0; "+S+"<"+C+"; "+S+"++) {\n",M+=xe+"="+S+";\n",M+=J$3(u,o.body),M+="\n}\n",M+=" lastStatement = lc.voidOperation; \n",M+=" \n}\n",M+="else if (( "+g+" instanceof lang.Dictionary) || ( "+g+" instanceof lang.Feature)) {",M+="var "+C+"="+g+".keys(); \n",M+="for(var "+S+"=0; "+S+"<"+C+".length; "+S+"++) {\n",M+=xe+"="+C+"["+S+"];\n",M+=J$3(u,o.body),M+="\n}\n",M+=" lastStatement = lc.voidOperation; \n",M+=" \n}\n",u.isAsync&&(M+="else if (lc.isFeatureSet("+g+")) {",M+="var "+C+"="+g+".iterator(runtimeCtx.abortSignal); \n",M+="for(var "+S+"=lang. graphicToFeature( yield "+C+".next(),"+g+", runtimeCtx); "+S+"!=null; "+S+"=lang. graphicToFeature( yield "+C+".next(),"+g+", runtimeCtx)) {\n",M+=xe+"="+S+";\n",M+=J$3(u,o.body),M+="\n}\n",M+=" lastStatement = lc.voidOperation; \n",M+=" \n}\n"),M+="else { lastStatement = lc.voidOperation; } \n",M}(u,o);case"WhileStatement":return function ne$2(u,o){let g="lastStatement = lc.voidOperation; \n";const C=_e(u);return g+=`\n  var ${C} = true;\n    do {\n      ${C} = ${J$3(u,o.test)};\n      if (${C}==false) {\n        break;\n      }\n      if (${C}!==true) {\n        lang.error('${St.BooleanConditionRequired}');\n      }\n      ${J$3(u,o.body)}\n    }\n    while (${C} !== false);\n    lastStatement = lc.voidOperation;\n  `,g}(u,o);case"Identifier":return function Se$1(u,o){try{const g=o.name.toLowerCase();if(ue$2(g),null!==u.localScope){if(void 0!==u.localScope[g])return"lscope['"+g+"']";if(void 0!==u.localScope._SymbolsMap[g])return"lscope['"+u.localScope._SymbolsMap[g]+"']"}if(void 0!==u.globalScope[g])return"gscope['"+g+"']";if(void 0!==u.globalScope._SymbolsMap[g])return"gscope['"+u.globalScope._SymbolsMap[g]+"']";if(null!==u.localScope){if(u.undeclaredGlobalsInFunctions.has(g))return"gscope[lang.chkAssig('"+u.undeclaredGlobalsInFunctions.get(g).manglename+"',runtimeCtx)]";const C={manglename:Ae(u),node:o.argument};return u.undeclaredGlobalsInFunctions.set(g,C),"gscope[lang.chkAssig('"+C.manglename+"',runtimeCtx)]"}throw new Bt(u,St.InvalidIdentifier,o)}catch(g){throw g}}(u,o);case"MemberExpression":return function de$1(u,o){try{let g;return!0===o.computed?g=J$3(u,o.property):(g="'"+o.property.name+"'",ue$2(o.property.name)),"lang.member("+J$3(u,o.object)+","+g+")"}catch(g){throw g}}(u,o);case"Literal":return null===o.value||void 0===o.value?"null":JSON.stringify(o.value);case"CallExpression":return function ve$1(u,o){try{if("MemberExpression"===o.callee.type){let g;!0===o.callee.computed?g=J$3(u,o.callee.property):(g="'"+o.callee.property.name+"'",ue$2(o.callee.property.name));let C="[";for(let S=0;S<o.arguments.length;S++)S>0&&(C+=", "),C+=J$3(u,o.arguments[S]);return C+="]",u.isAsync?"(yield lang.callModuleFunction("+J$3(u,o.callee.object)+","+C+","+g+",runtimeCtx))":"lang.callModuleFunction("+J$3(u,o.callee.object)+","+C+","+g+",runtimeCtx)"}if("Identifier"!==o.callee.type)throw new Bt(u,St.FunctionNotFound,o);const g=o.callee.name.toLowerCase();if("iif"===g)return function xe$1(u,o){try{if(3!==o.arguments.length)throw new Bt(u,St.WrongNumberOfParameters,o);const g=_e(u);return`${u.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${g} = ${J$3(u,o.arguments[0])};\n\n        if (${g} === true) {\n          return  ${J$3(u,o.arguments[1])};\n        }\n        else if (${g} === false) {\n          return ${J$3(u,o.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${u.isAsync?"})}()))":"}()"}`}catch(g){throw g}}(u,o);if("when"===g)return function Fe$1(u,o){try{if(o.arguments.length<3)throw new Bt(u,St.WrongNumberOfParameters,o);if(o.arguments.length%2==0)throw new Bt(u,St.WrongNumberOfParameters,o);const g=_e(u);let C="var ";for(let S=0;S<o.arguments.length-1;S+=2)C+=`${g} = lang.mustBoolean(${J$3(u,o.arguments[S])}, runtimeCtx);\n      if (${g} === true ) {\n        return ${J$3(u,o.arguments[S+1])}\n      }\n`;return`${u.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        ${C}\n        return ${J$3(u,o.arguments[o.arguments.length-1])}\n        ${u.isAsync?"})}()))":"}()"}`}catch(g){throw g}}(u,o);if("defaultvalue"===g)return function Me$1(u,o){try{if(o.arguments.length<2||o.arguments.length>3)throw new Bt(u,St.WrongNumberOfParameters,o);const g=_e(u),C=_e(u);return 3===o.arguments.length?`${u.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n      var ${g} = ${J$3(u,o.arguments[0])};\n      var ${C} = ${J$3(u,o.arguments[1])};\n      ${g} = lang.getNestedOptionalValue(${g}, ${C});\n      return ${g} != null && ${g} !== "" ? ${g} : ${J$3(u,o.arguments[2])};\n      ${u.isAsync?"})}()))":"}()"}`:`${u.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${g} = ${J$3(u,o.arguments[0])};\n        if (${g} === null) {\n          return  ${J$3(u,o.arguments[1])};\n        }\n        if (${g} === "") {\n          return  ${J$3(u,o.arguments[1])};\n        }\n        if (${g} === undefined) {\n          return  ${J$3(u,o.arguments[1])};\n        }\n        return ${g};\n      ${u.isAsync?"})}()))":"}()"}`}catch(g){throw g}}(u,o);if("decode"===g)return function Ce$1(u,o){try{if(o.arguments.length<2)throw new Bt(u,St.WrongNumberOfParameters,o);if(2===o.arguments.length)return`(${J$3(u,o.arguments[1])})`;if((o.arguments.length-1)%2==0)throw new Bt(u,St.WrongNumberOfParameters,o);const g=_e(u),C=_e(u);let S="var ";for(let M=1;M<o.arguments.length-1;M+=2)S+=`${C} = ${J$3(u,o.arguments[M])};\n      if (lang.binary(${C}, ${g}, "==") === true ) {\n        return ${J$3(u,o.arguments[M+1])}\n      }\n`;return`${u.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${g} = ${J$3(u,o.arguments[0])};\n        ${S}\n        return ${J$3(u,o.arguments[o.arguments.length-1])}\n        ${u.isAsync?"})}()))":"}()"}`}catch(g){throw g}}(u,o);let C="";if(null!==u.localScope&&(void 0!==u.localScope[g]?C="lscope['"+g+"']":void 0!==u.localScope._SymbolsMap[g]&&(C="lscope['"+u.localScope._SymbolsMap[g]+"']")),""===C)if(void 0!==u.globalScope[g])C="gscope['"+g+"']";else if(void 0!==u.globalScope._SymbolsMap[g])C="gscope['"+u.globalScope._SymbolsMap[g]+"']";else if(null!==u.localScope)if(u.undeclaredGlobalsInFunctions.has(g))C="gscope[lang.chkAssig('"+u.undeclaredGlobalsInFunctions.get(g).manglename+"',runtimeCtx)]";else{const S={manglename:Ae(u),node:o.argument};u.undeclaredGlobalsInFunctions.set(g,S),C="gscope[lang.chkAssig('"+S.manglename+"',runtimeCtx)]"}if(""!==C){let g="[";for(let C=0;C<o.arguments.length;C++)C>0&&(g+=", "),g+=J$3(u,o.arguments[C]);return g+="]",u.isAsync?"(yield lang.callfunc("+C+","+g+",runtimeCtx) )":"lang.callfunc("+C+","+g+",runtimeCtx)"}throw new Bt(u,St.FunctionNotFound,o)}catch(g){throw g}}(u,o);case"UnaryExpression":return function fe$1(u,o){try{return"lang.unary("+J$3(u,o.argument)+",'"+o.operator+"')"}catch(g){throw g}}(u,o);case"BinaryExpression":return function be$1(u,o){try{return"lang.binary("+J$3(u,o.left)+","+J$3(u,o.right)+",'"+o.operator+"')"}catch(g){throw g}}(u,o);case"LogicalExpression":return function we$1(u,o){try{if("AssignmentExpression"===o.left.type||"UpdateExpression"===o.left.type)throw new Bt(u,St.LogicalExpressionOnlyBoolean,o);if("AssignmentExpression"===o.right.type||"UpdateExpression"===o.right.type)throw new Bt(u,St.LogicalExpressionOnlyBoolean,o);if("&&"===o.operator||"||"===o.operator)return"(lang.logicalCheck("+J$3(u,o.left)+") "+o.operator+" lang.logicalCheck("+J$3(u,o.right)+"))";throw new Bt(null,St.LogicExpressionOrAnd,null)}catch(g){throw g}}(u,o);case"ArrayExpression":return function he$1(u,o){try{const g=[];for(let C=0;C<o.elements.length;C++)"Literal"===o.elements[C].type?g.push(J$3(u,o.elements[C])):g.push("lang.aCheck("+J$3(u,o.elements[C])+",'ArrayExpression')");return"["+g.join(",")+"]"}catch(g){throw g}}(u,o);case"ObjectExpression":return function Y$3(u,o){let g="lang.dictionary([";for(let C=0;C<o.properties.length;C++){const S=o.properties[C];ue$2(S.key.name),C>0&&(g+=","),g+="lang.strCheck("+("Identifier"===S.key.type?"'"+S.key.name+"'":J$3(u,S.key))+",'ObjectExpression'),lang.aCheck("+J$3(u,S.value)+", 'ObjectExpression')"}return g+="])",g}(u,o);case"Property":return function H$4(u,o){throw new Bt(u,St.NeverReach,o)}(u,o);case"Array":throw new Bt(u,St.NeverReach,o);default:throw new Bt(u,St.Unrecognized,o)}}catch(g){throw g}}function le$1(u,o){return"BlockStatement"===o.type?J$3(u,o):"ReturnStatement"===o.type||"BreakStatement"===o.type||"ContinueStatement"===o.type?J$3(u,o)+"; ":"UpdateExpression"===o.type?"lastStatement = "+J$3(u,o)+"; ":"ExpressionStatement"===o.type?J$3(u,o):"ObjectExpression"===o.type?"lastStatement = "+J$3(u,o)+"; ":J$3(u,o)+"; "}function re$3(u,o){if("AssignmentExpression"===o.test.type||"UpdateExpression"===o.test.type)throw new Bt(u,St.BooleanConditionRequired,o);return`if (lang.mustBoolean(${J$3(u,o.test)}, runtimeCtx) === true) {\n    ${le$1(u,o.consequent)}\n  } `+(null!==o.alternate?"IfStatement"===o.alternate.type?" else "+re$3(u,o.alternate):` else {\n      ${le$1(u,o.alternate)}\n    }\n`:" else {\n      lastStatement = lc.voidOperation;\n    }\n")}function ae$2(u,o){let g="";for(let C=0;C<o.body.length;C++)"EmptyStatement"!==o.body[C].type&&("ReturnStatement"===o.body[C].type||"BreakStatement"===o.body[C].type||"ContinueStatement"===o.body[C].type?g+=J$3(u,o.body[C])+"; \n":"UpdateExpression"===o.body[C].type||"ObjectExpression"===o.body[C].type?g+="lastStatement = "+J$3(u,o.body[C])+"; \n":g+=J$3(u,o.body[C])+" \n");return g}function ue$2(u){if("iif"===u)throw new Nt;if("decode"===u)throw new Nt;if("when"===u)throw new Nt;if("defaultvalue"===u)throw new Nt}const jn={};function Ae(u){return u.symbols.symbolCounter++,"_T"+u.symbols.symbolCounter.toString()}function _e(u){return u.symbols.symbolCounter++,"_Tvar"+u.symbols.symbolCounter.toString()}C$4(jn,z$3),Y$4(jn,z$3),M$4(jn,z$3),L$4(jn,z$3),f$1(jn,z$3),jn.iif=function(u,o){try{return z$3(u,o,((g,C,S)=>{throw new Mt(u,St.Unrecognized,o)}))}catch(g){throw g}},jn.decode=function(u,o){try{return z$3(u,o,((g,C,S)=>{throw new Mt(u,St.Unrecognized,o)}))}catch(g){throw g}},jn.when=function(u,o){try{return z$3(u,o,((g,C,S)=>{throw new Mt(u,St.Unrecognized,o)}))}catch(g){throw g}},jn.defaultvalue=function(u,o){try{return z$3(u,o,((g,C,S)=>{throw new Mt(u,St.Unrecognized,o)}))}catch(g){throw g}};const Vn={};for(const Ui in jn)Vn[Ui]=new Ut(jn[Ui]);H$6(jn,z$3);for(const Ui in jn)jn[Ui]=new Ut(jn[Ui]);const $e=function(){};$e.prototype=jn;const ke=function(){};function Ee$1(u,o,g){const C={};u||(u={}),g||(g={}),C._SymbolsMap={},C.textformatting=1,C.infinity=1,C.pi=1;for(const S in o)C[S]=1;for(const S in g)C[S]=1;for(const S in u)C[S]=1;return C}function Ge(u,o,g,C){const S=g?new ke:new $e;u||(u={}),o||(o={});const M=new on({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});M.immutable=!1,S._SymbolsMap={textformatting:1,infinity:1,pi:1},S.textformatting=M,S.infinity=Number.POSITIVE_INFINITY,S.pi=Math.PI;for(const j in o)S[j]=o[j],S._SymbolsMap[j]=1;for(const j in u)S._SymbolsMap[j]=1,u[j]&&"esri.Graphic"===u[j].declaredClass?S[j]=cn.createFromGraphic(u[j],C??null):S[j]=u[j];return S}function je(u,o){const g={mode:o,compiled:!0,functions:{},signatures:[],standardFunction:z$3,standardFunctionAsync:z$3,evaluateIdentifier:Le$1};for(let C=0;C<u.length;C++)u[C].registerFunctions(g);if("sync"===o){for(const u in g.functions)jn[u]=new Ut(g.functions[u]),$e.prototype[u]=jn[u];for(let u=0;u<g.signatures.length;u++)o$2(g.signatures[u],"sync")}else{for(const u in g.functions)Vn[u]=new Ut(g.functions[u]),ke.prototype[u]=Vn[u];for(let u=0;u<g.signatures.length;u++)o$2(g.signatures[u],"async")}}function Le$1(u,o){const g=o.name;if("_SymbolsMap"===g)throw new Mt(u,St.InvalidIdentifier,null);if(u.localStack.length>0){if("_t"!==g.substr(0,2).toLowerCase()&&void 0!==u.localStack[u.localStack.length-1][g])return u.localStack[u.localStack.length-1][g];const o=u.mangleMap[g];if(void 0!==o&&void 0!==u.localStack[u.localStack.length-1][o])return u.localStack[u.localStack.length-1][o]}if("_t"!==g.substr(0,2).toLowerCase()&&void 0!==u.globalScope[g])return u.globalScope[g];if(1===u.globalScope._SymbolsMap[g])return u.globalScope[g];const C=u.mangleMap[g];return void 0!==C?u.globalScope[C]:void 0}ke.prototype=Vn,je([$n],"sync"),je([$n],"async");let qn=0;const Kn={isNumber:u=>E$4(u),isArray:u=>U$5(u),isImmutableArray:u=>Q$5(u),isFeature:u=>H$7(u),isString:u=>G$3(u),isDictionary:u=>K$4(u),isGeometry:u=>q$5(u),geometryMember:(u,o,g,C,S=1)=>d$6(u,o,g,C,S),error(u){throw new Mt(null,u,null)},__awaiter:(u,o,g,C)=>new Promise(((g,S)=>{function r3(u){try{s5(C.next(u))}catch(o){S(o)}}function a3(u){try{s5(C.throw(u))}catch(o){S(o)}}function s5(u){var o;u.done?g(u.value):(null==(o=u.value)?void 0:o.then)?u.value.then(r3,a3):(qn++,qn%100==0?setTimeout((()=>{qn=0,r3(u.value)}),0):r3(u.value))}s5((C=C.apply(u,o||[])).next())})),functionDepthchecker:(u,g)=>function(){if(g.depthCounter.depth++,g.localStack.push([]),g.depthCounter.depth>64)throw new Mt(null,St.MaximumCallDepth,null);const C=u.apply(this,arguments);return o(C)?C.then((u=>(g.depthCounter.depth--,g.localStack.length=g.localStack.length-1,u))):(g.depthCounter.depth--,g.localStack.length=g.localStack.length-1,C)},chkAssig(u,o){if(void 0===o.gdefs[u])throw new Mt(o,St.InvalidIdentifier,null);return u},mustBoolean(u,o){if(!0===u||!1===u)return u;throw new Mt(o,St.BooleanConditionRequired,null)},setAssig:(u,o)=>(o.gdefs[u]=1,u),castString:u=>me$3(u),aCheck(u,o){if(_$4(u)){if("ArrayExpression"===o)throw new Mt(null,St.NoFunctionInArray,null);if("ObjectExpression"===o)throw new Mt(null,St.NoFunctionInDictionary,null);throw new Mt(null,St.NoFunctionInTemplateLiteral,null)}return u===en?null:u},Dictionary:on,Feature:cn,UserDefinedCompiledFunction:class W extends Lt{constructor(u,o){super(),this.paramCount=o,this.fn=u}createFunction(u){return(...o)=>{if(o.length!==this.paramCount)throw new Mt(u,St.WrongNumberOfParameters,null);return this.fn(...o)}}call(u,o){return this.fn(...o.arguments)}marshalledCall(u,g,C,S){return S(u,g,((g,M,j)=>{j=j.map((o=>!_$4(o)||o instanceof Gt?o:n$2(o,u,S)));const xe=this.call(C,{arguments:j});return o(xe)?xe.then((u=>n$2(u,C,S))):xe}))}},dictionary(u){const o={},g=new Map;for(let S=0;S<u.length;S+=2){if(_$4(u[S+1]))throw new Mt(null,St.NoFunctionInDictionary,null);if(!1===G$3(u[S]))throw new Mt(null,St.KeyMustBeString,null);let C=u[S].toString();const M=C.toLowerCase();g.has(M)?C=g.get(M):g.set(M,C),u[S+1]===en?o[C]=null:o[C]=u[S+1]}const C=new on(o);return C.immutable=!1,C},strCheck(u){if(!1===G$3(u))throw new Mt(null,St.KeyMustBeString,null);return u},unary(u,o){if(z$6(u)){if("!"===o)return!u;if("-"===o)return-1*ge$2(u);if("+"===o)return 1*ge$2(u);if("~"===o)return~ge$2(u);throw new Mt(null,St.UnsupportedUnaryOperator,null)}if("-"===o)return-1*ge$2(u);if("+"===o)return 1*ge$2(u);if("~"===o)return~ge$2(u);throw new Mt(null,St.UnsupportedUnaryOperator,null)},logicalCheck(u){if(!1===z$6(u))throw new Mt(null,St.LogicExpressionOrAnd,null);return u},logical(u,o,g){if(z$6(u)&&z$6(o))switch(g){case"||":return u||o;case"&&":return u&&o;default:throw new Mt(null,St.LogicExpressionOrAnd,null)}throw new Mt(null,St.LogicExpressionOrAnd,null)},binary(u,o,g){switch(g){case"|":case"<<":case">>":case">>>":case"^":case"&":return _e$1(ge$2(u),ge$2(o),g);case"==":case"=":return ce$3(u,o);case"!=":return!ce$3(u,o);case"<":case">":case"<=":case">=":return fe$2(u,o,g);case"+":return G$3(u)||G$3(o)?me$3(u)+me$3(o):ge$2(u)+ge$2(o);case"-":return ge$2(u)-ge$2(o);case"*":return ge$2(u)*ge$2(o);case"/":return ge$2(u)/ge$2(o);case"%":return ge$2(u)%ge$2(o);default:throw new Mt(null,St.UnsupportedOperator,null)}},assign(u,o,g){switch(o){case"=":return u===en?null:u;case"/=":return ge$2(g)/ge$2(u);case"*=":return ge$2(g)*ge$2(u);case"-=":return ge$2(g)-ge$2(u);case"+=":return G$3(g)||G$3(u)?me$3(g)+me$3(u):ge$2(g)+ge$2(u);case"%=":return ge$2(g)%ge$2(u);default:throw new Mt(null,St.UnsupportedOperator,null)}},update(u,o,g,C){const S=ge$2(u[o]);return u[o]="++"===g?S+1:S-1,!1===C?S:"++"===g?S+1:S-1},graphicToFeature:(u,o,g)=>null===u?null:cn.createFromGraphicLikeObject(u.geometry,u.attributes,o,g.timeZone),memberupdate(u,o,g,C){let S;if(U$5(u)){if(!E$4(o))throw new Mt(null,St.ArrayAccessorMustBeNumber,null);if(o<0&&(o=u.length+o),o<0||o>=u.length)throw new Mt(null,St.OutOfBounds,null);S=ge$2(u[o]),u[o]="++"===g?S+1:S-1}else if(u instanceof on){if(!1===G$3(o))throw new Mt(null,St.KeyAccessorMustBeString,null);if(!0!==u.hasField(o))throw new Mt(null,St.FieldNotFound,null,{key:o});S=ge$2(u.field(o)),u.setField(o,"++"===g?S+1:S-1)}else if(H$7(u)){if(!1===G$3(o))throw new Mt(null,St.KeyAccessorMustBeString,null);if(!0!==u.hasField(o))throw new Mt(null,St.FieldNotFound,null);S=ge$2(u.field(o)),u.setField(o,"++"===g?S+1:S-1)}else{if(Q$5(u))throw new Mt(null,St.Immutable,null);if(!(u instanceof Ke))throw new Mt(null,St.InvalidIdentifier,null);if(!1===G$3(o))throw new Mt(null,St.ModuleAccessorMustBeString,null);if(!0!==u.hasGlobal(o))throw new Mt(null,St.ModuleExportNotFound,null);S=ge$2(u.global(o)),u.setGlobal(o,"++"===g?S+1:S-1)}return!1===C?S:"++"===g?S+1:S-1},assignmember(u,o,g,C){if(U$5(u)){if(!E$4(o))throw new Mt(null,St.ArrayAccessorMustBeNumber,null);if(o<0&&(o=u.length+o),o<0||o>u.length)throw new Mt(null,St.OutOfBounds,null);if(o===u.length){if("="!==g)throw new Mt(null,St.OutOfBounds,null);u[o]=this.assign(C,g,u[o])}else u[o]=this.assign(C,g,u[o])}else if(u instanceof on){if(!1===G$3(o))throw new Mt(null,St.KeyAccessorMustBeString,null);if(!0===u.hasField(o))u.setField(o,this.assign(C,g,u.field(o)));else{if("="!==g)throw new Mt(null,St.FieldNotFound,null);u.setField(o,this.assign(C,g,null))}}else if(H$7(u)){if(!1===G$3(o))throw new Mt(null,St.KeyAccessorMustBeString,null);if(!0===u.hasField(o))u.setField(o,this.assign(C,g,u.field(o)));else{if("="!==g)throw new Mt(null,St.FieldNotFound,null);u.setField(o,this.assign(C,g,null))}}else{if(Q$5(u))throw new Mt(null,St.Immutable,null);if(!(u instanceof Ke))throw new Mt(null,St.InvalidIdentifier,null);if(!1===G$3(o))throw new Mt(null,St.ModuleAccessorMustBeString,null);if(!u.hasGlobal(o))throw new Mt(null,St.ModuleExportNotFound,null);u.setGlobal(o,this.assign(C,g,u.global(o)))}},member(u,o){if(null===u)throw new Mt(null,St.MemberOfNull,null);if(u instanceof on||H$7(u)){if(G$3(o))return u.field(o);throw new Mt(null,St.InvalidMemberAccessKey,null)}if(u instanceof Ue){if(G$3(o))return d$6(u,o,null,null);throw new Mt(null,St.InvalidMemberAccessKey,null)}if(U$5(u)){if(E$4(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=u.length+o),o>=u.length||o<0)throw new Mt(null,St.OutOfBounds,null);return u[o]}throw new Mt(null,St.InvalidMemberAccessKey,null)}if(G$3(u)){if(E$4(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=u.length+o),o>=u.length||o<0)throw new Mt(null,St.OutOfBounds,null);return u[o]}throw new Mt(null,St.InvalidMemberAccessKey,null)}if(Q$5(u)){if(E$4(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=u.length()+o),o>=u.length()||o<0)throw new Mt(null,St.OutOfBounds,null);return u.get(o)}throw new Mt(null,St.InvalidMemberAccessKey,null)}if(u instanceof Ke){if(G$3(o))return u.global(o);throw new Mt(null,St.InvalidMemberAccessKey,null)}throw new Mt(null,St.InvalidMemberAccessKey,null)},callfunc:(u,o,g)=>u.call(g,{arguments:o,preparsed:!0}),loadModule(u,o){const g=o.moduleFactoryMap[u];if(o.moduleSingletons[g])return o.moduleSingletons[g];const C=o.moduleFactory[g]({vars:{},moduleSingletons:o.moduleSingletons,depthCounter:o.depthCounter,console:o.console,abortSignal:o.abortSignal,isAsync:o.isAsync,services:o.services,lrucache:o.lrucache,timeZone:o.timeZone??null,interceptor:o.interceptor},o.spatialReference);return o.moduleSingletons[g]=C,C},callModuleFunction(u,o,g,C){if(!(u instanceof Ke))throw new Mt(null,St.FunctionNotFound,null);const S=u.global(g);if(!1===_$4(S))throw new Mt(null,St.CallNonFunction,null);return S.call(C,{preparsed:!0,arguments:o})},getNestedOptionalValue:(u,o)=>p$7(u,o)};function De(u){}function Pe(u,o,g=!1){null===o&&(o={vars:{},customfunctions:{}});let C=null;u.usesModules&&(C=new Et(null,u.loadedModules));const S={isAsync:g,globalScope:Ee$1(o.vars,g?Vn:jn,o.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:o.customfunctions,libraryResolver:C,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:De,lrucache:o.lrucache,timeZone:o.timeZone??null,interceptor:o.interceptor,services:o.services,symbols:{symbolCounter:0}};let M=J$3(S,u);""===M&&(M="lc.voidOperation; "),S.undeclaredGlobalsInFunctions.size>0&&S.undeclaredGlobalsInFunctions.forEach((u=>{throw new Bt(o,St.InvalidIdentifier,u.node)}));let j="";j=g?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+M+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+M+"\n return lastStatement; } \n return this.postProcess(mainBody()); ";const xe=S.moduleFactory,Oe=S.moduleFactoryMap,Ue=S.exports,Je={};for(const Xe in Ue)Je[Xe]=void 0!==S.mangleMap[Xe]?S.mangleMap[Xe]:Xe;const We={lc:sn,lang:Kn,mangles:S.mangleMap,postProcess(u){if(u instanceof Yt&&(u=u.value),u instanceof Qt&&(u=u.value),u===en&&(u=null),u===tn)throw new Mt(null,St.IllegalResult,null);if(u===nn)throw new Mt(null,St.IllegalResult,null);if(_$4(u))throw new Mt(null,St.IllegalResult,null);return u},prepare(u,o){let g=u.spatialReference;null==g&&(g=et.WebMercator);const C=Ge(u.vars,u.customfunctions,o,u.timeZone);return{localStack:[],isAsync:o,moduleFactory:xe,moduleFactoryMap:Oe,mangleMap:this.mangles,moduleSingletons:{},exports:Ue,gdefs:{},exportmangle:Je,spatialReference:g,globalScope:C,abortSignal:void 0===u.abortSignal||null===u.abortSignal?{aborted:!1}:u.abortSignal,localScope:null,services:u.services,console:u.console??De,lrucache:u.lrucache,timeZone:u.timeZone??null,interceptor:u.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return new Function("context","spatialReference",j).bind(We)}class Ke extends vt{constructor(u){super(null),this.moduleContext=u}hasGlobal(u){return void 0===this.moduleContext.exports[u]&&(u=u.toLowerCase()),void 0!==this.moduleContext.exports[u]}setGlobal(u,o){const g=this.moduleContext.globalScope,C=u.toLowerCase();if(_$4(o))throw new Mt(null,St.AssignModuleFunction,null);g[this.moduleContext.exportmangle[C]]=o}global(u){const o=this.moduleContext.globalScope;u=u.toLowerCase();const g=o[this.moduleContext.exportmangle[u]];if(void 0===g)throw new Mt(null,St.InvalidIdentifier,null);if(_$4(g)&&!(g instanceof Gt)){const C=new Gt;return C.fn=g,C.parameterEvaluator=z$3,C.context=this.moduleContext,o[this.moduleContext.exportmangle[u]]=C,C}return g}}var Wn="false",Xn="null",Qn="true",Yn="break",er="continue",tr="else",nr="for",rr="from",ir="function",ar="if",sr="import",ur="export",or="in",lr="return",cr="var",dr="while",fr="AssignmentExpression",hr="ArrayExpression",mr="BlockComment",pr="BlockStatement",$r="BinaryExpression",gr="BreakStatement",Dr="CallExpression",yr="ContinueStatement",wr="EmptyStatement",xr="ExpressionStatement",Fr="ExportNamedDeclaration",Cr="ForStatement",Ar="ForInStatement",br="FunctionDeclaration",vr="Identifier",Er="IfStatement",Sr="ImportDeclaration",Ir="ImportDefaultSpecifier",kr="LineComment",_r="Literal",Tr="LogicalExpression",Mr="MemberExpression",Br="ObjectExpression",Nr="Program",Pr="Property",Rr="ReturnStatement",Or="TemplateElement",Lr="TemplateLiteral",Ur="UnaryExpression",Gr="UpdateExpression",zr="VariableDeclaration",Zr="VariableDeclarator",Jr="WhileStatement",Hr=["++","--"],jr=["-","+","!","~"],Vr=["=","/=","*=","%=","+=","-="],qr=["||","&&"],Kr={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},Wr=1,Xr=2,Qr=3,Yr=4,ei=5,ti=6,ni=7,ri=8,ii=10,ai=["Unknown","Boolean","<end>","Identifier","Keyword","Null","Numeric","Punctuator","String","RegularExpression","Template"],si={InvalidModuleUri:"InvalidModuleUri",ForInOfLoopInitializer:"ForInOfLoopInitializer",IdentiferExpected:"IdentiferExpected",InvalidEscapedReservedWord:"InvalidEscapedReservedWord",InvalidExpression:"InvalidExpression",InvalidFunctionIdentifier:"InvalidFunctionIdentifier",InvalidHexEscapeSequence:"InvalidHexEscapeSequence",InvalidLeftHandSideInAssignment:"InvalidLeftHandSideInAssignment",InvalidLeftHandSideInForIn:"InvalidLeftHandSideInForIn",InvalidTemplateHead:"InvalidTemplateHead",InvalidVariableAssignment:"InvalidVariableAssignment",KeyMustBeString:"KeyMustBeString",NoFunctionInsideBlock:"NoFunctionInsideBlock",NoFunctionInsideFunction:"NoFunctionInsideFunction",ModuleExportRootOnly:"ModuleExportRootOnly",ModuleImportRootOnly:"ModuleImportRootOnly",PunctuatorExpected:"PunctuatorExpected",TemplateOctalLiteral:"TemplateOctalLiteral",UnexpectedBoolean:"UnexpectedBoolean",UnexpectedEndOfScript:"UnexpectedEndOfScript",UnexpectedIdentifier:"UnexpectedIdentifier",UnexpectedKeyword:"UnexpectedKeyword",UnexpectedNull:"UnexpectedNull",UnexpectedNumber:"UnexpectedNumber",UnexpectedPunctuator:"UnexpectedPunctuator",UnexpectedString:"UnexpectedString",UnexpectedTemplate:"UnexpectedTemplate",UnexpectedToken:"UnexpectedToken"},ui={[si.InvalidModuleUri]:"Module uri must be a text literal.",[si.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[si.IdentiferExpected]:"'${value}' is an invalid identifier.",[si.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[si.InvalidExpression]:"Invalid expression.",[si.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[si.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[si.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[si.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",[si.InvalidTemplateHead]:"Invalid template structure.",[si.InvalidVariableAssignment]:"Invalid variable assignment.",[si.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[si.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[si.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[si.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",[si.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",[si.PunctuatorExpected]:"'${value}' expected.",[si.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[si.UnexpectedBoolean]:"Unexpected boolean literal.",[si.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[si.UnexpectedIdentifier]:"Unexpected identifier.",[si.UnexpectedKeyword]:"Unexpected keyword.",[si.UnexpectedNull]:"Unexpected null literal.",[si.UnexpectedNumber]:"Unexpected number.",[si.UnexpectedPunctuator]:"Unexpected ponctuator.",[si.UnexpectedString]:"Unexpected text literal.",[si.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[si.UnexpectedToken]:"Unexpected token '${value}'."},oi=class e2 extends Error{constructor({code:u,index:o,line:g,column:C,len:S=0,description:M,data:j}){var xe;super(M??u),this.declaredRootClass="esri.arcade.lib.diagnostic",this.name="ParsingError",this.code=u,this.index=o,this.line=g,this.column=C,this.len=S,this.data=j,this.description=M,this.range={start:{line:g,column:C-1},end:{line:g,column:C+S}},null==(xe=Error.captureStackTrace)||xe.call(Error,this,e2)}};function F$1(u){return!!u&&"object"==typeof u&&"type"in u&&u.type===pr}function p2(u){return!!u&&"object"==typeof u&&"type"in u&&u.type===mr}function E$1(u){return!!u&&"object"==typeof u&&"type"in u&&u.type===wr}function x$1(u){return!!u&&"object"==typeof u&&"type"in u&&u.type===Zr}function B$2(u,o){return o.loc.end.line===u.loc.start.line&&o.loc.end.column<=u.loc.start.column}function f(u,o){return u.range[0]>=o.range[0]&&u.range[1]<=o.range[1]}var li=class k{constructor(){this.comments=[],this._nodeStack=[],this._newComments=[]}insertInnerComments(u){if(!F$1(u)||0!==u.body.length)return;let o=[];for(let g=this._newComments.length-1;g>=0;g--){let C=this._newComments[g];u.range[1]>=C.range[0]&&(o.unshift(C),this._newComments.splice(g,1))}o.length&&(u.innerComments=o)}attachTrailingComments(u){let o=this._nodeStack.at(-1);if(!o)return;if(F$1(u)&&f(o,u))for(let C=this._newComments.length-1;C>=0;C--){let g=this._newComments[C];f(g,u)&&(o.trailingComments=[...o.trailingComments??[],g],this._newComments.splice(C,1))}let g=[];if(this._newComments.length>0)for(let C=this._newComments.length-1;C>=0;C--){let S=this._newComments[C];B$2(S,o)?(o.trailingComments=[...o.trailingComments??[],S],this._newComments.splice(C,1)):B$2(S,u)&&(g.unshift(S),this._newComments.splice(C,1))}o.trailingComments&&B$2(o.trailingComments[0],u)&&(g=[...g,...o.trailingComments],delete o.trailingComments),g.length>0&&(u.trailingComments=g)}attachLeadingComments(u){let o;for(;this._nodeStack.length>0;){let g=this._nodeStack[this._nodeStack.length-1];if(!(u.range[0]<=g.range[0]))break;o=g,this._nodeStack.pop()}let g=[],C=[];if(null!=o){if(!o.leadingComments)return;for(let S=o.leadingComments.length-1;S>=0;S--){let M=o.leadingComments[S];u.range[0]>=M.range[1]?(g.unshift(M),o.leadingComments.splice(S,1)):x$1(u)&&!p2(M)&&(C.unshift(M),o.leadingComments.splice(S,1))}return 0===o.leadingComments.length&&delete o.leadingComments,g.length&&(u.leadingComments=g),void(C.length&&(u.trailingComments=[...C,...u.trailingComments??[]]))}for(let S=this._newComments.length-1;S>=0;S--){let o=this._newComments[S];u.range[0]>=o.range[0]&&(g.unshift(o),this._newComments.splice(S,1))}g.length&&(u.leadingComments=g)}attachComments(u){if(function C$1(u){return!!u&&"object"==typeof u&&"type"in u&&u.type===Nr}(u)&&u.body.length>0){let o=this._nodeStack.at(-1);return o?(o.trailingComments=[...o.trailingComments??[],...this._newComments],this._newComments.length=0,void this._nodeStack.pop()):(u.trailingComments=[...this._newComments],void(this._newComments.length=0))}this.attachTrailingComments(u),this.attachLeadingComments(u),this.insertInnerComments(u),this._nodeStack.push(u)}collectComment(u){this.comments.push(u),this._newComments.push(u)}},ci=/\$\{(.*?)\}/gu;function w$1(u,o){let g=ui[u];return o?g.replace(ci,((u,g)=>{var C;return(null==(C=o[g])?void 0:C.toString())??""})):g}var di=class{constructor(u=!1){this.tolerant=u,this.errors=[]}recordError(u){this.errors.push(u)}tolerate(u){if(!this.tolerant)throw u;this.recordError(u)}throwError(u){throw u.description??(u.description=w$1(u.code,u.data)),new oi(u)}tolerateError(u){u.description??(u.description=w$1(u.code,u.data));let o=new oi(u);if(!this.tolerant)throw o;this.recordError(o)}};function y(u,o){if(!u)throw new Error(`ASSERT: ${o}`)}var fi={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/u,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/u},hi={fromCodePoint:u=>u<65536?String.fromCharCode(u):String.fromCharCode(55296+(u-65536>>10))+String.fromCharCode(56320+(u-65536&1023)),isWhiteSpace:u=>32===u||9===u||11===u||12===u||160===u||u>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(u),isLineTerminator:u=>10===u||13===u||8232===u||8233===u,isIdentifierStart:u=>36===u||95===u||u>=65&&u<=90||u>=97&&u<=122||92===u||u>=128&&fi.NonAsciiIdentifierStart.test(hi.fromCodePoint(u)),isIdentifierPart:u=>36===u||95===u||u>=65&&u<=90||u>=97&&u<=122||u>=48&&u<=57||92===u||u>=128&&fi.NonAsciiIdentifierPart.test(hi.fromCodePoint(u)),isDecimalDigit:u=>u>=48&&u<=57,isHexDigit:u=>u>=48&&u<=57||u>=65&&u<=70||u>=97&&u<=102,isOctalDigit:u=>u>=48&&u<=55};function b(u){return"0123456789abcdef".indexOf(u.toLowerCase())}function L$2(u){return"01234567".indexOf(u)}var mi=[[],[],[]];Hr.forEach((u=>{var o;return null==(o=mi[u.length-1])?void 0:o.push(u)})),jr.forEach((u=>{var o;return null==(o=mi[u.length-1])?void 0:o.push(u)})),qr.forEach((u=>{var o;return null==(o=mi[u.length-1])?void 0:o.push(u)})),Vr.forEach((u=>{var o;return null==(o=mi[u.length-1])?void 0:o.push(u)})),["|","&",">>","<<",">>>","^","==","!=","<","<=",">",">=","+","-","*","/","%"].forEach((u=>{var o;return null==(o=mi[u.length-1])?void 0:o.push(u)}));var pi=class N2{constructor(u,o){this.source=u,this.errorHandler=o,this._length=u.length,this.index=0,this.lineNumber=1,this.lineStart=0,this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(u){this.index=u.index,this.lineNumber=u.lineNumber,this.lineStart=u.lineStart,this.curlyStack=u.curlyStack}eof(){return this.index>=this._length}throwUnexpectedToken(u=si.UnexpectedToken){this.errorHandler.throwError({code:u,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1,data:{value:this.source.charAt(this.index)}})}tolerateUnexpectedToken(u=si.UnexpectedToken){this.errorHandler.tolerateError({code:u,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}skipSingleLineComment(u){let o=[],g=this.index-u,C={start:{line:this.lineNumber,column:this.index-this.lineStart-u},end:{line:0,column:0}};for(;!this.eof();){let S=this.source.charCodeAt(this.index);if(this.index+=1,hi.isLineTerminator(S)){C.end={line:this.lineNumber,column:this.index-this.lineStart-1};let M={multiLine:!1,start:g+u,end:this.index-1,range:[g,this.index-1],loc:C};return o.push(M),13===S&&10===this.source.charCodeAt(this.index)&&(this.index+=1),this.lineNumber+=1,this.lineStart=this.index,o}}C.end={line:this.lineNumber,column:this.index-this.lineStart};let S={multiLine:!1,start:g+u,end:this.index,range:[g,this.index],loc:C};return o.push(S),o}skipMultiLineComment(){let u=[],o=this.index-2,g={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){let C=this.source.charCodeAt(this.index);if(hi.isLineTerminator(C))13===C&&10===this.source.charCodeAt(this.index+1)&&(this.index+=1),this.lineNumber+=1,this.index+=1,this.lineStart=this.index;else if(42===C){if(47===this.source.charCodeAt(this.index+1)){this.index+=2,g.end={line:this.lineNumber,column:this.index-this.lineStart};let C={multiLine:!0,start:o+2,end:this.index-2,range:[o,this.index],loc:g};return u.push(C),u}this.index+=1}else this.index+=1}g.end={line:this.lineNumber,column:this.index-this.lineStart};let C={multiLine:!0,start:o+2,end:this.index,range:[o,this.index],loc:g};return u.push(C),this.tolerateUnexpectedToken(),u}scanComments(){let u=[];for(;!this.eof();){let o=this.source.charCodeAt(this.index);if(hi.isWhiteSpace(o))this.index+=1;else if(hi.isLineTerminator(o))this.index+=1,13===o&&10===this.source.charCodeAt(this.index)&&(this.index+=1),this.lineNumber+=1,this.lineStart=this.index;else{if(47!==o)break;if(o=this.source.charCodeAt(this.index+1),47===o){this.index+=2;let o=this.skipSingleLineComment(2);u=[...u,...o]}else{if(42!==o)break;{this.index+=2;let o=this.skipMultiLineComment();u=[...u,...o]}}}}return u}isKeyword(u){switch((u=u.toLowerCase()).length){case 2:return u===ar||u===or;case 3:return u===cr||u===nr;case 4:return u===tr;case 5:return u===Yn||u===dr;case 6:return u===lr||u===sr||u===ur;case 8:return u===ir||u===er;default:return!1}}codePointAt(u){let o=this.source.charCodeAt(u);if(o>=55296&&o<=56319){let g=this.source.charCodeAt(u+1);g>=56320&&g<=57343&&(o=1024*(o-55296)+g-56320+65536)}return o}scanHexEscape(u){let o="u"===u?4:2,g=0;for(let C=0;C<o;C++){if(this.eof()||!hi.isHexDigit(this.source.charCodeAt(this.index)))return null;g=16*g+b(this.source[this.index]??""),this.index+=1}return String.fromCharCode(g)}scanUnicodeCodePointEscape(){let u=this.source[this.index],o=0;for("}"===u&&this.throwUnexpectedToken();!this.eof()&&(u=this.source[this.index]??"",this.index+=1,hi.isHexDigit(u.charCodeAt(0)));)o=16*o+b(u);return(o>1114111||"}"!==u)&&this.throwUnexpectedToken(),hi.fromCodePoint(o)}getIdentifier(){let u=this.index;for(this.index+=1;!this.eof();){let o=this.source.charCodeAt(this.index);if(92===o)return this.index=u,this.getComplexIdentifier();if(o>=55296&&o<57343)return this.index=u,this.getComplexIdentifier();if(!hi.isIdentifierPart(o))break;this.index+=1}return this.source.slice(u,this.index)}getComplexIdentifier(){let u,o=this.codePointAt(this.index),g=hi.fromCodePoint(o);for(this.index+=g.length,92===o&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),this.index+=1,"{"===this.source[this.index]?(this.index+=1,u=this.scanUnicodeCodePointEscape()):(u=this.scanHexEscape("u"),(null===u||"\\"===u||!hi.isIdentifierStart(u.charCodeAt(0)))&&this.throwUnexpectedToken()),g=u);!this.eof()&&(o=this.codePointAt(this.index),hi.isIdentifierPart(o));)u=hi.fromCodePoint(o),g+=u,this.index+=u.length,92===o&&(g=g.substring(0,g.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),this.index+=1,"{"===this.source[this.index]?(this.index+=1,u=this.scanUnicodeCodePointEscape()):(u=this.scanHexEscape("u"),(null===u||"\\"===u||!hi.isIdentifierPart(u.charCodeAt(0)))&&this.throwUnexpectedToken()),g+=u);return g}octalToDecimal(u){let o="0"!==u,g=L$2(u);return!this.eof()&&hi.isOctalDigit(this.source.charCodeAt(this.index))&&(o=!0,g=8*g+L$2(this.source[this.index]??""),this.index+=1,"0123".includes(u)&&!this.eof()&&hi.isOctalDigit(this.source.charCodeAt(this.index))&&(g=8*g+L$2(this.source[this.index]??""),this.index+=1)),{code:g,octal:o}}scanIdentifier(){let u,o=this.index,g=92===this.source.charCodeAt(o)?this.getComplexIdentifier():this.getIdentifier();if(u=1===g.length?Qr:this.isKeyword(g)?Yr:g.toLowerCase()===Xn?ei:g.toLowerCase()===Qn||g.toLowerCase()===Wn?Wr:Qr,u!==Qr&&o+g.length!==this.index){let u=this.index;this.index=o,this.tolerateUnexpectedToken(si.InvalidEscapedReservedWord),this.index=u}return{type:u,value:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:o,end:this.index}}scanPunctuator(){var u;let o=this.index,g=this.source[this.index]??"";switch(g){case"(":case"{":"{"===g&&this.curlyStack.push("{"),this.index+=1;break;case".":case")":case";":case",":case"[":case"]":case":":case"?":case"~":this.index+=1;break;case"}":this.index+=1,this.curlyStack.pop();break;default:for(let o=mi.length;o>0;o--)if(g=this.source.substring(this.index,this.index+o),null==(u=mi[o-1])?void 0:u.includes(g)){this.index+=o;break}}return this.index===o&&this.throwUnexpectedToken(),{type:ni,value:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:o,end:this.index}}scanHexLiteral(u){let o="";for(;!this.eof()&&hi.isHexDigit(this.source.charCodeAt(this.index));)o+=this.source[this.index],this.index+=1;return 0===o.length&&this.throwUnexpectedToken(),hi.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:ti,value:Number.parseInt(`0x${o}`,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanBinaryLiteral(u){let o="";for(;!this.eof();){let u=this.source[this.index];if("0"!==u&&"1"!==u)break;o+=this.source[this.index],this.index+=1}if(0===o.length&&this.throwUnexpectedToken(),!this.eof()){let u=this.source.charCodeAt(this.index);(hi.isIdentifierStart(u)||hi.isDecimalDigit(u))&&this.throwUnexpectedToken()}return{type:ti,value:Number.parseInt(o,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanOctalLiteral(u,o){let g="",C=!1;for(hi.isOctalDigit(u.charCodeAt(0))&&(C=!0,g=`0${this.source[this.index]}`),this.index+=1;!this.eof()&&hi.isOctalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index],this.index+=1;return!C&&0===g.length&&this.throwUnexpectedToken(),(hi.isIdentifierStart(this.source.charCodeAt(this.index))||hi.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:ti,value:Number.parseInt(g,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:o,end:this.index}}scanNumericLiteral(){let u=this.index,o=this.source[u]??"";y(hi.isDecimalDigit(o.charCodeAt(0))||"."===o,"Numeric literal must start with a decimal digit or a decimal point");let g="";if("."!==o){if(g=this.source[this.index]??"",this.index+=1,o=this.source[this.index]??"","0"===g){if("x"===o||"X"===o)return this.index+=1,this.scanHexLiteral(u);if("b"===o||"B"===o)return this.index+=1,this.scanBinaryLiteral(u);if("o"===o||"O"===o)return this.scanOctalLiteral(o,u)}for(;hi.isDecimalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index],this.index+=1;o=this.source[this.index]??""}if("."===o){for(g+=this.source[this.index],this.index+=1;hi.isDecimalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index],this.index+=1;o=this.source[this.index]??""}if("e"===o||"E"===o)if(g+=this.source[this.index],this.index+=1,o=this.source[this.index]??"",("+"===o||"-"===o)&&(g+=this.source[this.index],this.index+=1),hi.isDecimalDigit(this.source.charCodeAt(this.index)))for(;hi.isDecimalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index],this.index+=1;else this.throwUnexpectedToken();return hi.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:ti,value:Number.parseFloat(g),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanStringLiteral(){let u=this.index,o=this.source[u];y("'"===o||'"'===o,"String literal must starts with a quote"),this.index+=1;let g=!1,C="";for(;!this.eof();){let u=this.source[this.index]??"";if(this.index+=1,u===o){o="";break}if("\\"===u)if(u=this.source[this.index]??"",this.index+=1,u&&hi.isLineTerminator(u.charCodeAt(0)))this.lineNumber+=1,"\r"===u&&"\n"===this.source[this.index]&&(this.index+=1),this.lineStart=this.index;else switch(u){case"u":if("{"===this.source[this.index])this.index+=1,C+=this.scanUnicodeCodePointEscape();else{let o=this.scanHexEscape(u);null===o&&this.throwUnexpectedToken(),C+=o}break;case"x":{let o=this.scanHexEscape(u);null===o&&this.throwUnexpectedToken(si.InvalidHexEscapeSequence),C+=o;break}case"n":C+="\n";break;case"r":C+="\r";break;case"t":C+="\t";break;case"b":C+="\b";break;case"f":C+="\f";break;case"v":C+="\v";break;case"8":case"9":C+=u,this.tolerateUnexpectedToken();break;default:if(u&&hi.isOctalDigit(u.charCodeAt(0))){let o=this.octalToDecimal(u);g=o.octal||g,C+=String.fromCharCode(o.code)}else C+=u}else{if(hi.isLineTerminator(u.charCodeAt(0)))break;C+=u}}return""!==o&&(this.index=u,this.throwUnexpectedToken()),{type:ri,value:C,lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanTemplate(){let u="",o=!1,g=this.index,C="`"===this.source[g],S=!1,M=2;for(this.index+=1;!this.eof();){let g=this.source[this.index]??"";if(this.index+=1,"`"===g){M=1,S=!0,o=!0;break}if("$"!==g)if("\\"!==g)hi.isLineTerminator(g.charCodeAt(0))?(this.lineNumber+=1,"\r"===g&&"\n"===this.source[this.index]&&(this.index+=1),this.lineStart=this.index,u+="\n"):u+=g;else if(g=this.source[this.index]??"",this.index+=1,hi.isLineTerminator(g.charCodeAt(0)))this.lineNumber+=1,"\r"===g&&"\n"===this.source[this.index]&&(this.index+=1),this.lineStart=this.index;else switch(g){case"n":u+="\n";break;case"r":u+="\r";break;case"t":u+="\t";break;case"u":if("{"===this.source[this.index])this.index+=1,u+=this.scanUnicodeCodePointEscape();else{let o=this.index,C=this.scanHexEscape(g);null!==C?u+=C:(this.index=o,u+=g)}break;case"x":{let o=this.scanHexEscape(g);null===o&&this.throwUnexpectedToken(si.InvalidHexEscapeSequence),u+=o;break}case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="\v";break;default:"0"===g?(hi.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(si.TemplateOctalLiteral),u+="\0"):hi.isOctalDigit(g.charCodeAt(0))?this.throwUnexpectedToken(si.TemplateOctalLiteral):u+=g}else{if("{"===this.source[this.index]){this.curlyStack.push("${"),this.index+=1,o=!0;break}u+=g}}return o||this.throwUnexpectedToken(),C||this.curlyStack.pop(),{type:ii,value:this.source.slice(g+1,this.index-M),cooked:u,head:C,tail:S,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}}lex(){if(this.eof())return{type:Xr,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};let u=this.source.charCodeAt(this.index);return hi.isIdentifierStart(u)?this.scanIdentifier():40===u||41===u||59===u?this.scanPunctuator():39===u||34===u?this.scanStringLiteral():46===u?hi.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():hi.isDecimalDigit(u)?this.scanNumericLiteral():96===u||125===u&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():u>=55296&&u<57343&&hi.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()}},$i=0,gi=1,Di=2,yi=4,wi=8,xi=0,Fi=1;function M$2(u,o=0){let g=u.start-u.lineStart,C=u.lineNumber;return g<0&&(g+=o,C-=1),{index:u.start,line:C,column:g}}function O$2(u){return[{index:u.range[0],...u.loc.start},{index:u.range[1],...u.loc.end}]}function R$1(u){return u in Kr?Kr[u]:0}var Ci=class z{constructor(u,o={},g){this.delegate=g,this.hasLineTerminator=!1,this.options={tokens:"boolean"==typeof o.tokens&&o.tokens,comments:"boolean"==typeof o.comments&&o.comments,tolerant:"boolean"==typeof o.tolerant&&o.tolerant},this.options.comments&&(this.commentHandler=new li),this.errorHandler=new di(this.options.tolerant),this.scanner=new pi(u,this.errorHandler),this.context={isAssignmentTarget:!1,blockContext:$i,curlyParsingType:xi},this.rawToken={type:Xr,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.endMarker={index:0,line:this.scanner.lineNumber,column:0},this.readNextRawToken(),this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}throwIfInvalidType(u,o,{validTypes:g,invalidTypes:C}){(null==g?void 0:g.some((o=>u.type===o)))||(null==C?void 0:C.some((o=>u.type===o)))&&this.throwError(si.InvalidExpression,o)}throwError(u,o,g=this.endMarker){let{index:C,line:S,column:M}=o,j=g.index-C-1;this.errorHandler.throwError({code:u,index:C,line:S,column:M+1,len:j})}tolerateError(u,o){throw new Error("######################################### !!!")}unexpectedTokenError(u={}){let o,{rawToken:g}=u,{code:C,data:S}=u;if(g){if(!C)switch(g.type){case Xr:C=si.UnexpectedEndOfScript;break;case Qr:C=si.UnexpectedIdentifier;break;case ti:C=si.UnexpectedNumber;break;case ri:C=si.UnexpectedString;break;case ii:C=si.UnexpectedTemplate}o=g.value.toString()}else o="ILLEGAL";C??(C=si.UnexpectedToken),S||(S={value:o});let M=w$1(C,S);if(g){let u=g.start,o=g.lineNumber,j=g.start-g.lineStart+1;return new oi({code:C,index:u,line:o,column:j,len:g.end-g.start-1,data:S,description:M})}let{index:j,line:xe}=this.endMarker;return new oi({code:C,index:j,line:xe,column:this.endMarker.column+1,data:S,description:M})}throwUnexpectedToken(u={}){throw u.rawToken??(u.rawToken=this.rawToken),this.unexpectedTokenError(u)}collectComments(u){let{commentHandler:o}=this;!o||!u.length||u.forEach((u=>{let g={type:u.multiLine?mr:kr,value:this.getSourceValue(u),range:u.range,loc:u.loc};o.collectComment(g)}))}peekAhead(u){let o=this.scanner.saveState(),g=u.call(this,(()=>(this.scanner.scanComments(),this.scanner.lex())));return this.scanner.restoreState(o),g}getSourceValue(u){return this.scanner.source.slice(u.start,u.end)}convertToToken(u){return{type:ai[u.type],value:this.getSourceValue(u),range:[u.start,u.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}}readNextRawToken(){this.endMarker.index=this.scanner.index,this.endMarker.line=this.scanner.lineNumber,this.endMarker.column=this.scanner.index-this.scanner.lineStart;let u=this.rawToken;this.collectComments(this.scanner.scanComments()),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart),this.rawToken=this.scanner.lex(),this.hasLineTerminator=u.lineNumber!==this.rawToken.lineNumber,this.options.tokens&&this.rawToken.type!==Xr&&this.tokens.push(this.convertToToken(this.rawToken))}captureStartMarker(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}getItemLocation(u){return{range:[u.index,this.endMarker.index],loc:{start:{line:u.line,column:u.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}}finalize(u){var o,g;return(this.delegate??this.commentHandler)&&(null==(o=this.commentHandler)||o.attachComments(u),null==(g=this.delegate)||g.call(this,u)),u}expectPunctuator(u){let o=this.rawToken;this.matchPunctuator(u)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:o,code:si.PunctuatorExpected,data:{value:u}})}expectKeyword(u){this.rawToken.type!==Yr||this.rawToken.value.toLowerCase()!==u.toString()?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}expectContextualKeyword(u){this.rawToken.type!==Qr||this.rawToken.value.toLowerCase()!==u?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}matchKeyword(u){return this.rawToken.type===Yr&&this.rawToken.value.toLowerCase()===u}matchContextualKeyword(u){return this.rawToken.type===Qr&&this.rawToken.value===u}matchPunctuator(u){return this.rawToken.type===ni&&this.rawToken.value===u}getMatchingPunctuator(u){if("string"==typeof u&&(u=u.split("")),this.rawToken.type===ni&&u.length)return u.find(this.matchPunctuator.bind(this))}isolateCoverGrammar(u){let o=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;let g=u.call(this);return this.context.isAssignmentTarget=o,g}inheritCoverGrammar(u){var o;let g=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;let C=u.call(this);return(o=this.context).isAssignmentTarget&&(o.isAssignmentTarget=g),C}withBlockContext(u,o){let g=this.context.blockContext;this.context.blockContext|=u;let C=this.context.curlyParsingType;this.context.curlyParsingType=Fi;let S=o.call(this);return this.context.blockContext=g,this.context.curlyParsingType=C,S}consumeSemicolon(){if(this.matchPunctuator(";"))this.readNextRawToken();else if(!this.hasLineTerminator){if(this.rawToken.type===Xr||this.matchPunctuator("}"))return this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,void(this.endMarker.column=this.startMarker.column);this.throwUnexpectedToken({rawToken:this.rawToken})}}parsePrimaryExpression(){let u=this.captureStartMarker(),o=this.rawToken;switch(o.type){case Qr:return this.readNextRawToken(),this.finalize({type:vr,name:o.value,...this.getItemLocation(u)});case ti:case ri:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:_r,value:o.value,raw:this.getSourceValue(o),isString:"string"==typeof o.value,...this.getItemLocation(u)});case Wr:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:_r,value:o.value.toLowerCase()===Qn,raw:this.getSourceValue(o),isString:!1,...this.getItemLocation(u)});case ei:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:_r,value:null,raw:this.getSourceValue(o),isString:!1,...this.getItemLocation(u)});case ii:return this.parseTemplateLiteral();case ni:switch(o.value){case"(":return this.inheritCoverGrammar(this.parseGroupExpression.bind(this));case"[":return this.inheritCoverGrammar(this.parseArrayInitializer.bind(this));case"{":return this.inheritCoverGrammar(this.parseObjectExpression.bind(this));default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case Yr:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseArrayInitializer(){let u=this.captureStartMarker();this.expectPunctuator("[");let o=[];for(;!this.matchPunctuator("]");){let u=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(si.InvalidExpression,u)):(o.push(this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this))),this.matchPunctuator("]")||this.expectPunctuator(","))}return this.expectPunctuator("]"),this.finalize({type:hr,elements:o,...this.getItemLocation(u)})}parseObjectPropertyKey(){let u=this.captureStartMarker(),o=this.rawToken;switch(o.type){case ri:return this.readNextRawToken(),this.finalize({type:_r,value:o.value,raw:this.getSourceValue(o),isString:!0,...this.getItemLocation(u)});case Qr:case Wr:case ei:case Yr:return this.readNextRawToken(),this.finalize({type:vr,name:o.value,...this.getItemLocation(u)});default:this.throwError(si.KeyMustBeString,u)}}parseObjectProperty(){let u=this.rawToken,o=this.captureStartMarker(),g=this.parseObjectPropertyKey(),C=!1,S=null;return this.matchPunctuator(":")?(this.readNextRawToken(),S=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this))):u.type===Qr?(C=!0,S=this.finalize({type:vr,name:u.value,...this.getItemLocation(o)})):this.throwUnexpectedToken({rawToken:this.rawToken}),this.finalize({type:Pr,kind:"init",key:g,value:S,shorthand:C,...this.getItemLocation(o)})}parseObjectExpression(){let u=this.captureStartMarker();this.expectPunctuator("{");let o=[];for(;!this.matchPunctuator("}");)o.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");return this.expectPunctuator("}"),this.finalize({type:Br,properties:o,...this.getItemLocation(u)})}parseTemplateElement(u=!1){let o=this.rawToken;o.type!==ii&&this.throwUnexpectedToken({rawToken:o}),u&&!o.head&&this.throwUnexpectedToken({code:si.InvalidTemplateHead,rawToken:o});let g=this.captureStartMarker();this.readNextRawToken();let{value:C,cooked:S,tail:M}=o,j=this.finalize({type:Or,value:{raw:C,cooked:S},tail:M,...this.getItemLocation(g)});return j.loc.start.column+=1,j.loc.end.column-=M?1:2,j}parseTemplateLiteral(){let u=this.captureStartMarker(),o=[],g=[],C=this.parseTemplateElement(!0);for(g.push(C);!C.tail;)o.push(this.parseExpression()),C=this.parseTemplateElement(),g.push(C);return this.finalize({type:Lr,quasis:g,expressions:o,...this.getItemLocation(u)})}parseGroupExpression(){this.expectPunctuator("(");let u=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this));return this.expectPunctuator(")"),u}parseArguments(){this.expectPunctuator("(");let u=[];if(!this.matchPunctuator(")"))for(;;){let o=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));if(u.push(o),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),u}parseMemberName(){let u=this.rawToken,o=this.captureStartMarker();return this.readNextRawToken(),u.type!==ei&&u.type!==Qr&&u.type!==Yr&&u.type!==Wr&&this.throwUnexpectedToken({rawToken:u}),this.finalize({type:vr,name:u.value,...this.getItemLocation(o)})}parseLeftHandSideExpression(){let u,o=this.captureStartMarker(),g=this.inheritCoverGrammar(this.parsePrimaryExpression.bind(this)),C=this.captureStartMarker();for(;u=this.getMatchingPunctuator("([.");)switch(u){case"(":{this.context.isAssignmentTarget=!1,g.type!==vr&&g.type!==Mr&&this.throwError(si.IdentiferExpected,o,C);let u=this.parseArguments();g=this.finalize({type:Dr,callee:g,arguments:u,...this.getItemLocation(o)});continue}case"[":{this.context.isAssignmentTarget=!0,this.expectPunctuator("[");let u=this.isolateCoverGrammar((()=>this.parseExpression()));this.expectPunctuator("]"),g=this.finalize({type:Mr,computed:!0,object:g,property:u,...this.getItemLocation(o)});continue}case".":{this.context.isAssignmentTarget=!0,this.expectPunctuator(".");let u=this.parseMemberName();g=this.finalize({type:Mr,computed:!1,object:g,property:u,...this.getItemLocation(o)});continue}}return g}parseUpdateExpression(){let u=this.captureStartMarker(),o=this.getMatchingPunctuator(Hr);if(o){this.readNextRawToken();let g=this.captureStartMarker(),C=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));return C.type!==vr&&C.type!==Mr&&C.type!==Dr&&this.throwError(si.InvalidExpression,g),this.context.isAssignmentTarget||this.tolerateError(si.InvalidLeftHandSideInAssignment,u),this.context.isAssignmentTarget=!1,this.finalize({type:Gr,operator:o,argument:C,prefix:!0,...this.getItemLocation(u)})}let g=this.captureStartMarker(),C=this.inheritCoverGrammar(this.parseLeftHandSideExpression.bind(this)),S=this.captureStartMarker();return this.hasLineTerminator||(o=this.getMatchingPunctuator(Hr),!o)?C:(C.type!==vr&&C.type!==Mr&&this.throwError(si.InvalidExpression,g,S),this.context.isAssignmentTarget||this.tolerateError(si.InvalidLeftHandSideInAssignment,u),this.readNextRawToken(),this.context.isAssignmentTarget=!1,this.finalize({type:Gr,operator:o,argument:C,prefix:!1,...this.getItemLocation(u)}))}parseUnaryExpression(){let u=this.getMatchingPunctuator(jr);if(u){let o=this.captureStartMarker();this.readNextRawToken();let g=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));return this.context.isAssignmentTarget=!1,this.finalize({type:Ur,operator:u,argument:g,prefix:!0,...this.getItemLocation(o)})}return this.parseUpdateExpression()}parseBinaryExpression(){let u=this.rawToken,o=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));if(this.rawToken.type!==ni)return o;let g=this.rawToken.value,C=R$1(g);if(0===C)return o;this.readNextRawToken(),this.context.isAssignmentTarget=!1;let S=[u,this.rawToken],M=o,j=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this)),xe=[M,g,j],Oe=[C];for(;this.rawToken.type===ni&&(C=R$1(this.rawToken.value))>0;){for(;xe.length>2&&C<=Oe[Oe.length-1];){j=xe.pop();let u=xe.pop();Oe.pop(),M=xe.pop(),S.pop();let o=S[S.length-1],g=M$2(o,o.lineStart);xe.push(this.finalize(this.createBinaryOrLogicalExpression(g,u,M,j)))}xe.push(this.rawToken.value),Oe.push(C),S.push(this.rawToken),this.readNextRawToken(),xe.push(this.inheritCoverGrammar(this.parseUnaryExpression.bind(this)))}let Ue=xe.length-1;o=xe[Ue];let Je=S.pop();for(;Ue>1;){let u=S.pop();if(!u)break;let g=M$2(u,null==Je?void 0:Je.lineStart),C=xe[Ue-1];o=this.finalize(this.createBinaryOrLogicalExpression(g,C,xe[Ue-2],o)),Ue-=2,Je=u}return o}createBinaryOrLogicalExpression(u,o,g,C){let S=qr.includes(o)?Tr:$r;return S===$r||((g.type===fr||g.type===Gr)&&this.throwError(si.InvalidExpression,...O$2(g)),(C.type===fr||C.type===Gr)&&this.throwError(si.InvalidExpression,...O$2(g))),{type:S,operator:o,left:g,right:C,...this.getItemLocation(u)}}parseAssignmentExpression(){let u=this.captureStartMarker(),o=this.inheritCoverGrammar(this.parseBinaryExpression.bind(this)),g=this.captureStartMarker(),C=this.getMatchingPunctuator(Vr);if(!C)return o;o.type!==vr&&o.type!==Mr&&this.throwError(si.InvalidExpression,u,g),this.context.isAssignmentTarget||this.tolerateError(si.InvalidLeftHandSideInAssignment,u),this.matchPunctuator("=")||(this.context.isAssignmentTarget=!1),this.readNextRawToken();let S=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));return this.finalize({type:fr,left:o,operator:C,right:S,...this.getItemLocation(u)})}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this))}parseStatements(u){let o=[];for(;this.rawToken.type!==Xr&&!this.matchPunctuator(u);){let u=this.parseStatementListItem();E$1(u)||o.push(u)}return o}parseStatementListItem(){return this.context.isAssignmentTarget=!0,this.matchKeyword(ir)?this.parseFunctionDeclaration():this.matchKeyword(ur)?this.parseExportDeclaration():this.matchKeyword(sr)?this.parseImportDeclaration():this.parseStatement()}parseBlock(){let u=this.captureStartMarker();this.expectPunctuator("{");let o=this.parseStatements("}");return this.expectPunctuator("}"),this.finalize({type:pr,body:o,...this.getItemLocation(u)})}parseObjectStatement(){let u=this.captureStartMarker(),o=this.parseObjectExpression();return this.finalize({type:xr,expression:o,...this.getItemLocation(u)})}parseBlockOrObjectStatement(){return this.context.curlyParsingType===xi||this.peekAhead((u=>{let o=u();return!(o.type!==Qr&&o.type!==ri||(o=u(),o.type!==ni||":"!==o.value))}))?this.parseObjectStatement():this.parseBlock()}parseIdentifier(){let u=this.rawToken;if(u.type!==Qr)return null;let o=this.captureStartMarker();return this.readNextRawToken(),this.finalize({type:vr,name:u.value,...this.getItemLocation(o)})}parseVariableDeclarator(){let u=this.captureStartMarker(),o=this.parseIdentifier();o||this.throwUnexpectedToken({code:si.IdentiferExpected});let g=null;if(this.matchPunctuator("=")){this.readNextRawToken();let u=this.rawToken;try{g=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this))}catch{this.throwUnexpectedToken({rawToken:u,code:si.InvalidVariableAssignment})}}return this.finalize({type:Zr,id:o,init:g,...this.getItemLocation(u)})}parseVariableDeclarationList(){let u=[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),u.push(this.parseVariableDeclarator());return u}parseVariableDeclaration(){let u=this.captureStartMarker();this.expectKeyword(cr);let o=this.parseVariableDeclarationList();return this.consumeSemicolon(),this.finalize({type:zr,declarations:o,kind:"var",...this.getItemLocation(u)})}parseEmptyStatement(){let u=this.captureStartMarker();return this.expectPunctuator(";"),this.finalize({type:wr,...this.getItemLocation(u)})}parseExpressionStatement(){let u=this.captureStartMarker(),o=this.parseExpression();return this.consumeSemicolon(),this.finalize({type:xr,expression:o,...this.getItemLocation(u)})}parseIfClause(){return this.withBlockContext(Di,this.parseStatement.bind(this))}parseIfStatement(){let u=this.captureStartMarker();this.expectKeyword(ar),this.expectPunctuator("(");let o=this.captureStartMarker(),g=this.parseExpression(),C=this.captureStartMarker();this.expectPunctuator(")"),(g.type===fr||g.type===Gr)&&this.throwError(si.InvalidExpression,o,C);let S=this.parseIfClause(),M=null;return this.matchKeyword(tr)&&(this.readNextRawToken(),M=this.parseIfClause()),this.finalize({type:Er,test:g,consequent:S,alternate:M,...this.getItemLocation(u)})}parseWhileStatement(){let u=this.captureStartMarker();this.expectKeyword(dr),this.expectPunctuator("(");let o=this.captureStartMarker(),g=this.parseExpression(),C=this.captureStartMarker();this.expectPunctuator(")"),(g.type===fr||g.type===Gr)&&this.throwError(si.InvalidExpression,o,C);let S=this.withBlockContext(wi,this.parseStatement.bind(this));return this.finalize({type:Jr,test:g,body:S,...this.getItemLocation(u)})}parseForStatement(){let u=null,o=null,g=null,C=null,S=null,M=this.captureStartMarker();if(this.expectKeyword(nr),this.expectPunctuator("("),this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(cr)){let o=this.captureStartMarker();this.readNextRawToken();let g=this.parseVariableDeclarationList();1===g.length&&this.matchKeyword(or)?(g[0].init&&this.throwError(si.ForInOfLoopInitializer,o),C=this.finalize({type:zr,declarations:g,kind:"var",...this.getItemLocation(o)}),this.readNextRawToken(),S=this.parseExpression()):(this.matchKeyword(or)&&this.throwError(si.InvalidLeftHandSideInForIn,o),u=this.finalize({type:zr,declarations:g,kind:"var",...this.getItemLocation(o)}),this.expectPunctuator(";"))}else{let o=this.context.isAssignmentTarget,g=this.captureStartMarker();u=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this)),this.matchKeyword(or)?(this.context.isAssignmentTarget||this.tolerateError(si.InvalidLeftHandSideInForIn,g),u.type!==vr&&this.throwError(si.InvalidLeftHandSideInForIn,g),this.readNextRawToken(),C=u,S=this.parseExpression(),u=null):(this.context.isAssignmentTarget=o,this.expectPunctuator(";"))}C||(this.matchPunctuator(";")||(o=this.isolateCoverGrammar(this.parseExpression.bind(this))),this.expectPunctuator(";"),this.matchPunctuator(")")||(g=this.isolateCoverGrammar(this.parseExpression.bind(this)))),this.expectPunctuator(")");let j=this.withBlockContext(yi,(()=>this.isolateCoverGrammar(this.parseStatement.bind(this))));return C&&S?this.finalize({type:Ar,left:C,right:S,body:j,...this.getItemLocation(M)}):this.finalize({type:Cr,init:u,test:o,update:g,body:j,...this.getItemLocation(M)})}parseContinueStatement(){let u=this.captureStartMarker();return this.expectKeyword(er),this.consumeSemicolon(),this.finalize({type:yr,...this.getItemLocation(u)})}parseBreakStatement(){let u=this.captureStartMarker();return this.expectKeyword(Yn),this.consumeSemicolon(),this.finalize({type:gr,...this.getItemLocation(u)})}parseReturnStatement(){let u=this.captureStartMarker();this.expectKeyword(lr);let o=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||this.rawToken.type===Xr)&&this.rawToken.type!==ri&&this.rawToken.type!==ii?null:this.parseExpression();return this.consumeSemicolon(),this.finalize({type:Rr,argument:o,...this.getItemLocation(u)})}parseStatement(){switch(this.rawToken.type){case Wr:case ei:case ti:case ri:case ii:case Qr:return this.parseExpressionStatement();case ni:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case Yr:switch(this.rawToken.value.toLowerCase()){case Yn:return this.parseBreakStatement();case er:return this.parseContinueStatement();case nr:return this.parseForStatement();case ir:return this.parseFunctionDeclaration();case ar:return this.parseIfStatement();case lr:return this.parseReturnStatement();case cr:return this.parseVariableDeclaration();case dr:return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseFormalParameters(){let u=[];if(this.expectPunctuator("("),!this.matchPunctuator(")"))for(;this.rawToken.type!==Xr;){let o=this.parseIdentifier();if(o||this.throwUnexpectedToken({rawToken:this.rawToken,code:si.IdentiferExpected}),u.push(o),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),u}parseFunctionDeclaration(){(this.context.blockContext&gi)===gi&&this.throwUnexpectedToken({code:si.NoFunctionInsideFunction}),((this.context.blockContext&wi)===wi||(this.context.blockContext&Di)===Di)&&this.throwUnexpectedToken({code:si.NoFunctionInsideBlock});let u=this.captureStartMarker();this.expectKeyword(ir);let o=this.parseIdentifier();o||this.throwUnexpectedToken({code:si.InvalidFunctionIdentifier});let g=this.parseFormalParameters(),C=this.context.blockContext;this.context.blockContext|=gi;let S=this.parseBlock();return this.context.blockContext=C,this.finalize({type:br,id:o,params:g,body:S,...this.getItemLocation(u)})}parseScript(){let u=this.captureStartMarker(),o=this.parseStatements(),g=this.finalize({type:Nr,body:o,...this.getItemLocation(u)});return this.options.tokens&&(g.tokens=this.tokens),this.options.tolerant&&(g.errors=this.errorHandler.errors),g}parseExportDeclaration(){this.context.blockContext!==$i&&this.throwUnexpectedToken({code:si.ModuleExportRootOnly});let u=null,o=this.captureStartMarker();return this.expectKeyword(ur),this.matchKeyword(cr)?u=this.parseVariableDeclaration():this.matchKeyword("function")?u=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:si.InvalidExpression}),this.finalize({type:Fr,declaration:u,specifiers:[],source:null,...this.getItemLocation(o)})}parseModuleSpecifier(){let u=this.captureStartMarker(),o=this.rawToken;if(o.type===ri)return this.readNextRawToken(),this.finalize({type:_r,value:o.value,raw:this.getSourceValue(o),isString:!0,...this.getItemLocation(u)});this.throwError(si.InvalidModuleUri,u)}parseDefaultSpecifier(){let u=this.captureStartMarker(),o=this.parseIdentifier();return o||this.throwUnexpectedToken({code:si.IdentiferExpected}),this.finalize({type:Ir,local:o,...this.getItemLocation(u)})}parseImportDeclaration(){this.context.blockContext!==$i&&this.throwUnexpectedToken({code:si.ModuleImportRootOnly});let u=this.captureStartMarker();this.expectKeyword(sr);let o=this.parseDefaultSpecifier();this.expectContextualKeyword(rr);let g=this.parseModuleSpecifier();return this.finalize({type:Sr,specifiers:[o],source:g,...this.getItemLocation(u)})}};function d(u,o=[]){const g=function H$3(u,o,g){return new Ci(u,o,g).parseScript()}(u);if(null===g.body||void 0===g.body)throw new oi({index:0,line:0,column:0,data:null,description:"",code:si.InvalidExpression});return g.loadedModules={},d$5(g,o),g}class e3{constructor(u){const o=this;o._keys=[],o._values=[],o.length=0,u&&u.forEach((u=>{o.set(u[0],u[1])}))}entries(){return[].slice.call(this.keys().map(((u,o)=>[u,this._values[o]])))}keys(){return[].slice.call(this._keys)}values(){return[].slice.call(this._values)}has(u){return this._keys.includes(u)}get(u){const o=this._keys.indexOf(u);return o>-1?this._values[o]:null}deepGet(u){if(!(null==u?void 0:u.length))return null;const s5=(u,o)=>null==u?null:o.length?s5(u instanceof e3?u.get(o[0]):u[o[0]],o.slice(1)):u;return s5(this.get(u[0]),u.slice(1))}set(u,o){const g=this,C=this._keys.indexOf(u);return C>-1?g._values[C]=o:(g._keys.push(u),g._values.push(o),g.length=g._values.length),this}sortedSet(u,o,g,C){const S=this,M=this._keys.length,j=g||0,xe=void 0!==C?C:M-1;if(0===M)return S._keys.push(u),S._values.push(o),S;if(u===this._keys[j])return this._values.splice(j,0,o),this;if(u===this._keys[xe])return this._values.splice(xe,0,o),this;if(u>this._keys[xe])return this._keys.splice(xe+1,0,u),this._values.splice(xe+1,0,o),this;if(u<this._keys[j])return this._values.splice(j,0,o),this._keys.splice(j,0,u),this;if(j>=xe)return this;const Oe=j+Math.floor((xe-j)/2);return u<this._keys[Oe]?this.sortedSet(u,o,j,Oe-1):u>this._keys[Oe]?this.sortedSet(u,o,Oe+1,xe):this}size(){return this.length}clear(){const u=this;return u._keys.length=u.length=u._values.length=0,this}delete(u){const o=this,g=o._keys.indexOf(u);return g>-1&&(o._keys.splice(g,1),o._values.splice(g,1),o.length=o._keys.length,!0)}forEach(u){this._keys.forEach(((o,g)=>{u(this._values[g],o,g)}))}map(u){return this.keys().map(((o,g)=>u(this._values[g],o,g)))}filter(u){const o=this;return o._keys.forEach(((g,C)=>{!1===u(o._values[C],g,C)&&o.delete(g)})),this}clone(){return new e3(this.entries())}}class t4{constructor(u=20){this._maxEntries=u,this._values=new e3}delete(u){this._values.has(u)&&this._values.delete(u)}get(u){let o=null;return this._values.has(u)&&(o=this._values.get(u),this._values.delete(u),this._values.set(u,o)),o}put(u,o){if(this._values.size()>=this._maxEntries){const u=this._values.keys()[0];this._values.delete(u)}this._values.set(u,o)}}class l{constructor(u){this.portalUri=u}normalizeModuleUri(u){const o=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([?|/].*)?$/gi,g=/(?<portalurl>.+)\/home\/item\.html\?id=(?<itemid>.+)$/gi,C=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,S=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi,M=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([?|/].*)?$/gi;if(u.startsWith("portal+")){let j=u.substring(7),xe="",Oe=j,Ue=!1;for(const u of[g,S,C]){const o=u.exec(j);if(null!==o){const u=o.groups;Oe=u.itemid,xe=u.portalurl,Ue=!0;break}}if(!1===Ue){if(!o.test(j))throw new Ot(Pt.UnsupportedUriProtocol,{uri:u});Oe=j,xe=this.portalUri}Oe.includes("/")&&(Oe=Oe.split("/")[0]),Oe.includes("?")&&(Oe=Oe.split("?")[0]);let Je="current";const We=M.exec(Oe);if(null!==We){const u=We.groups;Oe=u.itemid,Je=u.versionstring}return j=new lt({url:xe}).restUrl+"/content/items/"+Oe+"/resources/"+Je+".arc",{url:j,scheme:"portal",uri:"PO:"+j}}if(u.startsWith("mock")){if("mock"===u)return{url:"",scheme:"mock",data:'\n      export var hello = 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};const o=u.replace("mock:","");if(void 0!==l.mocks[o])return{url:"",scheme:"mock",data:l.mocks[o],uri:u}}throw new Ot(Pt.UnrecognizedUri,{uri:u})}async fetchModule(u){const o=l.cachedModules.getFromCache(u.uri);if(o)return o;const g=this.fetchSource(u);l.cachedModules.addToCache(u.uri,g);let C=null;try{C=await g}catch(S){throw l.cachedModules.removeFromCache(u.uri),S}return C}async fetchSource(u){if("portal"===u.scheme){const o=await ft(u.url,{responseType:"text",query:{}});if(o.data)return d(o.data,[])}if("mock"===u.scheme)return d(u.data??"",[]);throw new Ot(Pt.UnsupportedUriProtocol)}static create(u){return new l(u)}static getDefault(){return this._default??(l._default=l._moduleResolverFactory())}static set moduleResolverClass(u){this._moduleResolverFactory=u,this._default=null}}l.mocks={},l.cachedModules=new class s4{constructor(u=20){this._maxEntries=u,this._cache=new t4(this._maxEntries),this._layerMetadata=new t4(this._maxEntries),this._serviceMetadata=new t4(this._maxEntries),this._portalItems=new t4(this._maxEntries)}clear(){this._cache=new t4(this._maxEntries),this._layerMetadata=new t4(this._maxEntries),this._serviceMetadata=new t4(this._maxEntries),this._portalItems=new t4(this._maxEntries)}addToCache(u,o){this._cache.put(u,o)}removeFromCache(u){this._cache.delete(u)}getFromCache(u){return this._cache.get(u)}getCachedLayerMetadata(u){return this._layerMetadata.get(u)}setCachedLayerMetadata(u,o){this._layerMetadata.put(u,o)}removeCachedLayerMetadata(u,o){this._layerMetadata.get(u)===o&&this._layerMetadata.delete(u)}getCachedServiceMetadata(u){return this._serviceMetadata.get(u)}setCachedServiceMetadata(u,o){this._serviceMetadata.put(u,o)}removeCachedServiceMetadata(u,o){this._serviceMetadata.get(u)===o&&this._serviceMetadata.delete(u)}getCachedPortalItem(u,o){return this._portalItems.get(`${o}:${u}`)}setCachedPortalItem(u,o,g){this._portalItems.put(`${o}:${u}`,g)}removeCachedPortalItem(u,o,g){const C=`${o}:${u}`;this._portalItems.get(C)===g&&this._portalItems.delete(C)}}(30),l._default=null,l._moduleResolverFactory=()=>{const u=lt.getDefault();return new l(u.url)};let Ai=class P extends Lt{constructor(u,o){super(),this.definition=null,this.context=null,this.definition=u,this.context=o}createFunction(u){return(...o)=>{const g={spatialReference:this.context.spatialReference,console:this.context.console,services:this.context.services,timeZone:this.context.timeZone??null,lrucache:this.context.lrucache,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:u.depthCounter.depth+1},globalScope:this.context.globalScope};if(g.depthCounter.depth>64)throw new Mt(u,St.MaximumCallDepth,null);return Fe(this.definition,g,o,null)}}call(u,o){return V$2(u,o,((g,C,S)=>{const M={spatialReference:u.spatialReference,services:u.services,globalScope:u.globalScope,depthCounter:{depth:u.depthCounter.depth+1},libraryResolver:u.libraryResolver,exports:u.exports,timeZone:u.timeZone??null,console:u.console,lrucache:u.lrucache,interceptor:u.interceptor,localScope:{}};if(M.depthCounter.depth>64)throw new Mt(u,St.MaximumCallDepth,o);return Fe(this.definition,M,S,o)}))}marshalledCall(u,o,g,C){return C(u,o,((S,M,j)=>{const xe={spatialReference:u.spatialReference,globalScope:g.globalScope,services:u.services,depthCounter:{depth:u.depthCounter.depth+1},libraryResolver:u.libraryResolver,exports:u.exports,console:u.console,timeZone:u.timeZone??null,lrucache:u.lrucache,interceptor:u.interceptor,localScope:{}};return j=j.map((o=>!_$4(o)||o instanceof Gt?o:n$2(o,u,C))),n$2(Fe(this.definition,xe,j,o),g,C)}))}},bi=class T extends vt{constructor(u){super(u)}global(u){const o=this.executingContext.globalScope[u.toLowerCase()];if(o.valueset||(o.value=_$2(this.executingContext,o.node),o.valueset=!0),_$4(o.value)&&!(o.value instanceof Gt)){const u=new Gt;u.fn=o.value,u.parameterEvaluator=V$2,u.context=this.executingContext,o.value=u}return o.value}setGlobal(u,o){if(_$4(o))throw new Mt(null,St.AssignModuleFunction,null);this.executingContext.globalScope[u.toLowerCase()]={value:o,valueset:!0,node:null}}hasGlobal(u){return void 0===this.executingContext.exports[u]&&(u=u.toLowerCase()),void 0!==this.executingContext.exports[u]}loadModule(u){let o=u.spatialReference;null==o&&(o=new et({wkid:102100})),this.moduleScope=Re({},u.customfunctions,u.timeZone),this.executingContext={spatialReference:o,globalScope:this.moduleScope,localScope:null,libraryResolver:new Et(u.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},services:u.services,console:u.console??Me,timeZone:u.timeZone??null,lrucache:u.lrucache,interceptor:u.interceptor,depthCounter:{depth:1}},_$2(this.executingContext,this.source.syntax)}};function V$2(u,o,g){try{return!0===o.preparsed?g(u,null,o.arguments):g(u,o,function W$2(u,o){const g=[];for(let C=0;C<o.arguments.length;C++)g.push(_$2(u,o.arguments[C]));return g}(u,o))}catch(C){throw C}}function _$2(u,o){try{switch(null==o?void 0:o.type){case"EmptyStatement":return en;case"VariableDeclarator":return function ue$1(u,o){let g=null===o.init?null:_$2(u,o.init);if(g===en&&(g=null),"Identifier"!==o.id.type)throw new Mt(u,St.InvalidIdentifier,o);const C=o.id.name.toLowerCase();return null!=u.localScope?u.localScope[C]={value:g,valueset:!0,node:o.init}:u.globalScope[C]={value:g,valueset:!0,node:o.init},en}(u,o);case"VariableDeclaration":return function ce(u,o){for(let g=0;g<o.declarations.length;g++)_$2(u,o.declarations[g]);return en}(u,o);case"ImportDeclaration":return function ae$1(u,o){var g,C;const S=o.specifiers[0].local.name.toLowerCase(),M=u.libraryResolver.loadLibrary(S);let j=null;return(null==(g=u.libraryResolver._moduleSingletons)?void 0:g.has(M.uri))?j=u.libraryResolver._moduleSingletons.get(M.uri):(j=new bi(M),j.loadModule(u),null==(C=u.libraryResolver._moduleSingletons)||C.set(M.uri,j)),u.globalScope[S]={value:j,valueset:!0,node:o},en}(u,o);case"ExportNamedDeclaration":return function se$1(u,o){if(_$2(u,o.declaration),"FunctionDeclaration"===o.declaration.type)u.exports[o.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===o.declaration.type)for(const g of o.declaration.declarations)u.exports[g.id.name.toLowerCase()]="variable";return en}(u,o);case"BlockStatement":case"Program":return function re$2(u,o){let g=en;for(let C=0;C<o.body.length;C++)if(g=_$2(u,o.body[C]),g instanceof Yt||g===tn||g===nn)return g;return g}(u,o);case"FunctionDeclaration":return function ie$1(u,o){const g=o.id.name.toLowerCase();return u.globalScope[g]={valueset:!0,node:null,value:new Ai(o,u)},en}(u,o);case"ReturnStatement":return function le(u,o){if(null===o.argument)return new Yt(en);const g=_$2(u,o.argument);return new Yt(g)}(u,o);case"IfStatement":return function oe$1(u,o){const g=_$2(u,o.test);if(!0===g)return _$2(u,o.consequent);if(!1===g)return null!==o.alternate?_$2(u,o.alternate):en;throw new Mt(u,St.BooleanConditionRequired,o)}(u,o);case"ExpressionStatement":return function ne$1(u,o){if("AssignmentExpression"===o.expression.type||"UpdateExpression"===o.expression.type)return _$2(u,o.expression);if("CallExpression"===o.expression.type){const g=_$2(u,o.expression);return g===en?en:new Qt(g)}{const g=_$2(u,o.expression);return g===en?en:new Qt(g)}}(u,o);case"AssignmentExpression":return function te$2(u,o){let g=null,C="";if("MemberExpression"===o.left.type){if(g=_$2(u,o.left.object),!0===o.left.computed)C=_$2(u,o.left.property);else{if("Identifier"!==o.left.property.type)throw new Mt(u,St.InvalidIdentifier,o);C=o.left.property.name}const S=_$2(u,o.right);if(U$5(g)){if(!E$4(C))throw new Mt(u,St.ArrayAccessorMustBeNumber,o);if(C<0&&(C=g.length+C),C<0||C>g.length)throw new Mt(u,St.OutOfBounds,o);if(C===g.length){if("="!==o.operator)throw new Mt(u,St.OutOfBounds,o);g[C]=ee$2(S,o.operator,g[C],o,u)}else g[C]=ee$2(S,o.operator,g[C],o,u)}else if(g instanceof on){if(!1===G$3(C))throw new Mt(u,St.KeyAccessorMustBeString,o);if(!0===g.hasField(C))g.setField(C,ee$2(S,o.operator,g.field(C),o,u));else{if("="!==o.operator)throw new Mt(u,St.FieldNotFound,o,{key:C});g.setField(C,ee$2(S,o.operator,null,o,u))}}else if(H$7(g)){if(!1===G$3(C))throw new Mt(u,St.KeyAccessorMustBeString,o);if(!0===g.hasField(C))g.setField(C,ee$2(S,o.operator,g.field(C),o,u));else{if("="!==o.operator)throw new Mt(u,St.FieldNotFound,o,{key:C});g.setField(C,ee$2(S,o.operator,null,o,u))}}else{if(Q$5(g))throw new Mt(u,St.Immutable,o);if(!(g instanceof bi))throw new Mt(u,St.InvalidIdentifier,o);if(!1===G$3(C))throw new Mt(u,St.ModuleAccessorMustBeString,o);if(!0!==g.hasGlobal(C))throw new Mt(u,St.ModuleExportNotFound,o);g.setGlobal(C,ee$2(S,o.operator,g.global(C),o,u))}return en}g=o.left.name.toLowerCase();const S=_$2(u,o.right);if(null!=u.localScope&&void 0!==u.localScope[g])return u.localScope[g]={value:ee$2(S,o.operator,u.localScope[g].value,o,u),valueset:!0,node:o.right},en;if(void 0!==u.globalScope[g])return u.globalScope[g]={value:ee$2(S,o.operator,u.globalScope[g].value,o,u),valueset:!0,node:o.right},en;throw new Mt(u,St.InvalidIdentifier,o)}(u,o);case"UpdateExpression":return function $$1(u,o){let g,C=null,S="";if("MemberExpression"===o.argument.type){if(C=_$2(u,o.argument.object),!0===o.argument.computed?S=_$2(u,o.argument.property):"Identifier"===o.argument.property.type&&(S=o.argument.property.name),U$5(C)){if(!E$4(S))throw new Mt(u,St.ArrayAccessorMustBeNumber,o);if(S<0&&(S=C.length+S),S<0||S>=C.length)throw new Mt(u,St.OutOfBounds,o);g=ge$2(C[S]),C[S]="++"===o.operator?g+1:g-1}else if(C instanceof on){if(!1===G$3(S))throw new Mt(u,St.KeyAccessorMustBeString,o);if(!0!==C.hasField(S))throw new Mt(u,St.FieldNotFound,o);g=ge$2(C.field(S)),C.setField(S,"++"===o.operator?g+1:g-1)}else if(H$7(C)){if(!1===G$3(S))throw new Mt(u,St.KeyAccessorMustBeString,o);if(!0!==C.hasField(S))throw new Mt(u,St.FieldNotFound,o);g=ge$2(C.field(S)),C.setField(S,"++"===o.operator?g+1:g-1)}else{if(Q$5(C))throw new Mt(u,St.Immutable,o);if(!(C instanceof bi))throw new Mt(u,St.InvalidParameter,o);if(!1===G$3(S))throw new Mt(u,St.ModuleAccessorMustBeString,o);if(!0!==C.hasGlobal(S))throw new Mt(u,St.ModuleExportNotFound,o);g=ge$2(C.global(S)),C.setGlobal(S,"++"===o.operator?g+1:g-1)}return!1===o.prefix?g:"++"===o.operator?g+1:g-1}if(C="Identifier"===o.argument.type?o.argument.name.toLowerCase():"",!C)throw new Mt(u,St.InvalidIdentifier,o);if(null!=u.localScope&&void 0!==u.localScope[C])return g=ge$2(u.localScope[C].value),u.localScope[C]={value:"++"===o.operator?g+1:g-1,valueset:!0,node:o},!1===o.prefix?g:"++"===o.operator?g+1:g-1;if(void 0!==u.globalScope[C])return g=ge$2(u.globalScope[C].value),u.globalScope[C]={value:"++"===o.operator?g+1:g-1,valueset:!0,node:o},!1===o.prefix?g:"++"===o.operator?g+1:g-1;throw new Mt(u,St.InvalidIdentifier,o)}(u,o);case"BreakStatement":return tn;case"ContinueStatement":return nn;case"TemplateElement":return function me(u,o){return o.value?o.value.cooked:""}(0,o);case"TemplateLiteral":return function ve(u,o){let g="",C=0;for(const S of o.quasis)g+=S.value?S.value.cooked:"",!1===S.tail&&(g+=o.expressions[C]?me$3(ge(_$2(u,o.expressions[C]),u,o)):"",C++);return g}(u,o);case"ForStatement":return function J$2(u,o){null!==o.init&&_$2(u,o.init);const g={testResult:!0,lastAction:en};do{X$2(u,o,g)}while(!0===g.testResult);return g.lastAction instanceof Yt?g.lastAction:en}(u,o);case"ForInStatement":return function Y$2(u,o){const g=_$2(u,o.right);"VariableDeclaration"===o.left.type&&_$2(u,o.left);let C=null,S="";if("VariableDeclaration"===o.left.type){const u=o.left.declarations[0].id;"Identifier"===u.type&&(S=u.name)}else"Identifier"===o.left.type&&(S=o.left.name);if(!S)throw new Mt(u,St.InvalidIdentifier,o);if(S=S.toLowerCase(),null!=u.localScope&&void 0!==u.localScope[S]&&(C=u.localScope[S]),null===C&&void 0!==u.globalScope[S]&&(C=u.globalScope[S]),null===C)throw new Mt(u,St.InvalidIdentifier,o);if(U$5(g)||G$3(g)){const S=g.length;for(let g=0;g<S;g++){C.value=g;const S=_$2(u,o.body);if(S===tn)break;if(S instanceof Yt)return S}return en}if(Q$5(g)){for(let S=0;S<g.length();S++){C.value=S;const g=_$2(u,o.body);if(g===tn)break;if(g instanceof Yt)return g}return en}if(!(g instanceof on||H$7(g)))return en;{const S=g.keys();for(let g=0;g<S.length;g++){C.value=S[g];const M=_$2(u,o.body);if(M===tn)break;if(M instanceof Yt)return M}}}(u,o);case"WhileStatement":return function Q$2(u,o){const g={testResult:!0,lastAction:en};if(g.testResult=_$2(u,o.test),!1===g.testResult)return en;if(!0!==g.testResult)throw new Mt(u,St.BooleanConditionRequired,o);for(;!0===g.testResult&&(g.lastAction=_$2(u,o.body),g.lastAction!==tn)&&!(g.lastAction instanceof Yt);)if(g.testResult=_$2(u,o.test),!0!==g.testResult&&!1!==g.testResult)throw new Mt(u,St.BooleanConditionRequired,o);return g.lastAction instanceof Yt?g.lastAction:en}(u,o);case"Identifier":return ye(u,o);case"MemberExpression":return function fe(u,o){try{const g=_$2(u,o.object);if(null===g)throw new Mt(u,St.MemberOfNull,o);if(!1===o.computed){if("Identifier"===o.property.type){if(g instanceof on||H$7(g))return g.field(o.property.name);if(g instanceof Ue)return d$6(g,o.property.name,u,o);if(g instanceof bi){if(!g.hasGlobal(o.property.name))throw new Mt(u,St.InvalidIdentifier,o);return g.global(o.property.name)}}throw new Mt(u,St.InvalidMemberAccessKey,o)}{let C=_$2(u,o.property);if(g instanceof on||H$7(g)){if(G$3(C))return g.field(C);throw new Mt(u,St.InvalidMemberAccessKey,o)}if(g instanceof bi){if(G$3(C))return g.global(C);throw new Mt(u,St.InvalidMemberAccessKey,o)}if(g instanceof Ue){if(G$3(C))return d$6(g,C,u,o);throw new Mt(u,St.InvalidMemberAccessKey,o)}if(U$5(g)){if(E$4(C)&&isFinite(C)&&Math.floor(C)===C){if(C<0&&(C=g.length+C),C>=g.length||C<0)throw new Mt(u,St.OutOfBounds,o);return g[C]}throw new Mt(u,St.InvalidMemberAccessKey,o)}if(G$3(g)){if(E$4(C)&&isFinite(C)&&Math.floor(C)===C){if(C<0&&(C=g.length+C),C>=g.length||C<0)throw new Mt(u,St.OutOfBounds,o);return g[C]}throw new Mt(u,St.InvalidMemberAccessKey,o)}if(Q$5(g)){if(E$4(C)&&isFinite(C)&&Math.floor(C)===C){if(C<0&&(C=g.length()+C),C>=g.length()||C<0)throw new Mt(u,St.OutOfBounds,o);return g.get(C)}throw new Mt(u,St.InvalidMemberAccessKey,o)}throw new Mt(u,St.InvalidMemberAccessKey,o)}}catch(g){throw g}}(u,o);case"Literal":return o.value;case"CallExpression":return function be(u,o){try{if("MemberExpression"===o.callee.type){const g=_$2(u,o.callee.object);if(!(g instanceof bi))throw new Mt(u,St.FunctionNotFound,o);const C=!1===o.callee.computed?o.callee.property.name:_$2(u,o.callee.property);if(!g.hasGlobal(C))throw new Mt(u,St.FunctionNotFound,o);const S=g.global(C);if(!_$4(S))throw new Mt(u,St.CallNonFunction,o);return S.call(u,o)}if("Identifier"!==o.callee.type)throw new Mt(u,St.FunctionNotFound,o);if(null!=u.localScope&&void 0!==u.localScope[o.callee.name.toLowerCase()]){const g=u.localScope[o.callee.name.toLowerCase()];if(_$4(g.value))return g.value.call(u,o);throw new Mt(u,St.CallNonFunction,o)}if(void 0!==u.globalScope[o.callee.name.toLowerCase()]){const g=u.globalScope[o.callee.name.toLowerCase()];if(_$4(g.value))return g.value.call(u,o);throw new Mt(u,St.CallNonFunction,o)}throw new Mt(u,St.FunctionNotFound,o)}catch(g){throw g}}(u,o);case"UnaryExpression":return function pe(u,o){try{const g=_$2(u,o.argument);if(z$6(g)){if("!"===o.operator)return!g;if("-"===o.operator)return-1*ge$2(g);if("+"===o.operator)return 1*ge$2(g);if("~"===o.operator)return~ge$2(g);throw new Mt(u,St.UnsupportedUnaryOperator,o)}if("~"===o.operator)return~ge$2(g);if("-"===o.operator)return-1*ge$2(g);if("+"===o.operator)return 1*ge$2(g);throw new Mt(u,St.UnsupportedUnaryOperator,o)}catch(g){throw g}}(u,o);case"BinaryExpression":return function he(u,o){try{const g=[_$2(u,o.left),_$2(u,o.right)],C=g[0],S=g[1];switch(o.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return _e$1(ge$2(C),ge$2(S),o.operator);case"==":return ce$3(C,S);case"!=":return!ce$3(C,S);case"<":case">":case"<=":case">=":return fe$2(C,S,o.operator);case"+":return G$3(C)||G$3(S)?me$3(C)+me$3(S):ge$2(C)+ge$2(S);case"-":return ge$2(C)-ge$2(S);case"*":return ge$2(C)*ge$2(S);case"/":return ge$2(C)/ge$2(S);case"%":return ge$2(C)%ge$2(S);default:throw new Mt(u,St.UnsupportedOperator,o)}}catch(g){throw g}}(u,o);case"LogicalExpression":return function we(u,o){try{const g=_$2(u,o.left);if(z$6(g))switch(o.operator){case"||":if(!0===g)return g;{const g=_$2(u,o.right);if(z$6(g))return g;throw new Mt(u,St.LogicExpressionOrAnd,o)}case"&&":if(!1===g)return g;{const g=_$2(u,o.right);if(z$6(g))return g;throw new Mt(u,St.LogicExpressionOrAnd,o)}default:throw new Mt(u,St.LogicExpressionOrAnd,o)}throw new Mt(u,St.LogicalExpressionOnlyBoolean,o)}catch(g){throw g}}(u,o);case"ArrayExpression":return function de(u,o){try{const g=[];for(let C=0;C<o.elements.length;C++){const S=_$2(u,o.elements[C]);if(_$4(S))throw new Mt(u,St.NoFunctionInArray,o);S===en?g.push(null):g.push(S)}return g}catch(g){throw g}}(u,o);case"ObjectExpression":return function z$1(u,o){const g={},C=new Map;for(let M=0;M<o.properties.length;M++){const S=_$2(u,o.properties[M]);if(_$4(S.value))throw new Mt(u,St.NoFunctionInDictionary,o);if(!1===G$3(S.key))throw new Mt(u,St.KeyMustBeString,o);let j=S.key.toString();const xe=j.toLowerCase();C.has(xe)?j=C.get(xe):C.set(xe,j),S.value===en?g[j]=null:g[j]=S.value}const S=new on(g);return S.immutable=!1,S}(u,o);case"Property":return function H$2(u,o){return{key:"Identifier"===o.key.type?o.key.name:_$2(u,o.key),value:_$2(u,o.value)}}(u,o);default:throw new Mt(u,St.Unrecognized,o)}}catch(g){throw u$6(0,o,g)}}function X$2(u,o,g){if(null!==o.test){if(g.testResult=_$2(u,o.test),!1===g.testResult)return;if(!0!==g.testResult)throw new Mt(u,St.BooleanConditionRequired,o)}g.lastAction=_$2(u,o.body),g.lastAction!==tn?g.lastAction instanceof Yt?g.testResult=!1:null!==o.update&&_$2(u,o.update):g.testResult=!1}function ee$2(u,o,g,C,S){switch(o){case"=":return u===en?null:u;case"/=":return ge$2(g)/ge$2(u);case"*=":return ge$2(g)*ge$2(u);case"-=":return ge$2(g)-ge$2(u);case"+=":return G$3(g)||G$3(u)?me$3(g)+me$3(u):ge$2(g)+ge$2(u);case"%=":return ge$2(g)%ge$2(u);default:throw new Mt(S,St.UnsupportedOperator,C)}}function ge(u,o,g){if(_$4(u))throw new Mt(o,St.NoFunctionInTemplateLiteral,g);return u}function ye(u,o){let g;try{const C=o.name.toLowerCase();if(null!=u.localScope&&void 0!==u.localScope[C])return g=u.localScope[C],!0===g.valueset||(g.value=_$2(u,g.node),g.valueset=!0),g.value;if(void 0!==u.globalScope[C])return g=u.globalScope[C],!0===g.valueset||(g.value=_$2(u,g.node),g.valueset=!0),g.value;throw new Mt(u,St.InvalidIdentifier,o)}catch(C){throw C}}const vi={};function Se(u,o,g,C){try{const S=o.arguments;if(ce$3(_$2(u,S[g]),C))return _$2(u,S[g+1]);{const M=S.length-g;return 1===M?_$2(u,S[g]):2===M?null:3===M?_$2(u,S[g+2]):Se(u,o,g+2,C)}}catch(S){throw S}}function Ie(u,o,g,C){try{const S=o.arguments;if(!0===C)return _$2(u,S[g+1]);if(3==S.length-g)return _$2(u,S[g+2]);{const C=_$2(u,S[g+2]);if(!1===z$6(C))throw new Mt(u,St.BooleanConditionRequired,S[g+2]);return Ie(u,o,g+2,C)}}catch(S){throw S}}function Fe(u,o,g,C){try{const S=u.body;if(g.length!==u.params.length)throw new Mt(o,St.WrongNumberOfParameters,C);if(null!=o.localScope)for(let C=0;C<g.length;C++)o.localScope[u.params[C].name.toLowerCase()]={value:g[C],valueset:!0,node:null};const M=_$2(o,S);if(M instanceof Yt)return M.value;if(M===tn)throw new Mt(o,St.UnexpectedToken,C);if(M===nn)throw new Mt(o,St.UnexpectedToken,C);return M instanceof Qt?M.value:M}catch(S){throw S}}C$4(vi,V$2),Y$4(vi,V$2),M$4(vi,V$2),L$4(vi,V$2),f$1(vi,V$2),H$6(vi,V$2),vi.iif=function(u,o){try{const g=o.arguments;ae$4(null===g?[]:g,3,3,u,o);const C=_$2(u,g[0]);if(!1===z$6(C))throw new Mt(u,St.BooleanConditionRequired,o);return _$2(u,!0===C?g[1]:g[2])}catch(g){throw g}},vi.defaultvalue=function(u,o){try{const g=o.arguments;ae$4(null===g?[]:g,2,3,u,o);const C=_$2(u,g[0]);if(3===g.length){const o=p$7(C,_$2(u,g[1]));return null!=o&&""!==o?o:_$2(u,g[2])}return null===C||""===C||void 0===C?_$2(u,g[1]):C}catch(g){throw g}},vi.decode=function(u,o){try{const g=o.arguments;if(g.length<2)throw new Mt(u,St.WrongNumberOfParameters,o);if(2===g.length)return _$2(u,g[1]);if((g.length-1)%2==0)throw new Mt(u,St.WrongNumberOfParameters,o);return Se(u,o,1,_$2(u,g[0]))}catch(g){throw g}},vi.when=function(u,o){try{const g=o.arguments;if(g.length<3)throw new Mt(u,St.WrongNumberOfParameters,o);if(g.length%2==0)throw new Mt(u,St.WrongNumberOfParameters,o);const C=_$2(u,g[0]);if(!1===z$6(C))throw new Mt(u,St.BooleanConditionRequired,g[0]);return Ie(u,o,0,C)}catch(g){throw g}};for(const Ui in vi)vi[Ui]={value:new Ut(vi[Ui]),valueset:!0,node:null};const Ce=function(){};function Re(u,o,g){const C=new Ce;u||(u={}),o||(o={});const S=new on({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});S.immutable=!1,C.textformatting={value:S,valueset:!0,node:null};for(const M in o)C[M]={value:new Ut(o[M]),native:!0,valueset:!0,node:null};for(const M in u)u[M]&&"esri.Graphic"===u[M].declaredClass?C[M]={value:cn.createFromGraphic(u[M],g),valueset:!0,node:null}:C[M]={value:u[M],valueset:!0,node:null};return C}function Me(u){}function Ee(u){const o={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:V$2,evaluateIdentifier:ye};for(let g=0;g<u.length;g++)u[g].registerFunctions(o);for(const g in o.functions)vi[g]={value:new Ut(o.functions[g]),valueset:!0,node:null},Ce.prototype[g]=vi[g];for(let g=0;g<o.signatures.length;g++)o$2(o.signatures[g],"sync")}function Le(u,o){let g=o.spatialReference;null==g&&(g=new et({wkid:102100}));let C=null;u.usesModules&&(C=new Et(new Map,u.loadedModules));const S={spatialReference:g,globalScope:Re(o.vars,o.customfunctions,o.timeZone),localScope:null,services:o.services??null,exports:{},libraryResolver:C,console:o.console??Me,timeZone:o.timeZone??null,lrucache:o.lrucache,interceptor:o.interceptor,depthCounter:{depth:1}};let M=_$2(S,u);if(M instanceof Yt&&(M=M.value),M instanceof Qt&&(M=M.value),M===en&&(M=null),M===tn)throw new Mt(S,St.IllegalResult,null);if(M===nn)throw new Mt(S,St.IllegalResult,null);if(_$4(M))throw new Mt(S,St.IllegalResult,null);return M}Ce.prototype=vi,Ce.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},Ce.prototype.pi={value:Math.PI,valueset:!0,node:null},Ee([$n]);const Ei=new Set(["feature","angle","bearing","centroid","envelopeintersects","extent","geometry","isselfintersecting","ringisclockwise"]);let Si=!1,Ii=!1,ki=null,_i=[];function x(u,o){if(!0===o.useAsync||!0===u.isAsync)return function M$1(u,o){if(null===ki)throw new Mt(null,St.AsyncNotEnabled,null);if(ht("esri-csp-restrictions"))return function(o){return ki.executeScript(u,o)};try{return Pe(u,o,!0)}catch(g){if("esri.arcade.arcadeuncompilableerror"===g.declaredRootClass)return function(o){return ki.executeScript(u,o)};throw g}}(u,o);if(ht("esri-csp-restrictions"))return function(o){return Le(u,o)};try{return Pe(u,o)}catch(g){if("esri.arcade.arcadeuncompilableerror"===g.declaredRootClass)return function(o){return Le(u,o)};throw g}}function E(u,o=[]){return d(u,o)}function G$1(u,o){if(!0===o.useAsync||!0===u.isAsync){if(null===ki)throw new Mt(null,St.AsyncNotEnabled,null);return ki.executeScript(u,o)}return Le(u,o)}function U$1(u,o){return c$3(u,o)}function R(u){return function u$4(u){const o=[];return r$2(u,(u=>{var g;if("CallExpression"===u.type){if("Identifier"===u.callee.type&&"expects"===u.callee.name.toLowerCase()){let g="";for(let C=0;C<(u.arguments||[]).length;C++)0===C?"Identifier"===u.arguments[C].type&&(g=u.arguments[C].name.toLowerCase()):g&&"Literal"===u.arguments[C].type&&m$4(u.arguments[C].value)&&o.push(g+"."+u.arguments[C].value.toLowerCase());return!1}if("Identifier"===u.callee.type&&["domainname","domaincode","domain","haskey"].includes(u.callee.name.toLowerCase())&&u.arguments.length>=2){let g="";return"Identifier"===u.arguments[0].type&&(g=u.arguments[0].name.toLowerCase()),g&&"Literal"===u.arguments[1].type&&m$4(u.arguments[1].value)&&o.push(g+"."+u.arguments[1].value.toLowerCase()),!1}}return"MemberExpression"!==u.type||"Identifier"!==u.object.type||(!1===u.computed&&u.object&&u.object.name&&u.property&&"Identifier"===u.property.type&&u.property.name?o.push(u.object.name.toLowerCase()+"."+u.property.name.toLowerCase()):u.object&&u.object.name&&u.property&&"Literal"===u.property.type&&"string"==typeof u.property.value&&o.push(u.object.name.toLowerCase()+"."+(null==(g=u.property.value)?void 0:g.toString().toLowerCase())),!1)})),o}(u)}function k2(u,o=[]){return void 0===u.usesGeometry&&d$5(u,o),!0===u.usesGeometry}let Ti=null;function D$1(){return Ti||(Ti=z2(),Ti)}async function z2(){const u=await dt((()=>import("./geometryEngine-Bp1TD6MM.js")),__vite__mapDeps([0,1,2,3,4]));return Ii=!0,function U$4(u){Fn=u}(u),!0}let Mi=null;function L$1(){return null!==Mi||(Mi=N$1()),Mi}async function N$1(){await async function Ze(){return je([await dt((()=>import("./geomasync-CEAkjwG1.js")),__vite__mapDeps([5,2,3,6,7,8,9,10,11]))],"async"),!0}(),ki=await dt((()=>import("./arcadeAsyncRuntime-4_H3vixK.js")),__vite__mapDeps([12,5,2,3,6,7,8,9,10,11]));for(const u of _i)ki.extend(u),je(u,"async");return _i=null,!0}function O$1(){return Si}function T$1(){return!!ki}function q$1(){return Ii}let Bi=null;function H$1(){return Bi||(Bi=J$1(),Bi)}async function J$1(){await L$1();const[u,o,g,C,S,M]=await Promise.all([dt((()=>import("./featureSetUtils-CIPr2I89.js").then((u=>u.g))),__vite__mapDeps([13,2,3,14,6,15,8,16,17,18,19,20,21,22,23,24,25])),dt((()=>import("./featuresetbase-BYi56tYb.js")),__vite__mapDeps([26,6,2,3,13,14,15,8,16,17,18,19,20,21,22,23,24,25,9,7,10,11])),dt((()=>import("./featuresetgeom-HOdap_EF.js")),__vite__mapDeps([27,6,2,3,15,14,8,9,10,11])),dt((()=>import("./featuresetstats-D6Hyqz6R.js")),__vite__mapDeps([28,6,2,3,14,9,10,11])),dt((()=>import("./featuresetstring-DOoQDc5J.js")),__vite__mapDeps([29,2,3,6,9,10,11])),dt((()=>import("./knowledgegraph-CHU729kD.js")),__vite__mapDeps([30,2,3,7,31,6,9,10,11]))]);return Ni=u,ki.extend([o,g,C,S,M]),je([o,g,C,S,M],"async"),Si=!0,!0}function K$1(u,o=[]){return void 0===u.usesFeatureSet&&d$5(u,o),!0===u.usesFeatureSet}async function W$1(u,o,g=[],C=!1,S=null){return X$1(new Set,u,o,g,C,S)}async function X$1(u,o,g,C=[],S=!1,M=null){const j="string"==typeof o?E(o):o,xe=[];return j&&(!1===q$1()&&(k2(j)||S)&&xe.push(D$1()),!1===T$1()&&(!0===j.isAsync||g)&&xe.push(L$1()),!1===O$1()&&(K$1(j)||function V$1(u,o){if(o){for(const g of o)if(U$1(u,g))return!0;return!1}return!1}(j,C))&&xe.push(H$1())),xe.length&&await Promise.all(xe),await Z$1(u,j,M,g,S),!0}async function Z$1(u,o,g=null,C=!1,S=!1){const M=x$5(o);null===g&&M.length>0&&(g=l.getDefault()),o.loadedModules={};for(const j of M){ut(g);const M=g.normalizeModuleUri(j.source);if(u.has(M.uri))throw new Mt(null,St.CircularModules,null);u.add(M.uri);const xe=await g.fetchModule(M);await X$1(u,xe,C,[],S,g),u.delete(M.uri),xe.isAsync&&(o.isAsync=!0),xe.usesFeatureSet&&(o.usesFeatureSet=!0),xe.usesGeometry&&(o.usesGeometry=!0),o.loadedModules[j.libname]={uri:M.uri,script:xe}}}function $(u){if(k2(u))return!0;const o=y$4(u);let g=!1;for(let C=0;C<o.length;C++)if(Ei.has(o[C])){g=!0;break}return g}let Ni=null;function te$1(){return Ni}const Pi=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:X$1,compileScript:x,enableAsyncSupport:L$1,enableAsyncSupportImpl:N$1,enableFeatureSetSupport:H$1,enableFeatureSetSupportImpl:J$1,enableGeometrySupport:D$1,enableGeometrySupportImpl:z2,executeScript:G$1,extend:function F2(u){Ee(u),je(u,"sync"),null===ki?_i.push(u):(je(u,"async"),ki.extend(u))},extractExpectedFieldLiterals:R,extractFieldLiterals:function I$1(u,o=!1){return void 0===o&&(o=!1),function l$5(u){const o=[];return r$2(u,(u=>{var g;return"MemberExpression"!==u.type||"Identifier"!==u.object.type||(!1===u.computed&&u.object&&u.object.name&&u.property&&"Identifier"===u.property.type&&u.property.name?o.push(u.object.name.toLowerCase()+"."+u.property.name.toLowerCase()):u.object&&u.object.name&&u.property&&"Literal"===u.property.type&&"string"==typeof u.property.value&&o.push(u.object.name.toLowerCase()+"."+(null==(g=u.property.value)?void 0:g.toString().toLowerCase())),!1)})),o}(u)},featureSetUtils:te$1,isAsyncEnabled:T$1,isFeatureSetSupportEnabled:O$1,isGeometryEnabled:q$1,loadDependentModules:Z$1,loadScriptDependencies:W$1,parseAndExecuteScript:function v(u,o,g=[]){return G$1(d(u,g),o)},parseScript:E,referencesFunction:function _$1(u,o){return function p$6(u,o){let g=!1;const C=o.toLowerCase();return r$2(u,(u=>!(g||"CallExpression"===u.type&&"Identifier"===u.callee.type&&u.callee.name&&u.callee.name.toLowerCase()===C&&(g=!0,1)))),g}(u,o)},referencesMember:U$1,scriptIsAsync:function Q$1(u,o=[]){return void 0===u.isAsync&&d$5(u,o),!0===u.isAsync},scriptTouchesGeometry:$,scriptUsesFeatureSet:K$1,scriptUsesGeometryEngine:k2,scriptUsesModules:function Y$1(u,o=[]){return void 0===u.usesModules&&d$5(u,o),!0===u.usesModules}},Symbol.toStringTag,{value:"Module"})),Ri=/^\$(feature|aggregatedFeatures)\./i,Oi={vars:{$feature:"any",$view:"any"},spatialReference:null};function A(u){return u.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function I(u){if(!u)return null;try{return E(u)}catch(o){}return null}function te(u,o){var g,C;if(!u)return!1;if("string"==typeof u)return o(u);const S=u;if(function ee(u){return"simple"===u.type||"class-breaks"===u.type||"unique-value"===u.type||"dot-density"===u.type||"dictionary"===u.type||"pie-chart"===u.type}(S)){if("dot-density"===S.type){const u=null==(g=S.attributes)?void 0:g.some((u=>o(u.valueExpression)));if(u)return u}const u=S.visualVariables,C=!!u&&u.some((u=>{let g=o(u.valueExpression);return"size"===u.type&&(ue(u.minSize)&&(g=g||o(u.minSize.valueExpression)),ue(u.maxSize)&&(g=g||o(u.maxSize.valueExpression))),g}));return!(!("valueExpression"in S)||!o(S.valueExpression))||C}if(function ne(u){return"esri.layers.support.LabelClass"===u.declaredClass}(S)){const u=null==(C=S.labelExpressionInfo)?void 0:C.expression;return!(!u||!o(u))||!1}return!!function re(u){return"esri.PopupTemplate"===u.declaredClass}(S)&&(!!S.expressionInfos&&S.expressionInfos.some((u=>o(u.expression)))||Array.isArray(S.content)&&S.content.some((u=>{var g;return"expression"===u.type&&o(null==(g=u.expressionInfo)?void 0:g.expression)})))}function oe(u){const o=I(u);return!!o&&$(o)}function se(u){const o=I(u);return!!o&&k2(o)}function ue(u){return u&&"esri.renderers.visualVariables.SizeVariable"===u.declaredClass}const Li=Object.freeze(Object.defineProperty({__proto__:null,Dictionary:on,arcade:Pi,arcadeFeature:cn,convertFeatureLayerToFeatureSet:function N3({layer:u,spatialReference:o,outFields:g,returnGeometry:C,lrucache:S,interceptor:M}){if(null===u)return null;const j=te$1();return j?j.constructFeatureSet(u,o,g,C??!0,S,M):null},convertJsonToArcade:function W2(u,o){return on.convertJsonToArcade(u,o)},convertMapToFeatureSetCollection:function Q(u){if(null===(null==u?void 0:u.map))return null;const o=te$1();return o?o.createFeatureSetCollectionFromMap(u.map,u.spatialReference,u.lrucache,u.interceptor):null},convertServiceUrlToWorkspace:function K({url:u,spatialReference:o,lrucache:g,interceptor:C}){const S=te$1();return S?S.createFeatureSetCollectionFromService(u,o,g,C):null},createExecContext:function G(u,o,g){return{vars:{$feature:null==u?new cn:cn.createFromGraphic(u,g),$view:null==o?void 0:o.view},spatialReference:null==o?void 0:o.sr,timeZone:g??null}},createFeature:function T2(u,o,g){return cn.createFromGraphicLikeObject(o,u,g,null)},createFunction:function O(u,o){const g="string"==typeof u?I(u):u;if(!g)return null;try{return x(g,o=o||mt(Oi))}catch(C){}return null},createSyntaxTree:I,dependsOnView:function Z2(u){return U$1(u,"$view")},enableFeatureSetOperations:function _(){return H$1()},enableGeometryOperations:function Y2(){return D$1()},evalSyntaxTree:function D2(u,o){let g;try{g=G$1(u,o)}catch(C){g=null}return g},executeAsyncFunction:function J2(u,o){try{return u?u(o):Promise.resolve(null)}catch(g){return Promise.resolve(null)}},executeFunction:function L(u,o){let g;try{g=u?u(o):null}catch(C){g=null}return g},extractFieldNames:function U(u,o){if(!u)return[];const g="string"==typeof u?I(u):u;if(!g)return[];const C=R(g);let S=new Array;C.forEach((u=>{Ri.test(u)&&(u=u.replace(Ri,""),S.push(u))}));const M=S.filter((u=>u.includes("*")));return S=S.filter((u=>!M.includes(u))),o&&M.forEach((u=>{const g=new RegExp(`^${u.split(/\*+/).map(A).join(".*")}$`,"i");o.forEach((u=>g.test(u)?S.push(u):null))})),[...new Set(S.sort())]},getArcadeType:function q(u){return null==u?null:U$5(u)||Q$5(u)?"array":X$6(u)?"date":G$3(u)?"text":z$6(u)?"boolean":E$4(u)?"number":u instanceof on?"dictionary":H$7(u)?"feature":u instanceof g?"point":u instanceof j?"polygon":u instanceof xe?"polyline":u instanceof Oe?"multipoint":u instanceof M?"extent":u instanceof $t?"dateOnly":u instanceof gt?"time":B$4(u)?"featureSet":W$7(u)?"featureSetCollection":null},getViewInfo:function H(u){if(u&&(null!=u.spatialReference||null!=u.scale&&null!=u.viewingMode))return{view:u.viewingMode&&null!=u.scale?new on({viewingMode:u.viewingMode,scale:u.scale}):null,sr:u.spatialReference}},hasGeometryFunctions:function ie(u){return te(u,oe)},hasGeometryOperations:function ae(u){return te(u,se)},hasVariable:function B2(u,o){return!!u&&U$1(u,o)},loadScriptDependencies:function X(u,o,g=[]){return W$1(u,o,g)},updateExecContext:function V2(u,o){null!=u.vars&&(u.vars.$feature=o)}},Symbol.toStringTag,{value:"Module"}));export{l$3 as $,He as A,B$4 as B,C$4 as C,cn as D,E$4 as E,Ne as F,G$3 as G,H$7 as H,Cn as I,nn as J,Re$2 as K,L$4 as L,M$4 as M,on as N,en as O,P$7 as P,Q$5 as Q,tn as R,v$5 as S,y$5 as T,U$5 as U,V$4 as V,W$7 as W,X$6 as X,Y$4 as Y,Ze$1 as Z,_$4 as _,ae$4 as a,Fe$2 as a0,Ee$2 as a1,Ce$2 as a2,Ve as a3,qe as a4,Te$1 as a5,Ue$1 as a6,ke$1 as a7,pe$2 as a8,Be as a9,O$5 as aA,v$6 as aB,u$5 as aC,qt as aD,b$2 as aE,ve$2 as aF,jt as aG,J$8 as aH,k$5 as aI,An as aJ,M$8 as aK,Ge$1 as aL,B$5 as aM,Li as aN,Kt as aa,$$3 as ab,K$4 as ac,q$5 as ad,re$5 as ae,xe$2 as af,Me$2 as ag,Oe$1 as ah,y$3 as ai,m$3 as aj,y$2 as ak,x$3 as al,Z$3 as am,c$2 as an,r$1 as ao,Jt as ap,f$5 as aq,d$7 as ar,F$5 as as,T$6 as at,g$5 as au,c$4 as av,p$9 as aw,G$4 as ax,Vt as ay,Ht as az,Mt as b,Yt as c,$n as d,Ut as e,f$1 as f,ge$2 as g,d$6 as h,fe$2 as i,ce$3 as j,_e$1 as k,Lt as l,me$3 as m,Gt as n,o$2 as o,p$7 as p,n$2 as q,St as r,Et as s,vt as t,u$6 as u,te$5 as v,ee$5 as w,Qt as x,he$3 as y,z$6 as z};
