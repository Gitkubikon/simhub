import{bY as t,b3 as r,bZ as s}from"./index-DSIPxOWi.js";import{c as e,u as n,i as a}from"./infoFor3D-BTCPmnmy.js";class i{constructor(t,r,s){this.assetName=t,this.assetMimeType=r,this.parts=s}equals(r){return this===r||this.assetName===r.assetName&&this.assetMimeType===r.assetMimeType&&t(this.parts,r.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t="";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:s}=this;if(1===s.length)return s[0].toBlob(t);const e=await Promise.all(s.map((r=>r.toBlob(t))));return r(t),new Blob(e)}}class o{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(t){const{data:e}=await s(this.partUrl,{responseType:"blob"});return r(t),e}}function u(t){return function p(t){if(!t)return!1;if(Array.isArray(t))return t.some(m);return m(t)}(null==t?void 0:t.source)}function c(t){return!!Array.isArray(t)&&t.every((t=>t instanceof i))}const l=/^(model\/gltf\+json)|(model\/gltf-binary)$/,f=/\.(gltf|glb)/i;function m(t){if(t instanceof File){const{type:r,name:s}=t;return l.test(r)||f.test(s)}return l.test(t.assetMimeType)||f.test(t.assetName)}function h(t,r){if(!t)return!1;const{source:s}=t;return function g(t,r){if(Array.isArray(t)){const s=t;return s.length>0&&s.every((t=>b(t,r)))}return b(t,r)}(s,r)}function y(t,r){if(t===r)return!0;const{source:s}=t,{source:e}=r;if(s===e)return!0;if(c(s)&&c(e)){if(s.length!==e.length)return!1;const t2=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,t=[...s].sort(t2),r=[...e].sort(t2);for(let s=0;s<t.length;++s)if(!t[s].equals(r[s]))return!1;return!0}return!1}function b(t,r){return t instanceof i&&t.isOnService(r)}function N(t,r){return t instanceof File?e(t,r):n(t.assetMimeType,r)??a(t.assetName,r)}function A(t){return Array.isArray(t)?t:[t]}function v(t){return!!t.original}export{A,N,h,i,o,u,v,y};
