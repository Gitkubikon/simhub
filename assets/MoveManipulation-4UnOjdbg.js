import{e as i,y as s,a as r,S as o,oI as l,ak as c,dJ as h,oJ as d,oi as p,oK as _,n0 as M,ke as v,bc as x,u as T,a0 as E,cU as D,oL as P,oM as z,e9 as I,O as X,e3 as F,mZ as Y,oN as U,oO as N,ch as B,mY as H,bM as Z,m_ as G,e7 as q,lf as $,g as k,P as V,bV as J,ds as Q,oP as K,hS as tt,lp as et,oQ as at,oR as it,oS as st,oT as nt,cx as rt,N as ot,dB as lt,L as ct,dC as ht,oU as ut,Q as dt,aM as pt,m as _t,p as gt}from"./index-DSIPxOWi.js";import{e as ft,f as Mt,g as mt,p as wt,M as vt,m as yt,j as At,c as xt,w as St,d as Tt}from"./ShadedColorMaterial.glsl-C-XXTK_B.js";import{D as Ot,G as Et}from"./dragEventPipeline3D-C-8mYpU2.js";import{M as bt}from"./ExtendedLineVisualElement-C_fk7Jva.js";var Ct,Dt;(Dt=Ct||(Ct={}))[Dt.TRANSLATE_Z=0]="TRANSLATE_Z",Dt[Dt.TRANSLATE_XY=1]="TRANSLATE_XY",Dt[Dt.SCALE=2]="SCALE",Dt[Dt.ROTATE=3]="ROTATE",Dt[Dt.SCALE_ROTATE=4]="SCALE_ROTATE";let Pt=class t{constructor(){this._available=!0}set location(i){this._forEachManipulator3D((s=>s.location=i))}set elevationAlignedLocation(i){this._forEachManipulator3D((s=>s.elevationAlignedLocation=i))}set elevationInfo(i){this._forEachManipulator3D((s=>s.elevationInfo=i))}get renderLocation(){let i;return this._forEachManipulator3D((s=>{i||(i=s.renderLocation)})),i}get available(){return this._available}set available(i){this._available=i,this._forEachManipulator3D((s=>s.available=i))}get hovering(){return this.someManipulator((i=>i.hovering))}get grabbing(){return this.someManipulator((i=>i.grabbing))}get dragging(){return this.someManipulator((i=>i.dragging))}get selected(){return this.someManipulator((i=>i.selected))}hasManipulator(i){return this.someManipulator((s=>s===i))}someManipulator(i){let s=!1;return this.forEachManipulator((r=>{!s&&i(r)&&(s=!0)})),s}_forEachManipulator3D(i){this.forEachManipulator(((s,r)=>{s instanceof ft&&i(s,r)}))}};const Rt=.3;function u$2(i,s){s&&Object.assign(i,s)}let zt=class g{constructor(i){this.height=90,this.coneHeight=40,this.coneWidth=23,this.width=3,this.renderOccluded=h.Opaque,this.color=i.accent}},Lt=class f{constructor({colors:i,...s}){this.size=11,this.outlineSize=1,this.collisionPadding=9,this.color=i.accent,this.outlineColor=i.outline,this.renderOccluded=h.Opaque,this.hoverOutlineColor=i.selectedOutline,u$2(this,s)}applyColor(i){this._apply(this.color,i)}applyOutline(i){this._apply(this.outlineColor,i)}applyHoverOutline(i){this._apply(this.hoverOutlineColor,i)}_apply(i,s){s.setParameters({color:_(i),renderOccluded:this.renderOccluded})}};class w{constructor({colors:i,...s}){this.size=40,this.height=.2,this.offset=.25,this.collisionPadding=2,this.renderOccluded=h.Transparent,this.minSquaredEdgeLength=900,this.color=p(i.accent,.5),this.hoverColor=i.accent,u$2(this,s)}applyColor(i){this._apply(this.color,i)}applyHover(i){this._apply(this.hoverColor,i)}_apply(i,s){s.setParameters({color:_(i),renderOccluded:this.renderOccluded})}}let It=class C{constructor(i){this.vertex=new Lt({colors:i,color:i.accent,outlineColor:i.outline}),this.edge=new Lt({colors:i,color:d(p(i.accent,2/3),.5),outlineColor:p(i.outline,.5),size:8,collisionPadding:8}),this.selected=new Lt({colors:i,color:i.selected,outlineColor:i.outline}),this.edgeOffset=new w({colors:i})}},jt=class m{constructor({colors:i,...s}){this.width=1.5,this.stipplePattern=M(3.3),this.falloff=0,this.innerWidth=1.5,this.renderOccluded=h.OccludeAndTransparent,this.color=i.selected,this.stippleOffColor=i.outline,this.innerColor=i.selected,u$2(this,s)}apply(i){i.color=_(this.color),i.width=this.width,i.stipplePattern=this.stipplePattern,i.stippleOffColor=_(this.stippleOffColor),i.falloff=this.falloff,i.innerWidth=this.innerWidth,i.innerColor=_(this.innerColor),i.renderOccluded=this.renderOccluded}},Xt=class O{constructor({colors:i,...s}){this.size=4,this.outlineSize=1,this.shape="square",this.color=i.selected,this.outlineColor=i.outline,u$2(this,s)}apply(i){i.color=_(this.color),i.size=this.size,i.outlineSize=this.outlineSize,i.outlineColor=_(this.outlineColor),i.primitive=this.shape}};class y{constructor({colors:i,...s}){this.innerWidth=1,this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=Rt,this.globalAlphaContrastBoost=1.5,this.radius=3,this.innerColor=i.selected,this.glowColor=i.accent,this.heightFillColor=i.accent,u$2(this,s)}apply(i,s=1){const r={glowColor:c.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:c.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*s*this.glowColor.a,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in i?i.style=r:i.laserlineStyle=r}}class A{constructor(i){this.outline=new jt({colors:i,color:i.stippleOff,renderOccluded:h.OccludeAndTransparentStencil,stippleOffColor:i.stippleOn,innerWidth:0}),this.staged=new jt({colors:i,color:i.stippleOn,renderOccluded:h.OccludeAndTransparentStencil,innerColor:i.stagedSolid,stippleOffColor:i.stippleOff}),this.shadowStyle=new y({colors:i,globalAlpha:Rt,glowColor:i.accent,glowFalloff:8,glowWidth:8,innerColor:i.selected,innerWidth:1})}}class W{constructor(i){this.outline=new Xt({colors:i,color:i.selected,outlineColor:i.outline,outlineSize:1,shape:"circle",size:4}),this.shadowStyle=new y({colors:i,globalAlpha:Rt,glowColor:i.accent,glowFalloff:1.5,glowWidth:6,innerColor:i.selected,innerWidth:1,radius:2})}}let Ft=class b extends jt{constructor({colors:i,...s}){super({colors:i}),this.extensionType=bt.GROUND_RAY,u$2(this,s)}},Yt=class S{constructor(i){this.laserlineAlphaMultiplier=1.5,this.heightPlaneAngleCutoff=20,this.lineObjects=new A(i),this.pointObjects=new W(i),this.heightPlane=new y({colors:i,globalAlpha:Rt,glowColor:i.accent,glowFalloff:8,glowWidth:8,innerColor:i.selected,innerWidth:1}),this.heightBox=new y({colors:i,globalAlpha:Rt,glowColor:i.accent,glowFalloff:8,glowWidth:8,innerColor:i.selected,innerWidth:0,heightFillColor:i.accent}),this.zVerticalLine=new Ft({colors:i,color:p(i.accent,.5),falloff:2,innerColor:p(i.selected,0),renderOccluded:h.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:bt.GROUND_RAY})}},Wt=class j extends o{constructor(i){super(i)}get colors(){const i=this.getTheme().accentColor,s=i.a;return{accent:i,contrast:l(i),selected:c.fromArray([255,255,255,s]),selectedOutline:c.fromArray([255,255,255,s]),staged:c.fromArray([12,207,255,s]),stagedSolid:c.fromArray([12,207,255,1]),outline:c.fromArray([0,0,0,.5*s]),stippleOn:c.fromArray([255,255,255,1]),stippleOff:c.fromArray([0,0,0,.5])}}get visualElements(){return new Yt(this.colors)}get manipulators(){return new It(this.colors)}get zManipulator(){return new zt(this.colors)}};i([s()],Wt.prototype,"colors",null),i([s()],Wt.prototype,"visualElements",null),i([s()],Wt.prototype,"manipulators",null),i([s()],Wt.prototype,"zManipulator",null),i([s()],Wt.prototype,"getTheme",void 0),Wt=i([r("esri.views.3d.interactive.editingTools.settings")],Wt);const Ut=128,Nt=70,Bt=Math.ceil(Nt/3*2),Ht=160,Zt=.5,Gt=24,qt=9,$t=190,kt=213,Vt=60,Jt=23,Qt=5*Math.PI/12,Kt=1*Math.PI/3,te=10,ee=.2,ae=30,ie=53,se=.2,ne=.3,re=200,oe=3,le=1e6;function n(i,s,r){const c2=(r,o)=>{s({action:r,object:i,dxScreen:o.screenDeltaX,dyScreen:o.screenDeltaY})};return r(((s,r,o)=>(r.next((i=>("start"===i.action&&c2("start",i),i))).next(Mt(i)).next((i=>{switch(i.action){case"start":case"update":(i.translationX||i.translationY||i.translationZ)&&c2("update",i);break;case"end":c2("end",i)}return i})),{steps:r,cancel:o=o.next(mt(i)).next((i=>(c2("end",{screenDeltaX:0,screenDeltaY:0}),i)))})))}function a(i){if(null==(null==i?void 0:i.axis))return 1;const{mapStart:s,mapEnd:r,axis:o}=i,l=[r.x-s.x,r.y-s.y];return l[0]*o[0]+l[1]*o[1]>0?1:-1}let ce=class C2 extends Pt{constructor(i){super(),this._handles=new v,this._arrowManipulatorInfos=new Array,this._angle=0,this._scale=1,this._radius=Nt,this._updateAfterDrag=!1,this.events=new x,this._tool=i.tool,this._view=i.view,this._opaqueMaterial=this._createMaterial(),this._transparentMaterial=this._createMaterial(.5),null!=i.radius&&(this._radius=i.radius),this._createManipulators(),this.forEachManipulator((i=>this._tool.manipulators.add(i)))}set orthogonalAvailable(i){this._arrowManipulatorInfos.length>=3&&(this._arrowManipulatorInfos[1].manipulator.available=i,this._arrowManipulatorInfos[3].manipulator.available=i)}destroy(){this._handles=T(this._handles),this.forEachManipulator((i=>{this._tool.manipulators.remove(i),i.destroy()})),this._tool=null,this._view=null,this._arrowManipulatorInfos.length=0}forEachManipulator(i){for(const{manipulator:s}of this._arrowManipulatorInfos)i(s,Ct.TRANSLATE_XY)}createManipulatedObjectDragPipeline(i,s,r){if(!s.operations)return E();const o=s.operations.data.spatialReference,l=s.graphic;return n(s,r,(r=>this.createDragPipeline(((s,o,l,c,h)=>(({steps:o,cancel:l}=i(s,o,l,c,h)),r(s,o,l))),s.elevationInfo,o,l)))}createDragPipeline(i,s,r,o){return D(this._arrowManipulatorInfos.map((({manipulator:l},c)=>wt(l,((l,h,d,p,_)=>{const M=h.next((i=>({...i,manipulatorType:Ct.TRANSLATE_XY}))).next(vt(this._view,l.elevationAlignedLocation)).next(Ot(this._view,l.elevationAlignedLocation,s,r,o)).next(yt(l.location,this.angle+(c+1)*Math.PI*.5)).next(At());i(l,M,d,p,_)})))))}get angle(){return this._angle}set angle(i){this._angle=i,this.dragging?this._updateAfterDrag=!0:this._updateManipulatorTransform()}get displayScale(){return this._scale}set displayScale(i){this._scale=i,this._updateManipulatorTransform()}get radius(){return this._radius}set radius(i){this._radius!==i&&(this._radius=i,this._updateManipulators())}_updateManipulators(){for(let i=0;i<this._arrowManipulatorInfos.length;i++)this._updateArrowManipulator(this._arrowManipulatorInfos[i],i);this._updateManipulatorTransform()}_updateArrowManipulator({manipulator:i,transform:s},r){const o=this._radius/Nt,l=54*o,c=l*Math.sqrt(3)/2,h=P(this._opaqueMaterial,c,l/2,l/2,.02);z(h,I(Y.get(),X(F.get(),0,-c/3,0))),i.renderObjects=[new xt(h,U.Focused),new xt(h.instantiate({material:this._transparentMaterial}),U.Unfocused)],i.radius=c/3*2*1.2;const d=N(Y.get(),r*Math.PI/2),p=I(Y.get(),X(F.get(),0,100*o,0));B(s,d,p)}_createManipulators(){for(let i=0;i<4;i++){const s=this._createArrowManipulator(i);this._arrowManipulatorInfos.push(s)}this._updateManipulatorTransform()}_updateManipulatorTransform(){const i=this.angle,s=H(Y.get(),i,Z(0,0,1));if(null==s)return;const r=G(Y.get(),X(F.get(),this.displayScale,this.displayScale,this.displayScale)),o=B(Y.get(),r,s);for(const l of this._arrowManipulatorInfos){const i=B(Y.get(),o,l.transform);l.manipulator.modelTransform=i}}_createArrowManipulator(i){const s=new ft({view:this._view,autoScaleRenderObjects:!1,worldOriented:!0,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:Z(0,0,1)}}),r={manipulator:s,transform:J()};return this._updateArrowManipulator(r,i),this._handles.add(s.events.on("drag",(i=>{this._updateAfterDrag&&"end"===i.action&&!this.dragging&&(this._updateManipulatorTransform(),this._updateAfterDrag=!1)}))),r}_createMaterial(i=1){const s=new q({cullFace:$.Back,renderOccluded:h.Transparent,isDecoration:!0});return this._handles.add(k((()=>c.toUnitRGBA(this._view.effectiveTheme.accentColor)),(r=>{r[3]*=i,s.setParameters({color:r})}),V)),s}get test(){}};class e{constructor(){this._view=null,this._elevationInfo=null,this._lastDragEvent=null,this._next=null,this._enabled=!1}get enabled(){return this._enabled}set enabled(i){if(this._enabled!==i&&null!=this._lastDragEvent&&null!=this._next){const s=this._lastDragEvent.mapEnd,r=this._snap(this._lastDragEvent.screenEnd);if(null!=r){const o={action:"update",mapStart:this._lastDragEvent.mapStart,mapEnd:!0===i?r:s,screenStart:this._lastDragEvent.screenEnd,screenEnd:this._lastDragEvent.screenEnd};this._next.execute(o)}}this._enabled=i}_snap(i){const s=null!=this._view?this._view.toMap(i,{exclude:[]}):null;return null!=s&&null!=this._view&&(s.z=Q(s,this._view,this._elevationInfo)),s}createDragEventPipelineStep(i,s){this._view=i,this._elevationInfo=s,this._lastDragEvent=null;const r=new St;return this._next=r,[i=>{if(this._lastDragEvent="end"!==i.action?{...i}:null,this._enabled){const s=this._snap(i.screenEnd);return null!=s?{action:i.action,mapStart:i.mapStart,mapEnd:s,screenStart:i.screenStart,screenEnd:i.screenEnd}:null}return{action:i.action,mapStart:i.mapStart,mapEnd:i.mapEnd,screenStart:i.screenStart,screenEnd:i.screenEnd}},r]}}class O2 extends Pt{constructor(i){super(),this._handles=new v,this._snapToScene=new e,this._scale=1,this._radius=Nt,this._view=i.view,this._tool=i.tool,this._discMaterial=this._createMaterial(),this._discMaterialTransparent=this._createMaterial(.5),null!=i.snapToScene&&(this.snapToScene=i.snapToScene),null!=i.radius&&(this._radius=i.radius),this._createManipulator(),this.forEachManipulator((i=>this._tool.manipulators.add(i)))}destroy(){this._handles=T(this._handles),this.forEachManipulator((i=>{this._tool.manipulators.remove(i),i.destroy()})),this._tool=null,this._view=null,this._manipulator=null}forEachManipulator(i){i(this._manipulator,Ct.TRANSLATE_XY)}get displayScale(){return this._scale}set displayScale(i){this._scale=i,this._updateManipulatorTransform()}get snapToScene(){return this._snapToScene.enabled}set snapToScene(i){this._snapToScene.enabled=i}get radius(){return this._radius}set radius(i){i!==this._radius&&(this._radius=i,this._updateManipulator())}get discManipulator(){return this._manipulator}createManipulatedObjectDragPipeline(i,s,r){if(!s.operations)return E();const o=s.graphic,l=s.elevationInfo,c=s.operations.data.spatialReference;return n(s,r,(s=>this.createDragPipeline(((r,o,l,c,h)=>(({steps:o,cancel:l}=i(r,o,l,c,h)),s(r,o,l))),l,c,o)))}createDragPipeline(i,s,r,o){const l=this._view;return wt(this._manipulator,((c,h,d,p,_)=>{const M=h.next(vt(l,c.elevationAlignedLocation)).next(Ot(l,c.elevationAlignedLocation,s,r,o)).next(...this._snapToScene.createDragEventPipelineStep(l,s)).next((i=>({...i,manipulatorType:Ct.TRANSLATE_XY}))).next(At());i(c,M,d,p,_)}))}_updateManipulatorTransform(){const i=G(Y.get(),X(F.get(),this.displayScale,this.displayScale,this.displayScale));this._manipulator.modelTransform=i}_createManipulator(){const i=this._view;this._manipulator=new ft({view:i,worldSized:!1,autoScaleRenderObjects:!1,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:Z(0,0,1)},worldOriented:!0}),this._updateManipulator()}_updateManipulator(){const i=K(this._discMaterial,.02,1,128,Z(0,0,1),Z(0,0,0));i.transformation=G(J(),Z(this._radius,this._radius,this._radius)),this._manipulator.renderObjects=[new xt(i,U.Focused),new xt(i.instantiate({material:this._discMaterialTransparent}),U.Unfocused)],this._manipulator.radius=this._radius/Nt*80}_createMaterial(i=1){const s=new q({cullFace:$.Back,renderOccluded:h.Transparent,isDecoration:!0});return this._handles.add(k((()=>c.toUnitRGBA(this._view.effectiveTheme.accentColor)),(r=>{r[3]*=i,s.setParameters({color:r})}),V)),s}get test(){}}class R extends Pt{constructor(i){super(),this._radius=Nt,this.events=new x,this._tool=i.tool,this._view=i.view;const s=new Wt({getTheme:()=>this._view.effectiveTheme});this._settings=s,null!=i.radius&&(this._radius=i.radius);const r=this._view.effectiveTheme.accentColor;this._materials={materialUnfocused:Tt(C3(r,1,.25),h.Occlude),materialFocused:Tt(C3(r,1,0),h.Occlude),materialOccludedUnfocused:Tt(C3(r,.7,0),s.zManipulator.renderOccluded),materialOccludedFocused:Tt(C3(r,.85,0),s.zManipulator.renderOccluded)},this._themeHandle=k((()=>this._view.effectiveTheme.accentColor),(i=>{const s=C3(i,1,.25),r=C3(i,1,0),o=C3(i,.7,0),l=C3(i,.85,0),{materialUnfocused:c,materialFocused:h,materialOccludedUnfocused:d,materialOccludedFocused:p}=this._materials;c.setParameters({color:s}),h.setParameters({color:r}),d.setParameters({color:o}),p.setParameters({color:l})})),this._createManipulator(),this.forEachManipulator((i=>this._tool.manipulators.add(i)))}destroy(){this._themeHandle=tt(this._themeHandle),this._manipulator.applyObjectTransform=L,this.forEachManipulator((i=>{this._tool.manipulators.remove(i),i.destroy()}))}forEachManipulator(i){i(this._manipulator,Ct.TRANSLATE_Z)}createManipulatedObjectDragPipeline(i,s,r){if(!s.operations)return E();const o=s.operations.data.spatialReference;return n(s,r,(s=>this.createDragPipeline(((r,o,l,c,h)=>(({steps:o,cancel:l}=i(r,o,l,c,h)),s(r,o,l))),o)))}createDragPipeline(i,s){const r=this._view;return wt(this._manipulator,((o,l,c,h,d)=>{const p=l.next((i=>({...i,manipulatorType:Ct.TRANSLATE_Z}))).next(Et(r,o.renderLocation,s)).next(At());i(o,p,c,h,d)}))}get radius(){return this._radius}set radius(i){i!==this._radius&&(this._radius=i,this._updateManipulator())}_updateManipulator(){const i=this._settings,s=this._radius/Nt,r=i.zManipulator.height*s,o=i.zManipulator.coneHeight*s,l=i.zManipulator.coneWidth*s,c=i.zManipulator.width*s,h=[Z(0,0,0),Z(0,0,r)],d=[Z(0,0,0),Z(0,0,r+o)],p=(i=>{const s=J();return et(s,s,[0,0,r]),at(s,s,Math.PI/2),s})(),{materialUnfocused:_,materialFocused:M,materialOccludedUnfocused:v,materialOccludedFocused:x}=this._materials,T=it(_,h,c/2,16,!1),E=st(_,o,l/2,16,!1);E.transformation=p,this._manipulator.renderObjects=[new xt(E,U.Unfocused),new xt(T,U.Unfocused),new xt(E.instantiate({material:M}),U.Focused),new xt(T.instantiate({material:M}),U.Focused),new xt(E.instantiate({material:v}),U.Unfocused),new xt(T.instantiate({material:v}),U.Unfocused),new xt(E.instantiate({material:x}),U.Focused),new xt(T.instantiate({material:x}),U.Focused)],this._manipulator.radius=c/2+2,this._manipulator.collisionType={type:"line",paths:[d]}}_createManipulator(){const i=this._view,s=new ft({view:i,autoScaleRenderObjects:!1,worldSized:!1,selectable:!1,cursor:"ns-resize",elevationInfo:this.elevationInfo,worldOriented:!0,collisionPriority:1.6});s.applyObjectTransform=s=>{const r=i.state.camera,o=he;i.renderCoordsHelper.toRenderCoords(this._manipulator.elevationAlignedLocation,o);const l=nt(r.eye,o),c=r.computeRenderPixelSizeAtDist(l),h=rt(ue,o,r.eye);ot(h,h);const d=de;i.renderCoordsHelper.worldUpAtPosition(he,d);const p=Math.abs(lt(h,d)),_=ct(ue,h,d),M=ct(ue,_,d),v=pt(p,.01,1),x=1-Math.sqrt(1-v*v)/v/r.fullWidth,T=this._settings,E=this._radius/Nt,D=T.zManipulator.width*E;ht(M,ot(M,M),(1/x-1)*l+c*D),s[12]-=ue[0],s[13]-=ue[1],s[14]-=ue[2]},this._manipulator=s,this._updateManipulator()}get test(){}}function C3(i,s,r){const o=ut(i,r);return o.a*=s,c.toUnitRGBA(o)}const he=dt(),ue=dt(),de=dt(),L=()=>{};class u extends Pt{constructor(i){super(),this._handles=new v,this._interactive=!0;const{tool:s,view:r,snapToScene:o,radius:l}=i;this._view=r,this.xyManipulation=new O2({tool:s,view:r,snapToScene:o,radius:l}),this.xyAxisManipulation=new ce({tool:s,view:r,radius:l}),this.zManipulation=new R({tool:s,view:r,radius:l}),this.xyManipulation.available=i.xyAvailable,this.xyAxisManipulation.available=i.xyAxisAvailable,this.zManipulation.available=i.zAvailable,this._autoHideXYAxis(),this.forEachManipulator((i=>this._handles.add(i.events.on("grab-changed",(()=>this._updateManipulatorInteractivity())))))}destroy(){this._handles.destroy(),this.xyManipulation.destroy(),this.xyAxisManipulation.destroy(),this.zManipulation.destroy()}createManipulatedObjectDragPipeline(i,s,r){return D([this.xyManipulation.createManipulatedObjectDragPipeline(((s,r,o,l,c)=>i(_e.XY,s,r,o,l,c)),s,r),this.xyAxisManipulation.createManipulatedObjectDragPipeline(((s,r,o,l,c)=>i(_e.XY_AXIS,s,r,o,l,c)),s,r),this.zManipulation.createManipulatedObjectDragPipeline(((s,r,o,l,c)=>i(_e.Z,s,r,o,l,c)),s,r)])}createDragPipeline(i,s,r,o){return D([this.xyManipulation.createDragPipeline(((s,r,o,l,c)=>i(_e.XY,s,r,o,l,c)),s,r,o),this.xyAxisManipulation.createDragPipeline(((s,r,o,l,c)=>i(_e.XY_AXIS,s,r,o,l,c)),s,r,o),this.zManipulation.createDragPipeline(((s,r,o,l,c)=>i(_e.Z,s,r,o,l,c)),r)])}set snapToScene(i){this.xyManipulation.snapToScene=i}set angle(i){this.xyAxisManipulation.angle=i}set interactive(i){this._interactive!==i&&(this._interactive=i,this._updateManipulatorInteractivity())}set radius(i){this.xyAxisManipulation.radius=i,this.xyManipulation.radius=i,this.zManipulation.radius=i}set displayScale(i){this.xyManipulation.displayScale=i,this.xyAxisManipulation.displayScale=i}forEachManipulator(i){this.xyManipulation.forEachManipulator((s=>i(s,Ct.TRANSLATE_XY))),this.xyAxisManipulation.forEachManipulator((s=>i(s,Ct.TRANSLATE_XY))),this.zManipulation.forEachManipulator((s=>i(s,Ct.TRANSLATE_Z)))}get _xyAxisVisible(){const i=this.xyManipulation.someManipulator((i=>i.focused))||this.xyAxisManipulation.someManipulator((i=>i.focused));return this._view.inputManager&&"touch"===this._view.inputManager.latestPointerType||i}_autoHideXYAxis(){const i=this.xyAxisManipulation,s=this.xyManipulation;if(_t("esri-mobile"))return;const r=[];s.forEachManipulator((i=>r.push(i))),i.forEachManipulator((i=>r.push(i)));const e2=()=>{const s=[];this._xyAxisVisible||i.forEachManipulator((i=>s.push(i.disableDisplay()))),this._handles.remove(pe),this._handles.add(s,pe)};for(const o of r)this._handles.add(o.events.on("focus-changed",e2));this._view.inputManager&&this._handles.add(gt((()=>{var i;return null==(i=this._view.inputManager)?void 0:i.latestPointerType}),e2)),e2()}_updateManipulatorInteractivity(){const i=this.grabbing;this.forEachManipulator((s=>{s.interactive=!i&&this._interactive||s.grabbing}))}static radiusForSymbol(i){const s=null!=i&&"point-3d"===i.type&&i.symbolLayers;return s&&s.some((i=>"icon"===i.type))?Bt:Nt}}const pe="disable-xy-axis-display";var _e,ge;(ge=_e||(_e={}))[ge.XY=0]="XY",ge[ge.XY_AXIS=1]="XY_AXIS",ge[ge.Z=2]="Z";export{Ct as A,Ht as I,Zt as P,Nt as a,a as b,_e as c,$t as d,ie as e,ee as f,ae as g,te as h,Gt as i,Wt as j,se as k,qt as l,ne as m,n,Bt as o,kt as p,re as q,Ut as r,Jt as s,Pt as t,u,Vt as v,oe as w,Qt as x,Kt as y,le as z};
