import{L as e,Q as t,du as s,ge as a,ak as r,e as o,y as h,a as u,S as p,dJ as v,g as m,pO as _,P as f,u as g,mY as V,cy as y,O as M,gi as S,pP as T,N as C,dC as E,pQ as H,bO as A,cd as F,dD as z,n0 as x,ee as k,bV as $,pR as j,lc as I,aw as N,bM as W,bK as K,g1 as q,ku as Q,gH as J,aO as X,hT as Y,ke as Z,cU as ee,oN as te,pS as ie,pT as se,m_ as ae,oO as ne,e9 as re,dO as oe,dQ as le,pU as de,ch as he,mX as ce,aM as ue,oR as pe,pV as ve,e7 as me,lf as we,oL as _e,e6 as fe,p3 as ge,pW as Ve,ol as be,A as ye,cD as Me,pX as De,d8 as Oe,dB as Se,pY as Te,dx as Ce,i as Ee,pZ as He,dz as Re,p_ as Ae,z as Pe,p$ as Fe}from"./index-DSIPxOWi.js";import{s as ze}from"./AnalysisView3D-CNsY6W7Z.js";import{distance as xe}from"./geometryEngine-Bp1TD6MM.js";import{O as Le,a as ke,p as Ue,c as $e,e as je,M as Ie,d as Be,h as Ne,f as Ge}from"./ShadedColorMaterial.glsl-C-XXTK_B.js";import{O as We,k as Ke}from"./dragEventPipeline3D-C-8mYpU2.js";import{f as qe}from"./LineVisualElement-EjMrPPob.js";import{b as Qe,s as Je}from"./sliceToolConfig-Doq59PhP.js";import{t as Xe,A as Ye,j as Ze,u as et,o as tt}from"./MoveManipulation-4UnOjdbg.js";import{G as it}from"./ExtendedLineVisualElement-C_fk7Jva.js";import{c as st}from"./Laserlines.glsl-C_dc6leb.js";import{E as at}from"./EditGeometryOperations-sseMUvB1.js";import{o as nt,a as rt,v as ot,l as lt}from"./analysisViewUtils-9rYF9O9W.js";import{p as dt}from"./keybindings-DkkJsHdp.js";import{t as ht}from"./ToolIntersector-ChuFIaMQ.js";import"./geometryEngineBase-9EI9fooq.js";import"./hydrated-DE1HcVsK.js";import"./vec4f32-APunXZaC.js";import"./EngineVisualElement-Cxk2Aaf7.js";import"./geometry2dUtils-4c9qUvJ6.js";function b$1({tiltedUpVector:e,rightVector:t,observerRenderSpace:s},a){const r=Le(e,t,s,a);return r[12]=0,r[13]=0,r[14]=0,r}function d(r,o,h){const u=t(),p=e(t(),h.basis1,h.basis2);return r.next(We(o,h.plane)).next((e=>{"start"===e.action&&s(u,e.renderStart);const t=a(ke(u,e.renderEnd,h.origin,p));return{...e,deltaAngle:t}}))}function x$4(e,t){if(null==e)return 0;const{observer:s,target:a}=e,r=t.camera.position,o=xe(r,s)>xe(r,a)?s:a;return t.pixelSizeAt(o)}const ct=new r([85,85,85,.5]);let ut=class O extends p{constructor(e){super(e),this.visible=!0,this._viewshedCorners={topLeft:t(),topRight:t(),bottomLeft:t(),bottomRight:t(),center:t()},this._arcCenterPoints={top:t(),bottom:t(),left:t(),right:t()},this._parallelCenters={top:t(),bottom:t()}}initialize(){const e={view:this.view,isDecoration:!0,color:this._color,renderOccluded:v.OccludeAndTransparent},t={...e,width:2,stipplePattern:x(2)};this._boundaryLinesVisualElement=new qe(e),this._leftArcVisualElement=new qe(e),this._rightArcVisualElement=new qe(e),this._topArcVisualElement=new qe(e),this._bottomArcVisualElement=new qe(e),this._centralLongitude=new qe(t),this._centralLatitude=new qe(t),this.addHandles([m((()=>{const e=this.viewshedComputedData;if(!(null==e?void 0:e.isValid()))return null;const t=this._offsetScale,s=this._viewshedCorners,a=this._arcCenterPoints,r=this._parallelCenters;return e.cornerPoints(t,s),e.arcCentersPoints(t,a),e.parallelCenterPoints(r),{viewshedComputedData:e,corners:s,arcCenters:a,parallelCenters:r}}),(e=>{null!=e?(this._forEachVisualElement((e=>e.attached=!0)),this._updateVisualElements(e)):this._forEachVisualElement((e=>e.attached=!1))}),{initial:!0,equals:_}),m((()=>{var e;return{visible:this.visible,horFOV:null==(e=this.viewshedComputedData)?void 0:e.horizontalFieldOfView}}),(({visible:e,horFOV:t},s)=>{e!==(null==s?void 0:s.visible)&&this._forEachVisualElement((t=>t.visible=e)),e&&t!==(null==s?void 0:s.horFOV)&&(this._boundaryLinesVisualElement.visible=360!==t)}),f),m((()=>this._color),(e=>this._forEachVisualElement((t=>t.color=e))),f)])}get _color(){var e,t;const s=this.viewshedComputedData;if(null==s)return r.toUnitRGBA(ct);const a=this.analysisViewData,o=(null==(e=a.tool)?void 0:e.active)||a.interactive,h=s===a.selectedViewshedComputedData,u=s.viewshed===(null==(t=a.tool)?void 0:t.stagedViewshed),p=o&&(h||u)?this.view.effectiveTheme.accentColor:ct;return r.toUnitRGBA(p)}get _offsetScale(){return x$4(this.viewshedComputedData,this.view)}destroy(){this._boundaryLinesVisualElement=g(this._boundaryLinesVisualElement),this._leftArcVisualElement=g(this._leftArcVisualElement),this._rightArcVisualElement=g(this._rightArcVisualElement),this._topArcVisualElement=g(this._topArcVisualElement),this._bottomArcVisualElement=g(this._bottomArcVisualElement),this._centralLongitude=g(this._centralLongitude),this._centralLatitude=g(this._centralLatitude)}_forEachVisualElement(e){[this._boundaryLinesVisualElement,this._leftArcVisualElement,this._rightArcVisualElement,this._topArcVisualElement,this._bottomArcVisualElement,this._centralLatitude,this._centralLongitude].forEach(e)}_updateVisualElements(e){const{viewshedComputedData:t,corners:s,arcCenters:a,parallelCenters:r}=e;this._updateBoundaryLines(s),this._updateBoundaryArcs(t,s,r),this._updateCentralHelperArcs(t,a)}_updateBoundaryLines(e){this._boundaryLinesVisualElement.geometry=[[e.center,e.topLeft],[e.center,e.topRight],[e.center,e.bottomLeft],[e.center,e.bottomRight]]}_updateBoundaryArcs(e,s,a){const{observerRenderSpace:r,rightVector:o,horizontalFieldOfView:h,tiltedUpVector:u}=e,p=k(h),v=t(),m=$();V(m,p/2,u),y(v,o,m),S$3(this._leftArcVisualElement,r,s.bottomLeft,s.topLeft,"forward",v),V(m,-p/2,u),M(v,0,0,0),y(v,o,m),S$3(this._rightArcVisualElement,r,s.bottomRight,s.topRight,"forward",v);const _=h>180?"backward":"forward";S$3(this._topArcVisualElement,a.top,s.topRight,s.topLeft,_,u),S$3(this._bottomArcVisualElement,a.bottom,s.bottomRight,s.bottomLeft,_,u)}_updateCentralHelperArcs(e,t){const s=e.observerRenderSpace,a=e.horizontalFieldOfView>=180?"backward":"forward";S$3(this._centralLatitude,s,t.right,t.left,a,e.tiltedUpVector),S$3(this._centralLongitude,s,t.top,t.bottom,"forward",e.leftVector)}};function S$3(e,a,r,o,h,u,p=5){const v=t();S(v,r,a);const m=T(v),_=t();S(_,o,a),C(_,_),E(_,_,m);let f=H(v,_);const g=A(u);"backward"===h&&(F(g,g),f=-(2*Math.PI-f));const M=[],x=Math.ceil(Math.abs(f)/k(p)),j=$();V(j,f/x,g);const I=t();s(I,v);const N=t();s(N,r);for(let V=0;V<x;V++){const e=t();s(e,N),y(I,I,j),z(N,a,I);const r=t();s(r,N),M.push([e,r])}e.geometry=M}o([h()],ut.prototype,"view",void 0),o([h()],ut.prototype,"analysisViewData",void 0),o([h()],ut.prototype,"viewshedComputedData",void 0),o([h()],ut.prototype,"visible",void 0),o([h()],ut.prototype,"_color",null),o([h()],ut.prototype,"_offsetScale",null),ut=o([u("esri.views.3d.analysis.Viewshed.ViewshedVisualization")],ut);const pt=ut;let vt=class n extends p{get visible(){return this.analysisViewData.visible}constructor(e){super(e)}initialize(){const e=this.analysisViewData,t=j((()=>this.analysisViewData.viewshedComputedDataHandles),(({viewshedComputedData:t})=>{const s=new pt({view:this.view,viewshedComputedData:t,analysisViewData:e});return{visualization:s,remove:()=>s.destroy()}}));this._viewshedVisualizations=t,this.addHandles([I(t),m((()=>this.visible),(e=>this._viewshedVisualizations.forEach((({visualization:t})=>t.visible=e))))])}};var mt;o([h({constructOnly:!0})],vt.prototype,"analysisViewData",void 0),o([h({constructOnly:!0,nonNullable:!0})],vt.prototype,"view",void 0),o([h({constructOnly:!0})],vt.prototype,"isDecoration",void 0),o([h()],vt.prototype,"visible",null),vt=o([u("esri.views.3d.analysis.Viewshed.ViewshedAnalysisVisualization")],vt);let wt=mt=class extends p{constructor(e){super(e)}get observer(){return this.viewshed.observer??new N}get farDistance(){return this.viewshed.farDistance}get farDistanceRenderSpace(){return this.farDistance/this.metersPerUnit}get heading(){return this.viewshed.heading}get tilt(){return this.viewshed.tilt}get tiltParallelToSurface(){return this.tilt-90}get horizontalFieldOfView(){return this.viewshed.horizontalFieldOfView}get verticalFieldOfView(){return this.viewshed.verticalFieldOfView}get observerRenderSpace(){return this._pointToRenderSpace(this.observer,t())}get target(){const e=this.targetRenderSpace;return this.renderSpaceToPoint(e,this.observer.spatialReference)}get targetRenderSpace(){const{leftVector:e,northVector:s,upVector:a}=this,r=this.observerRenderSpace,o=this.farDistanceRenderSpace,h=t();return E(h,s,o),w(h,-k(this.heading),a,h),w(h,-k(this.tiltParallelToSurface),e,h),z(h,r,h),h}get targetDirection(){const e=S(t(),this.targetRenderSpace,this.observerRenderSpace);return C(e,e)}get tiltedUpVector(){const e=w(this.upVector,-k(this.tiltParallelToSurface),this.leftVector,t());return C(e,e)}get _basis(){return this.renderCoordsHelper.basisMatrixAtPosition(this.observerRenderSpace,$())}get upVector(){const e=this._basis;return W(e[8],e[9],e[10])}get northVector(){const e=this._basis;return W(e[4],e[5],e[6])}get leftVector(){const s=this.upVector,a=w(this.northVector,-k(this.heading),s,t());return e(a,s,a)}get rightVector(){return F(t(),this.leftVector)}clone(){return new mt({renderCoordsHelper:this.renderCoordsHelper,viewshed:this.viewshed.clone()})}isValid(){return this.viewshed.isValid()}get metersPerUnit(){return this.renderCoordsHelper.spatialReference.metersPerUnit}pointOnSphere(e,t,s){const{observerRenderSpace:a,targetRenderSpace:r}=this,o=S(_t,r,a);return w(o,-k(t),this.leftVector,o),w(o,-k(e),this.tiltedUpVector,o),z(s,o,a)}cornerPoints(e,t){const s=this.observerRenderSpace,a=this.horizontalFieldOfView/2,r=this.verticalFieldOfView/2,o=this.pointOnSphere(-a,r,Ot),h=this.pointOnSphere(a,r,St),u=this.pointOnSphere(-a,-r,Tt),p=this.pointOnSphere(a,-r,Ct),v=S(bt,o,s),m=S(yt,h,s),_=S(Mt,u,s),f=S(Dt,p,s),{horizontalFieldOfView:g}=this,V=gt;b(v,m,o,u,s,e,g,t.topLeft,t.bottomLeft,V);const y=Vt;b(f,_,h,p,s,e,g,t.topRight,t.bottomRight,y),E(t.center,z(t.center,y,V),.5)}arcCentersPoints(e,t){const s=this.horizontalFieldOfView/2,a=this.verticalFieldOfView/2,r=this.pointOnSphere(0,a,t.top),o=this.pointOnSphere(0,-a,t.bottom),h=this.pointOnSphere(-s,0,t.left),u=this.pointOnSphere(s,0,t.right),{observerRenderSpace:p}=this;O$2(r,p,e),O$2(o,p,e),O$2(h,p,e),O$2(u,p,e)}parallelCenterPoints(e){const t=this.observerRenderSpace,s=this.farDistanceRenderSpace*Math.sin(k(this.verticalFieldOfView/2)),a=E(_t,this.tiltedUpVector,s);z(e.top,t,a),S(e.bottom,t,a)}renderSpaceToPoint(e,t){const s=_t;return this.renderCoordsHelper.fromRenderCoords(e,s,t),new N(s[0],s[1],s[2],t)}_pointToRenderSpace(e,t){const s=K(e.toArray());return this.renderCoordsHelper.toRenderCoords(s,e.spatialReference,t),t}};function b(t,s,a,r,o,h,u,p,v,m){const _=function R$2(t,s,a,r){const o=e(r,t,s);return C(o,o),E(o,o,a),o}(t,s,h,ft);z(m,o,_),y$2(a,t,_,h,u,p),y$2(r,t,_,h,u,v)}function w(e,t,s,a){return V(Et,t,s),y(a,e,Et)}function y$2(e,t,s,a,r,o){const h=C(_t,t);return E(h,h,a),z(o,e,h),0!==r&&360!==r&&z(o,o,s),o}function O$2(e,t,s){const a=S(_t,e,t);C(a,a),E(a,a,s),z(e,e,a)}o([h()],wt.prototype,"renderCoordsHelper",void 0),o([h()],wt.prototype,"viewshed",void 0),o([h()],wt.prototype,"observer",null),o([h()],wt.prototype,"farDistance",null),o([h()],wt.prototype,"farDistanceRenderSpace",null),o([h()],wt.prototype,"heading",null),o([h()],wt.prototype,"tilt",null),o([h()],wt.prototype,"tiltParallelToSurface",null),o([h()],wt.prototype,"horizontalFieldOfView",null),o([h()],wt.prototype,"verticalFieldOfView",null),o([h()],wt.prototype,"observerRenderSpace",null),o([h()],wt.prototype,"target",null),o([h()],wt.prototype,"targetRenderSpace",null),o([h()],wt.prototype,"targetDirection",null),o([h()],wt.prototype,"tiltedUpVector",null),o([h()],wt.prototype,"_basis",null),o([h()],wt.prototype,"upVector",null),o([h()],wt.prototype,"northVector",null),o([h()],wt.prototype,"leftVector",null),o([h()],wt.prototype,"rightVector",null),o([h()],wt.prototype,"isValid",null),o([h()],wt.prototype,"metersPerUnit",null),wt=mt=o([u("esri.views.3d.analysis.Viewshed.ViewshedComputedData")],wt);const _t=t(),ft=t(),gt=t(),Vt=t(),bt=t(),yt=t(),Mt=t(),Dt=t(),Ot=t(),St=t(),Tt=t(),Ct=t(),Et=$();let Ht=class c extends(q(p)){constructor(e){super(e),this.observer=null,this.farDistance=1e3,this.heading=0,this.tilt=90,this.horizontalFieldOfView=45,this.verticalFieldOfView=45}isValid(){return null!=this.observer&&this.farDistance>0}equals(e){return Q(this.observer,e.observer)&&this.farDistance===e.farDistance&&this.heading===e.heading&&this.tilt===e.tilt&&this.horizontalFieldOfView===e.horizontalFieldOfView&&this.verticalFieldOfView===e.verticalFieldOfView}};o([h({type:N})],Ht.prototype,"observer",void 0),o([h({type:Number,nonNullable:!0,range:{min:0}})],Ht.prototype,"farDistance",void 0),o([h({type:Number,nonNullable:!0}),J((e=>X.normalize(Y(e))))],Ht.prototype,"heading",void 0),o([h({type:Number,nonNullable:!0,range:{min:0,max:180}})],Ht.prototype,"tilt",void 0),o([h({type:Number,nonNullable:!0,range:{min:0,max:360}})],Ht.prototype,"horizontalFieldOfView",void 0),o([h({type:Number,nonNullable:!0,range:{min:0,max:180}})],Ht.prototype,"verticalFieldOfView",void 0),o([h()],Ht.prototype,"isValid",null),Ht=o([u("esri.analysis.Viewshed")],Ht);const Rt=Ht,At=Qe,Pt=Je*At,Ft=.0025,zt=Math.sin(k(2)),xt=Je/1.5;let Lt=class P extends Xe{constructor(e){super(),this._handles=new Z,this._interactive=!0,this._tool=e.tool,this._view=e.view,this._focusedArcMaterial=this._createArcMaterial(!0),this._unfocusedArcMaterial=this._createArcMaterial(!1),this._createManipulators(),this.forEachManipulator((e=>this._tool.manipulators.add(e)))}destroy(){this._handles=g(this._handles),this.forEachManipulator((e=>{this._tool.manipulators.remove(e),e.destroy()})),this._tool=null,this._view=null,this._manipulators=null}get interactive(){return this._interactive}set interactive(e){this._interactive!==e&&(this._interactive=e,this._updateManipulatorInteractivity())}createDragPipeline(e,t){const s=Object.values(this._manipulators);return ee(s.map((({manipulator:s,side:a})=>Ue(s,((s,r,o,h,u)=>{const p=function H$2(e,{observerRenderSpace:t,targetDirection:s,tiltedUpVector:a,rightVector:r}){const o=B(e)?r:a;return ce(t,s,o)}(a,t);B(a)?t.horizontalFieldOfView:t.verticalFieldOfView;const v=d(r.next((e=>({...e,manipulatorType:Ye.SCALE,side:a}))),this._view,p);e(s,v,o)})))))}updateManipulatorsTransform(e){this._forEachManipulatorInfo((t=>this._updateArcManipulatorTransform(t,e)))}updateManipulatorVisuals(e){this._forEachManipulatorInfo((t=>this._updateArcManipulatorVisuals(t,e)))}_updateArcManipulatorVisuals({manipulator:e,side:t},s){const a=[];if(null!=s){if("left"===t&&(s.horizontalFieldOfView<1||s.horizontalFieldOfView>359)||"bottom"===t&&s.verticalFieldOfView<1)return e.renderObjects=[],void(e.collisionType={type:"line",paths:[]});const[r,o]=function C$3(e,t,s){const{horizontalFieldOfView:a,verticalFieldOfView:r}=t,o=B(e),h=k(ue((o?r:a)/2,0,15)),u=o?1:Math.max(Math.sin(k(90-r/2)),.1),p=G(-h/2,h/2,u,[-u,0,0]);return[le(s,p),p]}(t,s,this._unfocusedArcMaterial);a.push(new $e(r,te.Unfocused),new $e(r.instantiate({material:this._focusedArcMaterial}),te.Focused)),e.collisionType={type:"line",paths:[o]}}e.renderObjects=a,e.radius=10}_updateArcManipulatorTransform({manipulator:e,side:t},s){const a=s.horizontalFieldOfView,r=k(s.verticalFieldOfView/2),o=k(a/2),h=B(t);e.location=s.observer;const u=$(),b2=e=>{he(u,e,u)};b2(ie(Ut,k(-90))),h||b2(se(Ut,r));const p=s.farDistanceRenderSpace;b2(ae(Ut,M($t,p,p,p))),b2(ne(Ut,function k$1(e){return function L(e){switch(e){case"left":return 0;case"bottom":return 1;case"right":return 2;case"top":return 3}}(e)*kt}(t))),b2(b$1(s,Ut));const v=S($t,s.targetRenderSpace,s.observerRenderSpace);let m,_;if(b2(re(Ut,v)),h){if(m=o,_=s.tiltedUpVector,0!==a&&360!==a){const e=x$4(s,this._view);m+=2*Math.tan(e/(2*s.farDistance))}}else _=s.rightVector,m=r;m*="right"===t||"bottom"===t?-1:1;const f=V(Ut,m,_);null!=f&&b2(f),e.modelTransform=u}_updateManipulatorInteractivity(){const e=this.grabbing;this.forEachManipulator((t=>{t.interactive=!e&&this.interactive||t.grabbing}))}_createManipulators(){const e=this._createArcManipulator("left"),t=this._createArcManipulator("right"),s=this._createArcManipulator("top"),a=this._createArcManipulator("bottom");this._manipulators={left:e,right:t,top:s,bottom:a};const r=[[a.manipulator,s.manipulator],[e.manipulator,t.manipulator]];r.push(...r.map((([e,t])=>[t,e]))),this._handles.add(r.map((([e,t])=>e.events.on("focus-changed",(e=>{const s="focus"===e.action;t.hovering=s})))))}_createArcManipulator(e){const t={manipulator:new je({view:this._view,autoScaleRenderObjects:!1,worldSized:!0}),side:e};return this._updateArcManipulatorVisuals(t),t}_createArcMaterial(e){const t=e?Pt:At,s=new oe({renderOccluded:v.OccludeAndTransparent,isDecoration:!0,width:t});return this._handles.add(m((()=>r.toUnitRGBA(this._view.effectiveTheme.accentColor)),(e=>s.setParameters({color:e})),f)),s}forEachManipulator(e){Object.values(this._manipulators).forEach((({manipulator:t})=>e(t,Ye.SCALE)))}_forEachManipulatorInfo(e){Object.values(this._manipulators).forEach((t=>e(t)))}};function G(e,t,s,a=[0,0,0],r=10){de(r>1,"createArcPolylineGeometry() needs at least 2 for numVertices");const o=t-e,[h,u,p]=a;if(o<=0||s<=0){const e=.001;return[W(h,u,p+e),W(h,u,u+-e)]}const v=[],m=o/r;for(let _=0;_<r;_++){let a=e+_*m;_===r-1&&(a=t);const o=Math.cos(a)*s,f=Math.sin(a)*s,g=W(o+h,u,f+p);v.push(g)}return v}function B(e){return"left"===e||"right"===e}const kt=Math.PI/2,Ut=$(),$t=t();class U extends je{constructor(e,t,s,a){super({view:e,autoScaleRenderObjects:!1,worldSized:!0,radius:5}),this._handles=new Z,this._setupManipulatorVisual(t,s,a)}destroy(){this._handles.remove(),super.destroy()}_setupManipulatorVisual(e,t,s){const a=this._createMaterial(),r=k(t),o=e?1:Math.sin(r),h=e?G(0,r,o,[-o,0,0]):[W(0,0,0),W(0,0,o)],u=pe(a,h,s,16,!1),p=pe(a,h,s*Je,16,!1),v=x$2(!1,a,s),m=x$2(!0,a,s),_=$();re(_,h[h.length-1]),ve(_,_,se(jt,Math.PI/2)),ve(_,_,ie(jt,Math.PI/2)),e&&ve(_,_,se(jt,-r)),v.transformation=_,m.transformation=_,this.renderObjects=[new $e(u,te.Unfocused),new $e(p,te.Focused),new $e(v,te.Unfocused),new $e(m,te.Focused)];const f=W(0,y$1(!0),0),g=y(f,f,_),V=[...h,g];this.collisionType={type:"line",paths:[V]}}_createMaterial(){const e=new me({cullFace:we.Back,renderOccluded:v.OccludeAndTransparent,isDecoration:!0,writeLinearDepth:!0});return this._handles.add(m((()=>r.toUnitRGBA(this.view.effectiveTheme.accentColor)),(t=>e.setParameters({color:t})),f)),e}}function x$2(e,t,s){const a=y$1(e);let r=2*s;e&&(r*=Je);const o=a/2;return _e(t,a,o,o,r,0)}function y$1(e){let t=zt;return e&&(t*=xt),t}const jt=$();let It=class R extends Xe{constructor(e){super(),this._handles=new Z,this._interactive=!0,this._tool=e.tool,this._view=e.view,this._manipulatorHeading=new U(this._view,!0,5,Ft),this._manipulatorTilt=new U(this._view,!0,5,Ft),this._manipulatorDistance=new U(this._view,!1,5,Ft),this.forEachManipulator((e=>{this._tool.manipulators.add(e),this._handles.add(e.events.on("grab-changed",(()=>this._updateManipulatorInteractivity())))}))}destroy(){this._handles.destroy(),this.forEachManipulator((e=>{this._tool.manipulators.remove(e),e.destroy()})),this._manipulatorHeading=null,this._manipulatorTilt=null,this._manipulatorDistance=null,this._tool=null,this._view=null}get interactive(){return this._interactive}set interactive(e){this._interactive!==e&&(this._interactive=e,this._updateManipulatorInteractivity())}createHeadingDragPipeline(t,s){return Ue(this._manipulatorHeading,((a,r,o,h,u)=>{const{_view:p}=this,v=Math.sin(k(s.tiltParallelToSurface))*s.farDistanceRenderSpace,m=z(Wt,s.observerRenderSpace,E(Kt,s.upVector,v)),_=e(Kt,s.northVector,s.upVector),f=d(r,p,ce(m,s.northVector,_)).next((e=>({...e,manipulatorType:Ye.ROTATE})));t(a,f,o)}))}createTiltDragPipeline(e,t){return Ue(this._manipulatorTilt,((s,a,r,o,h)=>{const u=ce(t.observerRenderSpace,t.targetDirection,t.tiltedUpVector),p=d(a,this._view,u).next((e=>({...e,manipulatorType:Ye.ROTATE})));e(s,p,r)}))}createDistanceDragPipeline(e,t){return Ue(this._manipulatorDistance,((s,a,r,o,h)=>{const u=Ve(t.observerRenderSpace,t.targetDirection),p=a.next(Ie(this._view,s.location)).next(Ke(this._view,u)).next((e=>({...e,manipulatorType:Ye.SCALE})));e(s,p,r)}))}updateManipulators(e){const{target:t}=e;this._manipulatorHeading.location=t,this._manipulatorTilt.location=t,this._manipulatorDistance.location=t;const s=$(),m2=e=>{he(s,e,s)},a=function I$1(e){const t=1,{verticalFieldOfView:s,horizontalFieldOfView:a}=e,r=s>180,o=a>180,h=e.farDistanceRenderSpace;if(r&&o)return Math.max(t,h);e.arcCentersPoints(h,Bt);const{left:u,right:p,top:v,bottom:m}=Bt,_=1.9*(r?fe(u,p):o?fe(m,u):Math.sqrt(Math.min(ge(m,v),ge(u,p))));return Math.max(t,Math.min(h,_))}(e);m2(ae(Nt,M(Wt,a,a,a))),m2(b$1(e,Nt));const r=Ft*Je*a,o=E(Wt,e.targetDirection,r);m2(re(Nt,o));const h=ne(Nt,-qt);ve(h,h,ie(Gt,-qt)),this._manipulatorHeading.modelTransform=ve($(),s,h);const u=ie(Nt,qt);ve(u,u,ne(Gt,Math.PI)),this._manipulatorTilt.modelTransform=he($(),s,u),this._manipulatorDistance.modelTransform=s}_updateManipulatorInteractivity(){const e=!this.grabbing;this.forEachManipulator((t=>{t.interactive=e&&this._interactive||t.grabbing}))}forEachManipulator(e){e(this._manipulatorHeading,Ye.ROTATE),e(this._manipulatorTilt,Ye.ROTATE),e(this._manipulatorDistance,Ye.SCALE)}};const Bt={top:t(),bottom:t(),left:t(),right:t()},Nt=$(),Gt=$(),Wt=t(),Kt=t(),qt=Math.PI/2;class l extends je{constructor(e,t){super({view:e,autoScaleRenderObjects:!1,worldSized:!1,radius:5,interactive:!1}),this._handles=new Z;const s=Be(this._color);this.renderObjects=[new $e(be(s,5,32,32))],t.manipulators.add(this),this._handles.add([m((()=>this._color),(e=>{s.setParameters({color:e})}),f)])}destroy(){this._handles.remove(),super.destroy()}get _color(){return r.toUnitRGBA(this.view.effectiveTheme.accentColor)}}o([h()],l.prototype,"_color",null);const Qt=Symbol("dragHandles"),Jt=Symbol("hideManipulators");let Xt=class extends p{constructor(e){super(e),this._moveManipulation=null,this._observerManipulator=null,this._fieldOfViewManipulation=null,this._scaleOrientManipulation=null,this._moveHelperVisualElement=null,this._settings=new Ze({getTheme:()=>this.view.effectiveTheme}),this._grabbing=!1,this.viewshedComputedData=null}initialize(){this._moveManipulation=this._createMoveManipulation(),this._fieldOfViewManipulation=new Lt({view:this.view,tool:this.parentTool}),this._scaleOrientManipulation=new It({view:this.view,tool:this.parentTool}),this._observerManipulator=new l(this.view,this.parentTool),this._createMoveHelperVisuals(),this.addHandles([m((()=>{const{observer:e}=this;return{observer:e,array:null==e?void 0:e.toArray()}}),(({observer:e})=>{null!=e&&(this._moveManipulation.location=e,this._observerManipulator.location=e)}),ye),m((()=>{const{viewshedComputedData:e}=this;return{viewshedComputedData:e,observer:null==e?void 0:e.observer}}),(({viewshedComputedData:e,observer:t},s)=>{this._grabbing&&t!==(null==s?void 0:s.observer)||(this.removeHandles(Qt),(null==e?void 0:e.isValid())&&this.addHandles([this._buildObserverDragPipeline(e),this._buildFOVDragPipeline(e),this._buildScaleOrientDragPipeline(e)].filter(Me),Qt))}),f),m((()=>{const e=this.viewshedComputedData;return(null==e?void 0:e.isValid())?{viewshedCompData:e,target:e.targetRenderSpace,hFOV:e.horizontalFieldOfView,vFOV:e.verticalFieldOfView}:null}),(e=>{null!=e&&this._fieldOfViewManipulation.updateManipulatorsTransform(e.viewshedCompData)}),f),m((()=>{const e=this.viewshedComputedData;return(null==e?void 0:e.isValid())?{viewshedCompData:e,hFOV:e.horizontalFieldOfView,vFOV:e.verticalFieldOfView,tilt:e.tilt}:null}),(e=>{null!=e&&this._fieldOfViewManipulation.updateManipulatorVisuals(e.viewshedCompData)}),f),m((()=>{var e;return this.analysisViewData.visible&&((null==(e=this.viewshedComputedData)?void 0:e.isValid())??!1)&&!this.parentTool.placingTarget}),(e=>this._updateManipulationAvailability(e)),f),m((()=>{const e=this.viewshedComputedData;if(!(null==e?void 0:e.isValid()))return null;const{observer:t,target:s,verticalFieldOfView:a,horizontalFieldOfView:r}=e;return{viewshedCompData:e,observer:t,target:s,verticalFieldOfView:a,horizontalFieldOfView:r}}),(e=>{null!=e&&this._scaleOrientManipulation.updateManipulators(e.viewshedCompData)}),f),m((()=>{var e;return null==(e=this.viewshedComputedData)?void 0:e.observerRenderSpace}),(e=>{null!=e&&this._updateMoveHelperVisualsLocation(e)}),f)]);this._forEachManipulator((e=>{this.addHandles([e.events.on("focus-changed",(()=>this._updateManipulatorVisibility())),e.events.on("grab-changed",(e=>{this._grabbing="start"===e.action}))])}))}destroy(){this._moveManipulation=g(this._moveManipulation),this._fieldOfViewManipulation=g(this._fieldOfViewManipulation),this._scaleOrientManipulation=g(this._scaleOrientManipulation),this.parentTool.manipulators.remove(this._observerManipulator),this._observerManipulator=g(this._observerManipulator),this._destroyMoveHelperVisuals()}get viewshed(){var e;return null==(e=this.viewshedComputedData)?void 0:e.viewshed}get grabbing(){return this._grabbing}get observer(){var e;return null==(e=this.viewshed)?void 0:e.observer}set observer(e){const t=this.viewshed;null!=t&&(t.observer=e)}get discManipulator(){return this._moveManipulation.xyManipulation.discManipulator}onManipulatorSelectionChanged(){this._updateManipulatorVisibility()}hasManipulator(e){let t=!1;return this._forEachManipulator((s=>{t=t||s===e})),t}_someManipulatorSelected(){return this._moveManipulation.selected||this._fieldOfViewManipulation.selected||this._scaleOrientManipulation.selected}_someManipulatorHovering(){return this._moveManipulation.hovering||this._fieldOfViewManipulation.hovering||this._scaleOrientManipulation.hovering}_createMoveManipulation(){return new et({view:this.view,tool:this.parentTool,snapToScene:!1,xyAvailable:!0,xyAxisAvailable:!0,zAvailable:!0,radius:tt})}_buildObserverDragPipeline(e){const t=e.observer;return null==t?null:this._moveManipulation.createDragPipeline(((t,s,a,r,o)=>{r=r.next(Ne(this,["observer"]));const h=e.observer.clone();if(null==h)return{steps:a,cancel:r};const u=at.fromGeometry(h,De(this.view.viewingMode));return{steps:a.next(Ge({operations:u})).next((e=>(this.observer=Oe(u.data.geometry,h.spatialReference),e))),cancel:r}}),{mode:"absolute-height",offset:0},t.spatialReference,void 0)}_buildFOVDragPipeline(e){let t=0,s=0;return this._fieldOfViewManipulation.createDragPipeline(((a,r,o)=>{if(null==e)return{steps:r,cancel:o};const h=e.viewshed;return o=o.next(Ne(e,["horizontalFieldOfView","verticalFieldOfView"])),{steps:r.next((a=>{"start"===a.action&&(t=e.horizontalFieldOfView,s=e.verticalFieldOfView);const r=a.deltaAngle;let o=0;switch(a.side){case"left":o=t/2-r;break;case"right":o=t/2+r;break;case"top":o=s+2*r;break;case"bottom":o=s-2*r}return B(a.side)?(o=X.normalize(o),o=o>270?0:o>180?180:o,h.horizontalFieldOfView=2*o):h.verticalFieldOfView=o,a})),cancel:o}}),e)}_buildScaleOrientDragPipeline(e){let t=0,s=0;const s2=(t,s)=>(a,r,o)=>{if(null==e)return{steps:r,cancel:o};const h=e.viewshed;return o=o.next(Ne(h,[t])),{steps:r=r.next(s(h,e)),cancel:o}};return ee([this._scaleOrientManipulation.createHeadingDragPipeline(s2("heading",((t,a)=>a=>("start"===a.action&&(s=e.heading),t.heading=X.normalize(s+a.deltaAngle),a))),e),this._scaleOrientManipulation.createTiltDragPipeline(s2("tilt",((s,a)=>a=>{"start"===a.action&&(t=e.tilt);let r=t+a.deltaAngle;return r<-90?r=180:r>270&&(r=0),s.tilt=Zt.clamp(r),a})),e),this._scaleOrientManipulation.createDistanceDragPipeline(s2("farDistance",((e,t)=>s=>{const a=S(Yt,s.renderEnd,t.observerRenderSpace),r=T(a)*t.metersPerUnit,o=Se(a,t.targetDirection)<0?1:r;return e.farDistance=o,s})),e)])}_updateManipulationAvailability(e){this._moveManipulation.available=e,this._fieldOfViewManipulation.available=e,this._scaleOrientManipulation.available=e,this._observerManipulator.available=e}_updateManipulatorVisibility(){const e=this._someManipulatorSelected()||this._someManipulatorHovering()&&null==this.view.activeTool;if(e)this.removeHandles(Jt);else{const e=[],i=t=>{e.push(t.disableDisplay())};this._forEachManipulator(i),this.addHandles(e,Jt)}this._updateMoveHelperVisualsVisibility(e)}_forEachManipulator(e){this._moveManipulation.forEachManipulator(e),this._fieldOfViewManipulation.forEachManipulator(e),this._scaleOrientManipulation.forEachManipulator(e),e(this._observerManipulator)}_createMoveHelperVisuals(){this._destroyMoveHelperVisuals();const e=new st({view:this.view,attached:!0,style:{glowWidth:this._settings.visualElements.heightPlane.glowWidth,innerWidth:this._settings.visualElements.heightPlane.innerWidth},isDecoration:!0}),t=new it({view:this.view,extensionType:this._settings.visualElements.zVerticalLine.extensionType,attached:!0,innerWidth:1,writeDepthEnabled:!1,renderOccluded:v.OccludeAndTransparent,isDecoration:!0});this._moveHelperVisualElement={laserline:e,verticalLine:t},this.addHandles([m((()=>this._settings.visualElements.zVerticalLine),(e=>e.apply(t)),ye),m((()=>this._settings.visualElements.heightPlane),(t=>t.apply(e)),ye)])}_updateMoveHelperVisualsVisibility(e){e=this.analysisViewData.visible&&e;const t=this._moveHelperVisualElement;null!=t&&(t.verticalLine.visible=e,t.laserline.visible=e)}_updateMoveHelperVisualsLocation(e){const t=this._moveHelperVisualElement;if(null==t)return;const{laserline:s,verticalLine:a}=t;s.heightManifoldTarget=e,s.intersectsWorldUpAtLocation=e,null!=e&&a.setStartEndFromWorldDownAtLocation(e)}_destroyMoveHelperVisuals(){const e=this._moveHelperVisualElement;null!=e&&(e.laserline.destroy(),e.verticalLine.destroy(),this._moveHelperVisualElement=null)}get test(){return{moveManipulation:this._moveManipulation,fieldOfViewManipulation:this._fieldOfViewManipulation,scaleOrientManipulation:this._scaleOrientManipulation,moveHelperVisualElements:this._moveHelperVisualElement,viewshedComputedData:this.viewshedComputedData}}};o([h({constructOnly:!0})],Xt.prototype,"analysis",void 0),o([h({constructOnly:!0})],Xt.prototype,"analysisViewData",void 0),o([h({constructOnly:!0})],Xt.prototype,"parentTool",void 0),o([h({constructOnly:!0,nonNullable:!0})],Xt.prototype,"view",void 0),o([h()],Xt.prototype,"viewshed",null),o([h()],Xt.prototype,"_grabbing",void 0),o([h()],Xt.prototype,"grabbing",null),o([h()],Xt.prototype,"viewshedComputedData",void 0),o([h()],Xt.prototype,"observer",null),Xt=o([u("esri.views.3d.analysis.Viewshed.ViewshedSubTool")],Xt);const Yt=t(),Zt=new Te(0,180);var ei;let ti=ei=class extends nt{constructor(e){super(e),this.removeIncompleteOnCancel=!1,this.automaticManipulatorSelection=!1,this._stagedViewshed=null,this._stagedViewshedComputedData=null,this._creating=!1,this._selectedManipulator=null,this._selectedManipulatorSubTool=null}initialize(){this._intersector=ht(this.view.state.viewingMode);const e=this.analysisViewData.viewshedComputedDataHandles;this.addHandles([m((()=>e.some((e=>e.viewshedComputedData.isValid()))),(e=>{e&&this.finishToolCreation()}),ye),m((()=>this._stagedViewshed),(e=>{var t;this._stagedViewshedComputedData=null!=e?null==(t=this.analysisViewData.viewshedComputedDataHandles.find((t=>t.viewshedComputedData.viewshed===e)))?void 0:t.viewshedComputedData:null}),ye),m((()=>this.firstGrabbedManipulator),(e=>{null!=e&&this._selectManipulator(e)}),Ee),m((()=>this.analysisViewData.visible),(e=>{e||this._selectManipulator(null)})),m((()=>this.view.activeTool),(e=>{e!==this&&null!=e&&this._selectManipulator(null)}))]),this.subToolHandles=j((()=>e),(({viewshedComputedData:e})=>{const t=new Xt({analysis:this.analysis,analysisViewData:this.analysisViewData,parentTool:this,view:this.view,viewshedComputedData:e});return{subTool:t,remove:()=>{this._selectedManipulatorSubTool===t&&this._selectManipulator(null),t.destroy()}}}))}destroy(){this.subToolHandles=g(this.subToolHandles)}onDeactivate(){this.removeStaged()}get cursor(){return this.creating?"crosshair":null}_selectManipulator(e){var t,s,a;const r=this._selectedManipulator;null!=r&&(r.selected=!1,this._selectedManipulator=null,null==(t=this._selectedManipulatorSubTool)||t.onManipulatorSelectionChanged(),this._selectedManipulatorSubTool=null),null!=e&&(e.selected=!0,this._selectedManipulator=e,this._selectedManipulatorSubTool=null==(s=this.subToolHandles.find((t=>t.subTool.hasManipulator(e))))?void 0:s.subTool,null==(a=this._selectedManipulatorSubTool)||a.onManipulatorSelectionChanged())}get selectedViewshed(){var e;return null==(e=this._selectedManipulatorSubTool)?void 0:e.viewshed}set selectedViewshed(e){this.selectViewshed(e)}get selectedViewshedComputedData(){var e;return null==(e=this._selectedManipulatorSubTool)?void 0:e.viewshedComputedData}get stagedViewshed(){return this._stagedViewshed}get grabbing(){return this.subToolHandles.some((({subTool:e})=>e.grabbing))}get creating(){return this._creating&&this.active}get placingTarget(){return null!=this._stagedViewshed}createViewsheds(){this._creating=!0}onManipulatorSelectionChanged(){this.subToolHandles.forEach((e=>e.subTool.onManipulatorSelectionChanged()))}onInputEvent(e){switch(e.type){case"immediate-click":this._clickDeselectHandler();break;case"immediate-double-click":this._doubleClickHandler(e);break;case"pointer-move":this._pointerMoveHandler(e);break;case"key-down":dt.cancel===e.key?this._cancelKeyHandler(e):dt.delete.includes(e.key)&&this._deleteKeyHandler()}}onInputEventAfter(e){"immediate-click"===e.type&&this._clickPlacementHandler(e)}_clickDeselectHandler(){this.hasFocusedManipulators||this._selectManipulator(null)}_clickPlacementHandler(e){if(!this.creating||this.hasFocusedManipulators)return;const t=this._stagedViewshed,s=this._intersectScreen(e,li);if(null!=s){if(null==t){s.mapPoint.z=(s.mapPoint.z??0)+2;const e=new Rt({observer:s.mapPoint.clone()});this.analysis.viewsheds.add(e),this._stagedViewshed=e,this._updateStagedViewshed(s.scenePoint)}else{this._updateStagedViewshed(s.scenePoint);const e=this._stagedViewshed;this._stagedViewshed=null,this.selectViewshed(e)}e.stopPropagation()}}_doubleClickHandler(e){this.creating&&(this.removeStaged(),this._selectManipulator(null),this._creating=!1,this.view.activeTool=null,e.stopPropagation())}_pointerMoveHandler(e){if(!this.creating||null==this._stagedViewshed)return;const t=this._intersectScreen(e,li);null!=t&&this._updateStagedViewshed(t.scenePoint)}_cancelKeyHandler(e){if(this.creating){if(this.removeStaged())return this._selectManipulator(null),void e.stopPropagation();this._creating=!1}else if(!this.grabbing)return this.selectViewshed(null),void e.stopPropagation()}_deleteKeyHandler(){this.creating&&this.removeStaged(),null!=this.selectedViewshed&&this.analysis.viewsheds.remove(this.selectedViewshed)}_updateStagedViewshed(e){const t=this._stagedViewshed,s=this._stagedViewshedComputedData;if(null==t||null==s)return;const{heading:r,tilt:o,farDistance:h}=function D(e,t,s){const r=t.observerRenderSpace,o=S(ii,s,r),h=T(o)*t.metersPerUnit,u=e.renderCoordsHelper.basisMatrixAtPosition(r,ri),p=M(si,u[8],u[9],u[10]),v=Re(r,p,oi),m=Ae(v,s,ai),_=S(m,m,r),f=a(H(o,_))*(Se(p,o)<0?-1:1)+90,g=M(ni,u[4],u[5],u[6]),V=a(H(g,_)),y=M(ni,u[0],u[1],u[2]);return{heading:Se(_,y)<0?360-V:V,tilt:f,farDistance:h}}(this.view,s,e);t.farDistance=h,t.tilt=o,t.heading=r}removeStaged(){return null!=this._stagedViewshed&&(this.analysis.viewsheds.remove(this._stagedViewshed),this._stagedViewshed=null,!0)}selectViewshed(e){var t;if(null!=e)for(const a of this.view.tools.items)a!==this&&a instanceof ei&&a.selectViewshed(null);const s=null==(t=this.subToolHandles.find((t=>t.subTool.viewshed===e)))?void 0:t.subTool;this._selectManipulator(null==s?void 0:s.discManipulator)}_intersectScreen(e,t){const s=He(e);this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(s,this._intersector);const a=this._intersector.results.min,r=t.scenePoint;if(!a.getIntersectionPoint(r))return null;const o=t.mapPoint;return o.spatialReference=this.view.spatialReference,this.view.renderCoordsHelper.fromRenderCoords(r,o),null==o?null:t}get test(){var e;return{subTools:this.subToolHandles.map((e=>e.subTool.test)),selectedSubTool:null==(e=this._selectedManipulatorSubTool)?void 0:e.test,stagedViewshed:this._stagedViewshed}}};o([h({constructOnly:!0})],ti.prototype,"view",void 0),o([h()],ti.prototype,"analysisViewData",void 0),o([h()],ti.prototype,"removeIncompleteOnCancel",void 0),o([h()],ti.prototype,"automaticManipulatorSelection",void 0),o([h({constructOnly:!0})],ti.prototype,"analysis",void 0),o([h()],ti.prototype,"subToolHandles",void 0),o([h()],ti.prototype,"_stagedViewshed",void 0),o([h()],ti.prototype,"_stagedViewshedComputedData",void 0),o([h()],ti.prototype,"_creating",void 0),o([h({readOnly:!0})],ti.prototype,"cursor",null),o([h()],ti.prototype,"_selectedManipulator",void 0),o([h()],ti.prototype,"_selectedManipulatorSubTool",void 0),o([h()],ti.prototype,"selectedViewshed",null),o([h()],ti.prototype,"selectedViewshedComputedData",null),o([h()],ti.prototype,"grabbing",null),o([h()],ti.prototype,"creating",null),o([h()],ti.prototype,"placingTarget",null),ti=ei=o([u("esri.views.3d.analysis.Viewshed.ViewshedTool")],ti);const ii=t(),si=t(),ai=t(),ni=t(),ri=$(),oi=Ce(),li={mapPoint:new N,scenePoint:t()},di=ti;let hi=class extends(ze(p)){constructor(e){super(e),this.type="viewshed-view-3d",this.analysis=null,this.tool=null,this.viewshedComputedDataHandles=null,this._placementTask=null}get selectedViewshed(){var e;return null==(e=this.tool)?void 0:e.selectedViewshed}set selectedViewshed(e){const{tool:t}=this;null!=t&&(t.selectedViewshed=e)}get selectedViewshedComputedData(){var e;return null==(e=this.tool)?void 0:e.selectedViewshedComputedData}initialize(){this._initializeUpdateHandle(),this.viewshedComputedDataHandles=j((()=>this.analysis.viewsheds),(e=>{const t=new wt({renderCoordsHelper:this.view.renderCoordsHelper,viewshed:e}),s=Symbol();return this.addHandles(m((()=>t.isValid()),((e,s)=>{this.visible&&(e?this._addViewshedsToRenderer(t):s&&this._removeViewshedsFromRenderer(t))}),f)),{viewshedComputedData:t,remove:()=>{this.removeHandles(s),this._removeViewshedsFromRenderer(t),t.destroy()}}})),this._analysisVisualization=new vt({view:this.view,analysisViewData:this,isDecoration:!this.parent}),this.addHandles([m((()=>this.visible),(e=>{const t=this.viewshedComputedDataHandles.map((e=>e.viewshedComputedData)).filter((e=>e.isValid()));e?this._addViewshedsToRenderer(t):this._removeViewshedsFromRenderer(t)})),m((()=>this.view.renderCoordsHelper),(e=>{this.viewshedComputedDataHandles.forEach((({viewshedComputedData:t})=>t.renderCoordsHelper=e))})),rt(this,di)])}destroy(){this._placementTask=Pe(this._placementTask),ot(this),this._analysisVisualization=g(this._analysisVisualization),this._removeViewshedsFromRenderer(this.viewshedComputedDataHandles.map((e=>e.viewshedComputedData)))}async createViewsheds(e){return this._placementTask=Pe(this._placementTask),this._placementTask=lt(this,e),null!=this.tool&&this.tool.createViewsheds(),await this._placementTask.promise}_initializeUpdateHandle(){const e=this.view._stage.renderer.plugins.plugins.find((e=>e instanceof Fe));e&&(this._updateHandleInRenderer=e.updateViewsheds.bind(e))}_addViewshedsToRenderer(e){this._updateHandleInRenderer({adds:e})}_removeViewshedsFromRenderer(e){this._updateHandleInRenderer({removes:e})}};o([h({readOnly:!0})],hi.prototype,"type",void 0),o([h({constructOnly:!0,nonNullable:!0})],hi.prototype,"analysis",void 0),o([h()],hi.prototype,"tool",void 0),o([h()],hi.prototype,"selectedViewshed",null),o([h()],hi.prototype,"selectedViewshedComputedData",null),o([h()],hi.prototype,"viewshedComputedDataHandles",void 0),o([h()],hi.prototype,"_analysisVisualization",void 0),o([h()],hi.prototype,"_placementTask",void 0),hi=o([u("esri.views.3d.analysis.ViewshedAnalysisView3D")],hi);const ci=hi;export{ci as default};
